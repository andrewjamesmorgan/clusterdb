<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	>
<channel>
	<title>
	Comments on: Download, install, configure, run and test MySQL Cluster in under 15 minutes	</title>
	<atom:link href="./feed/index.html" rel="self" type="application/rss+xml" />
	<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html</link>
	<description>Database technologies - especially around scalability and High Availability</description>
	<lastBuildDate>Sat, 14 May 2016 08:42:19 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	
	<item>
		<title>
		By: Shantanu Bansal		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-629218</link>

		<dc:creator><![CDATA[Shantanu Bansal]]></dc:creator>
		<pubDate>Sat, 14 May 2016 08:42:19 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-629218</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-146786&quot;&gt;vijay muddu&lt;/a&gt;.

i am unable to create database in the cluster its asking for mysql-client-5.5 installation and even when i am trying to install,its not hapenning!

One more issue
id=2 (not connected, accepting connect from 192.168.1.151)
for all the nodes even though my all nodes are up
I have 2 Data Nodes and 2 Sql nodes]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-146786">vijay muddu</a>.</p>
<p>i am unable to create database in the cluster its asking for mysql-client-5.5 installation and even when i am trying to install,its not hapenning!</p>
<p>One more issue<br />
id=2 (not connected, accepting connect from 192.168.1.151)<br />
for all the nodes even though my all nodes are up<br />
I have 2 Data Nodes and 2 Sql nodes</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: andrew		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-327781</link>

		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 30 Oct 2014 10:03:15 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-327781</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-326759&quot;&gt;thangict93&lt;/a&gt;.

If you&#039;re wanting to understand what upgrade paths are supported then this is a good starting point... &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html&quot; title=&quot;http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html&lt;/a&gt;

Andrew.]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-326759">thangict93</a>.</p>
<p>If you&#8217;re wanting to understand what upgrade paths are supported then this is a good starting point&#8230; <a href="http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html" title="http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html" target="_blank" rel="nofollow">http://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-upgrade-downgrade.html</a></p>
<p>Andrew.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: thangict93		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-326759</link>

		<dc:creator><![CDATA[thangict93]]></dc:creator>
		<pubDate>Thu, 30 Oct 2014 01:41:38 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-326759</guid>

					<description><![CDATA[hello!
current, I am using mysql cluster 7.0.8.
I want to upgrade version. How much is appropriate?
Thanks.
Sorry, my english is not good.]]></description>
			<content:encoded><![CDATA[<p>hello!<br />
current, I am using mysql cluster 7.0.8.<br />
I want to upgrade version. How much is appropriate?<br />
Thanks.<br />
Sorry, my english is not good.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: Nesreen		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-298716</link>

		<dc:creator><![CDATA[Nesreen]]></dc:creator>
		<pubDate>Tue, 14 Oct 2014 09:35:14 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-298716</guid>

					<description><![CDATA[Hi, Andrew,
I am totaly new with mysql cluster also with mysql at all
I tried to use Mysql cluster from 3 days , but I got suck , I tataly confused 


1- I  use windows 8 , I download msi from (http://dev.mysql.com/downloads/cluster/)
2- try to follow (http://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart_windows.pdf) steps
3- I have 2 local ip&#039;s (172.16.1.110 its my ip  and 172.16.1.121 another local Ip under the same domain)

I tried to follow GUI as video but I have exception that he can&#039;t recognized the information of the second Ip which is (172.16.1.121) and tells me that 
couldn&#039;t open socket

please tell me steps 
what shall I do first
and how can I assign management cluster ip
and node cluster ip]]></description>
			<content:encoded><![CDATA[<p>Hi, Andrew,<br />
I am totaly new with mysql cluster also with mysql at all<br />
I tried to use Mysql cluster from 3 days , but I got suck , I tataly confused </p>
<p>1- I  use windows 8 , I download msi from (<a href="http://dev.mysql.com/downloads/cluster/" rel="nofollow ugc">http://dev.mysql.com/downloads/cluster/</a>)<br />
2- try to follow (<a href="http://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart_windows.pdf" rel="nofollow ugc">http://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart_windows.pdf</a>) steps<br />
3- I have 2 local ip&#8217;s (172.16.1.110 its my ip  and 172.16.1.121 another local Ip under the same domain)</p>
<p>I tried to follow GUI as video but I have exception that he can&#8217;t recognized the information of the second Ip which is (172.16.1.121) and tells me that<br />
couldn&#8217;t open socket</p>
<p>please tell me steps<br />
what shall I do first<br />
and how can I assign management cluster ip<br />
and node cluster ip</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: vijay muddu		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-146786</link>

		<dc:creator><![CDATA[vijay muddu]]></dc:creator>
		<pubDate>Fri, 06 Jun 2014 18:22:32 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-146786</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-411&quot;&gt;andrew&lt;/a&gt;.

hi Andrew 
Thanks for your quick response, i tried to configure cluster using rpm available at mysql site
i used below instruction,but i am not able to do data cluster, management server shows all data nodes connected

can please help me if i am doing missing something, below is the config.

problems:
1. i am not able to see data on both data nodes 
2. i have 2 rpms one is cluster-server &#038; another cluster- client -- where to use which rpm
3. do i need to setup cluster-server rpm on datanode

can you guide me how the rpm works &#038; how they be installed on what node..


Thanks 


Server1 192.168.100.1 (Cluster Management Server)
Server2 192.168.100.2 (Data Node 1)
Server3 192.168.100.3 (Data Node 2)


First step is to install MySQL Cluster Management Server on Server1. Lets download from MySQL Cluster 6.2 from MySQL website (http://dev.mysql.com/downloads/cluster/). This guide is intended for Debian based systems, so we will download nonrpm package (mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz). Here are the steps to follow, to set up the MySQL Cluster Management Server (ndb_mgmd) and the cluster Management client (ndb_mgm)


mkdir /usr/src/mysql-mgm
cd /usr/src/mysql-mgm
wget pick up any mirror from MySQL&#039;s website
tar xvfz mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz
cd mysql-cluster-gpl-6.2.15-linux-i686-glibc23
mv bin/ndb_mgm /usr/bin
mv bin/ndb_mgmd /usr/bin
chmod 755 /usr/bin/ndb_mg*
cd /usr/src
rm -rf /usr/src/mysql-mgm

Next step is to create the Cluster configuration file:

mkdir /var/lib/mysql-cluster
cd /var/lib/mysql-cluster
vi config.ini 

(I try to use nano as the text editor, just because it is much easier to use than vi.)


Here is the sample config file:


[NDBD DEFAULT]
NoOfReplicas=2

[MYSQLD DEFAULT]

[NDB_MGMD DEFAULT]

[TCP DEFAULT]

# Section for the cluster management node
[NDB_MGMD]
# IP address of the management node (server1)
HostName=192.168.100.1

# Section for the storage nodes
[NDBD]
# IP address of the first data node (Server2)
HostName=192.168.100.2
DataDir= /var/lib/mysql-cluster

[NDBD]
# IP address of the second storage node (Server3)
HostName=192.168.100.3
DataDir=/var/lib/mysql-cluster

# one [MYSQLD] per storage node
[MYSQLD]
[MYSQLD]


Now let&#039;s start the Management Server:

ndb_mgmd -f /var/lib/mysql-cluster/config.ini


Now, we would want to start the Management Server automatically in case of a system reboot, so we add an init script to do that:


echo &#039;ndb_mgmd -f /var/lib/mysql-cluster/config.ini&#039; &#062; /etc/init.d/ndb_mgmd
chmod 755 /etc/init.d/ndb_mgmd
update-rc.d ndb_mgmd defaults


Data Nodes Configuration (Server2 and Server3):

Now let&#039;s set up the data nodes. Here are the steps to do that (do on both data nodes):


groupadd mysql
useradd -g mysql mysql
cd /usr/local/
wget pick up any mirror from MySQL&#039;s website
tar xvfz mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz
ln -s mysql-cluster-gpl-6.2.15-linux-i686-glibc23 mysql
cd mysql
scripts/mysql_install_db --user=mysql
chown -R root:mysql .
chown -R mysql data
cp support-files/mysql.server /etc/init.d/
chmod 755 /etc/init.d/mysql.server
update-rc.d mysql.server defaults
cd /usr/local/mysql/bin
mv * /usr/bin
cd ../
rm -fr /usr/local/mysql/bin
ln -s /usr/bin /usr/local/mysql/bin


Next we need to create the MySQL config file /etc/my.cnf on both nodes:

vi /etc/my.cnf


Here is the sample file:

[mysqld]
ndbcluster
# IP address of the cluster management server (Server1)
ndb-connectstring=192.168.100.1

[mysql_cluster]
# IP address of the cluster management Server (Server1)
ndb-connectstring=192.168.100.1


Our MySQL installation is almost complete, now let&#039;s create the data directories and start the MySQL Server on both nodes:


mkdir /var/lib/mysql-cluster
cd /var/lib/mysql-cluster
ndbd --initial
/etc/init.d/mysql.server start

(Important: we need to run ndbd --initial only when the start MySQL for the first time, and if /var/lib/mysql-cluster/config.ini on Management Server changes.)

MySQL installation is complete, now let&#039;s put in a root password for our MySQL Servers:

mysqladmin -u root password newrootpassword


Again, it makes sense to start up the cluster nodes automatically in case of a system restart/failure. Here are the ndbd init script and system startup links for that:

echo &#039;ndbd&#039; &#062; /etc/init.d/ndbd
chmod 755 /etc/init.d/ndbd
update-rc.d ndbd defaults 


this completes are Cluster installation process, next, now let&#039;s test it.


Test:

On Cluster Management Server, run the Cluster Management Client:

ndb_mgm

It will take you to the ndb_mgm prompt:


-- NDB Cluster -- Management Client --
ndb_mgm&#062;


Now type show on the prompt:

ndb_mgm&#062; show;


You should see an output similar to this:

ndb_mgm&#062; show;
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)] 2 node(s)
id=2 @192.168.100.2 (Version: version number, Nodegroup: 0, Master)
id=3 @192.168.100.3 (Version: version number, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1 @192.168.100.1 (Version: version number)

[mysqld(API)] 2 node(s)
id=4 @192.168.100.2 (Version: version number)
id=5 @192.168.100.3 (Version: version number)

ndb_mgm&#062;



We should see our data nodes connected in the previous screen. Now type quit to close the Management client:

ndb_mgm&#062;quit;
 
Test the Cluster: 
Now, let&#039;s create a Test database on Server2 (192.168.100.2) and run some tests:

On Server2:

mysql -u root -p
CREATE DATABASE testdb;
USE testdb;
CREATE TABLE tblCustomer (ID INT) ENGINE=NDBCLUSTER;
REPLACE INTO tblCustomer VALUES (1);
SELECT * FROM tblCustomer;
quit;

pay attention to the create table statement, we must specify ENGINE=NDBCLUSTER for all tables that we want to clustered. As stated earlier, MySQL cluster only saupports NDB engine, so if you use any other engine, table simply wont get clustered.

The result of the SELECT statement would be:

mysql&#062; SELECT * FROM tblCustomer;
+------+
&#124; ID   &#124;
+------+
&#124; 1    &#124;
+------+


Since clustering in MySQL is at the &quot;table level&quot; not at the database level, so we would have to create the database sperately on Server3 (192.168.100.3) as well, but afterwards tblCustomer would be replicated with all its data (since the engine is NDBCLUSTER):

On Server3: 

mysql -u root -p
CREATE DATABASE testdb;
USE testdb;
SELECT * FROM tblCustomer;

Now, if we insert a row of data on Server3, it should be replicated back to Server2:

REPLACE INTO tblCustomer VALUES (2);


If we run a SELECT query on Server2, here is what we should see:


mysql&#062; SELECT * FROM testtable;

+------+
&#124; ID   &#124;
+------+
&#124; 1    &#124;
&#124; 2    &#124;
+------+

Test Node shutdown:
Now run the following on Server2 to test what happens if a node goes offline:


killall ndbd

and run this command to make sure that all ndbd processes have terminated:


ps aux &#124; grep ndbd &#124; grep -iv grep


If you still see any prpcesses, run this again:

killall ndbd

Now, lets go the management server (Server1) and run the following to check the cluster status:


ndb_mgm

On the ndb_mgm console. run:

show;

it should be bring you an output simlar to the following:

ndb_mgm&#062; show;
Connected to Management Server at: localhost:1186

Cluster Configuration
---------------------

[ndbd(NDB)] 2 node(s)
id=2 (not connected, accepting connect from 192.168.100.2)
id=3 @192.168.100.3 (Version: -----, Nodegroup: 0, Master)

[ndb_mgmd(MGM)] 1 node(s)
id=1 @192.168.100.1 (Version: -----)

[mysqld(API)] 2 node(s)
id=4 @192.168.100.2 (Version: --------)
id=5 @192.168.100.3 (Version: --------)

ndb_mgm&#062;

You see, Server2 is not connected anymore.

Type quit; to leave the ndb_mgm management console. Now, let&#039;s check on Server3, if our database is still up and we can make connections to it:

mysql -u root -p
USE testdb;
SELECT * FROM tblCustomer;
quit;

It should bring up the following result set:


mysql&#062; SELECT * FROM tblCustomer;

+------+
&#124; ID   &#124;
+------+
&#124; 1    &#124;
&#124; 2    &#124;
+------+


Now, let&#039;s start MySQL on Server2 again by issuing the following command:

ndbd 


How to Restart MySQL Cluster:

In managing a produciton MySQL environment or any other transactional database environment, times come when we have to restart/shutdone our systems. So, let&#039;s see how would we shutdown our MySQL Cluster:

On Server1, open the management console:

ndb_mgm

then type:

shutdown;

it would bring up an output like this:

ndb_mgm&#062; shutdown;
Node 3: Cluster shutdown initiated
Node 2: Node shutdown completed.
2 NDB Cluster node(s) have shutdown.
NDB Cluster management server shutdown.
ndb_mgm&#062;

This means that the cluster nodes Server2 and Server3 and also the Management node (Server1) have shut down.

To leave the Management console, run:

quit;


To start the cluster management server again, run the following (on Server1, Management Server):

ndb_mgmd -f /var/lib/mysql-cluster/config.ini


and on Server2 and Server3, run the following:

ndbd

in case /var/lib/mysql-cluster/config.ini on Management Server changed, you should run the following:


ndbd --initial


You can go back to the Management node and verify if the cluster started ok, without any errors:

ndb_mgm

on the Management console run the following:

show;

This should bring up the cluster configuration.]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-411">andrew</a>.</p>
<p>hi Andrew<br />
Thanks for your quick response, i tried to configure cluster using rpm available at mysql site<br />
i used below instruction,but i am not able to do data cluster, management server shows all data nodes connected</p>
<p>can please help me if i am doing missing something, below is the config.</p>
<p>problems:<br />
1. i am not able to see data on both data nodes<br />
2. i have 2 rpms one is cluster-server &amp; another cluster- client &#8212; where to use which rpm<br />
3. do i need to setup cluster-server rpm on datanode</p>
<p>can you guide me how the rpm works &amp; how they be installed on what node..</p>
<p>Thanks </p>
<p>Server1 192.168.100.1 (Cluster Management Server)<br />
Server2 192.168.100.2 (Data Node 1)<br />
Server3 192.168.100.3 (Data Node 2)</p>
<p>First step is to install MySQL Cluster Management Server on Server1. Lets download from MySQL Cluster 6.2 from MySQL website (<a href="http://dev.mysql.com/downloads/cluster/" rel="nofollow ugc">http://dev.mysql.com/downloads/cluster/</a>). This guide is intended for Debian based systems, so we will download nonrpm package (mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz). Here are the steps to follow, to set up the MySQL Cluster Management Server (ndb_mgmd) and the cluster Management client (ndb_mgm)</p>
<p>mkdir /usr/src/mysql-mgm<br />
cd /usr/src/mysql-mgm<br />
wget pick up any mirror from MySQL&#8217;s website<br />
tar xvfz mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz<br />
cd mysql-cluster-gpl-6.2.15-linux-i686-glibc23<br />
mv bin/ndb_mgm /usr/bin<br />
mv bin/ndb_mgmd /usr/bin<br />
chmod 755 /usr/bin/ndb_mg*<br />
cd /usr/src<br />
rm -rf /usr/src/mysql-mgm</p>
<p>Next step is to create the Cluster configuration file:</p>
<p>mkdir /var/lib/mysql-cluster<br />
cd /var/lib/mysql-cluster<br />
vi config.ini </p>
<p>(I try to use nano as the text editor, just because it is much easier to use than vi.)</p>
<p>Here is the sample config file:</p>
<p>[NDBD DEFAULT]<br />
NoOfReplicas=2</p>
<p>[MYSQLD DEFAULT]</p>
<p>[NDB_MGMD DEFAULT]</p>
<p>[TCP DEFAULT]</p>
<p># Section for the cluster management node<br />
[NDB_MGMD]<br />
# IP address of the management node (server1)<br />
HostName=192.168.100.1</p>
<p># Section for the storage nodes<br />
[NDBD]<br />
# IP address of the first data node (Server2)<br />
HostName=192.168.100.2<br />
DataDir= /var/lib/mysql-cluster</p>
<p>[NDBD]<br />
# IP address of the second storage node (Server3)<br />
HostName=192.168.100.3<br />
DataDir=/var/lib/mysql-cluster</p>
<p># one [MYSQLD] per storage node<br />
[MYSQLD]<br />
[MYSQLD]</p>
<p>Now let&#8217;s start the Management Server:</p>
<p>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</p>
<p>Now, we would want to start the Management Server automatically in case of a system reboot, so we add an init script to do that:</p>
<p>echo &#8216;ndb_mgmd -f /var/lib/mysql-cluster/config.ini&#8217; &gt; /etc/init.d/ndb_mgmd<br />
chmod 755 /etc/init.d/ndb_mgmd<br />
update-rc.d ndb_mgmd defaults</p>
<p>Data Nodes Configuration (Server2 and Server3):</p>
<p>Now let&#8217;s set up the data nodes. Here are the steps to do that (do on both data nodes):</p>
<p>groupadd mysql<br />
useradd -g mysql mysql<br />
cd /usr/local/<br />
wget pick up any mirror from MySQL&#8217;s website<br />
tar xvfz mysql-cluster-gpl-6.2.15-linux-i686-glibc23.tar.gz<br />
ln -s mysql-cluster-gpl-6.2.15-linux-i686-glibc23 mysql<br />
cd mysql<br />
scripts/mysql_install_db &#8211;user=mysql<br />
chown -R root:mysql .<br />
chown -R mysql data<br />
cp support-files/mysql.server /etc/init.d/<br />
chmod 755 /etc/init.d/mysql.server<br />
update-rc.d mysql.server defaults<br />
cd /usr/local/mysql/bin<br />
mv * /usr/bin<br />
cd ../<br />
rm -fr /usr/local/mysql/bin<br />
ln -s /usr/bin /usr/local/mysql/bin</p>
<p>Next we need to create the MySQL config file /etc/my.cnf on both nodes:</p>
<p>vi /etc/my.cnf</p>
<p>Here is the sample file:</p>
<p>[mysqld]<br />
ndbcluster<br />
# IP address of the cluster management server (Server1)<br />
ndb-connectstring=192.168.100.1</p>
<p>[mysql_cluster]<br />
# IP address of the cluster management Server (Server1)<br />
ndb-connectstring=192.168.100.1</p>
<p>Our MySQL installation is almost complete, now let&#8217;s create the data directories and start the MySQL Server on both nodes:</p>
<p>mkdir /var/lib/mysql-cluster<br />
cd /var/lib/mysql-cluster<br />
ndbd &#8211;initial<br />
/etc/init.d/mysql.server start</p>
<p>(Important: we need to run ndbd &#8211;initial only when the start MySQL for the first time, and if /var/lib/mysql-cluster/config.ini on Management Server changes.)</p>
<p>MySQL installation is complete, now let&#8217;s put in a root password for our MySQL Servers:</p>
<p>mysqladmin -u root password newrootpassword</p>
<p>Again, it makes sense to start up the cluster nodes automatically in case of a system restart/failure. Here are the ndbd init script and system startup links for that:</p>
<p>echo &#8216;ndbd&#8217; &gt; /etc/init.d/ndbd<br />
chmod 755 /etc/init.d/ndbd<br />
update-rc.d ndbd defaults </p>
<p>this completes are Cluster installation process, next, now let&#8217;s test it.</p>
<p>Test:</p>
<p>On Cluster Management Server, run the Cluster Management Client:</p>
<p>ndb_mgm</p>
<p>It will take you to the ndb_mgm prompt:</p>
<p>&#8212; NDB Cluster &#8212; Management Client &#8212;<br />
ndb_mgm&gt;</p>
<p>Now type show on the prompt:</p>
<p>ndb_mgm&gt; show;</p>
<p>You should see an output similar to this:</p>
<p>ndb_mgm&gt; show;<br />
Connected to Management Server at: localhost:1186<br />
Cluster Configuration<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br />
[ndbd(NDB)] 2 node(s)<br />
id=2 @192.168.100.2 (Version: version number, Nodegroup: 0, Master)<br />
id=3 @192.168.100.3 (Version: version number, Nodegroup: 0)</p>
<p>[ndb_mgmd(MGM)] 1 node(s)<br />
id=1 @192.168.100.1 (Version: version number)</p>
<p>[mysqld(API)] 2 node(s)<br />
id=4 @192.168.100.2 (Version: version number)<br />
id=5 @192.168.100.3 (Version: version number)</p>
<p>ndb_mgm&gt;</p>
<p>We should see our data nodes connected in the previous screen. Now type quit to close the Management client:</p>
<p>ndb_mgm&gt;quit;</p>
<p>Test the Cluster:<br />
Now, let&#8217;s create a Test database on Server2 (192.168.100.2) and run some tests:</p>
<p>On Server2:</p>
<p>mysql -u root -p<br />
CREATE DATABASE testdb;<br />
USE testdb;<br />
CREATE TABLE tblCustomer (ID INT) ENGINE=NDBCLUSTER;<br />
REPLACE INTO tblCustomer VALUES (1);<br />
SELECT * FROM tblCustomer;<br />
quit;</p>
<p>pay attention to the create table statement, we must specify ENGINE=NDBCLUSTER for all tables that we want to clustered. As stated earlier, MySQL cluster only saupports NDB engine, so if you use any other engine, table simply wont get clustered.</p>
<p>The result of the SELECT statement would be:</p>
<p>mysql&gt; SELECT * FROM tblCustomer;<br />
+&#8212;&#8212;+<br />
| ID   |<br />
+&#8212;&#8212;+<br />
| 1    |<br />
+&#8212;&#8212;+</p>
<p>Since clustering in MySQL is at the &#8220;table level&#8221; not at the database level, so we would have to create the database sperately on Server3 (192.168.100.3) as well, but afterwards tblCustomer would be replicated with all its data (since the engine is NDBCLUSTER):</p>
<p>On Server3: </p>
<p>mysql -u root -p<br />
CREATE DATABASE testdb;<br />
USE testdb;<br />
SELECT * FROM tblCustomer;</p>
<p>Now, if we insert a row of data on Server3, it should be replicated back to Server2:</p>
<p>REPLACE INTO tblCustomer VALUES (2);</p>
<p>If we run a SELECT query on Server2, here is what we should see:</p>
<p>mysql&gt; SELECT * FROM testtable;</p>
<p>+&#8212;&#8212;+<br />
| ID   |<br />
+&#8212;&#8212;+<br />
| 1    |<br />
| 2    |<br />
+&#8212;&#8212;+</p>
<p>Test Node shutdown:<br />
Now run the following on Server2 to test what happens if a node goes offline:</p>
<p>killall ndbd</p>
<p>and run this command to make sure that all ndbd processes have terminated:</p>
<p>ps aux | grep ndbd | grep -iv grep</p>
<p>If you still see any prpcesses, run this again:</p>
<p>killall ndbd</p>
<p>Now, lets go the management server (Server1) and run the following to check the cluster status:</p>
<p>ndb_mgm</p>
<p>On the ndb_mgm console. run:</p>
<p>show;</p>
<p>it should be bring you an output simlar to the following:</p>
<p>ndb_mgm&gt; show;<br />
Connected to Management Server at: localhost:1186</p>
<p>Cluster Configuration<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</p>
<p>[ndbd(NDB)] 2 node(s)<br />
id=2 (not connected, accepting connect from 192.168.100.2)<br />
id=3 @192.168.100.3 (Version: &#8212;&#8211;, Nodegroup: 0, Master)</p>
<p>[ndb_mgmd(MGM)] 1 node(s)<br />
id=1 @192.168.100.1 (Version: &#8212;&#8211;)</p>
<p>[mysqld(API)] 2 node(s)<br />
id=4 @192.168.100.2 (Version: &#8212;&#8212;&#8211;)<br />
id=5 @192.168.100.3 (Version: &#8212;&#8212;&#8211;)</p>
<p>ndb_mgm&gt;</p>
<p>You see, Server2 is not connected anymore.</p>
<p>Type quit; to leave the ndb_mgm management console. Now, let&#8217;s check on Server3, if our database is still up and we can make connections to it:</p>
<p>mysql -u root -p<br />
USE testdb;<br />
SELECT * FROM tblCustomer;<br />
quit;</p>
<p>It should bring up the following result set:</p>
<p>mysql&gt; SELECT * FROM tblCustomer;</p>
<p>+&#8212;&#8212;+<br />
| ID   |<br />
+&#8212;&#8212;+<br />
| 1    |<br />
| 2    |<br />
+&#8212;&#8212;+</p>
<p>Now, let&#8217;s start MySQL on Server2 again by issuing the following command:</p>
<p>ndbd </p>
<p>How to Restart MySQL Cluster:</p>
<p>In managing a produciton MySQL environment or any other transactional database environment, times come when we have to restart/shutdone our systems. So, let&#8217;s see how would we shutdown our MySQL Cluster:</p>
<p>On Server1, open the management console:</p>
<p>ndb_mgm</p>
<p>then type:</p>
<p>shutdown;</p>
<p>it would bring up an output like this:</p>
<p>ndb_mgm&gt; shutdown;<br />
Node 3: Cluster shutdown initiated<br />
Node 2: Node shutdown completed.<br />
2 NDB Cluster node(s) have shutdown.<br />
NDB Cluster management server shutdown.<br />
ndb_mgm&gt;</p>
<p>This means that the cluster nodes Server2 and Server3 and also the Management node (Server1) have shut down.</p>
<p>To leave the Management console, run:</p>
<p>quit;</p>
<p>To start the cluster management server again, run the following (on Server1, Management Server):</p>
<p>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</p>
<p>and on Server2 and Server3, run the following:</p>
<p>ndbd</p>
<p>in case /var/lib/mysql-cluster/config.ini on Management Server changed, you should run the following:</p>
<p>ndbd &#8211;initial</p>
<p>You can go back to the Management node and verify if the cluster started ok, without any errors:</p>
<p>ndb_mgm</p>
<p>on the Management console run the following:</p>
<p>show;</p>
<p>This should bring up the cluster configuration.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: andrew		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-411</link>

		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Wed, 09 Oct 2013 10:48:23 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-411</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-410&quot;&gt;vijay&lt;/a&gt;.

Hi Vijay,

 yes it&#039;s possible to have 2 data nodes + 1 management node. If you want the solution to be fault-tolerant then make sure that each of these processes runs on a different machine. The simplest way to set this up is to use the auto-installer that&#039;s part of MySQL Cluster 7.3 - &lt;a href=&quot;./../../mysql-cluster/mysql-cluster-7-3-auto-installer/&quot;/index.html title=&quot;MySQL Cluster 7.3 Auto-Installer&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;see this blog post&lt;/a&gt;.]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-410">vijay</a>.</p>
<p>Hi Vijay,</p>
<p> yes it&#8217;s possible to have 2 data nodes + 1 management node. If you want the solution to be fault-tolerant then make sure that each of these processes runs on a different machine. The simplest way to set this up is to use the auto-installer that&#8217;s part of MySQL Cluster 7.3 &#8211; <a href="./../../mysql-cluster/mysql-cluster-7-3-auto-installer/index.html" title="MySQL Cluster 7.3 Auto-Installer" target="_blank" rel="nofollow">see this blog post</a>.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: vijay		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-410</link>

		<dc:creator><![CDATA[vijay]]></dc:creator>
		<pubDate>Wed, 09 Oct 2013 09:21:36 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-410</guid>

					<description><![CDATA[i want to implement ndb cluster with 1 managment nos=de and 2 data nodes is it possible,please share how to do it 

vijay2sachin@gmail.com]]></description>
			<content:encoded><![CDATA[<p>i want to implement ndb cluster with 1 managment nos=de and 2 data nodes is it possible,please share how to do it </p>
<p><a href="mailto:vijay2sachin@gmail.com">vijay2sachin@gmail.com</a></p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: andrew		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-409</link>

		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 07 Feb 2013 14:28:50 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-409</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-408&quot;&gt;ThomasC&lt;/a&gt;.

Hi ThomasC,

1) The data node must be able to connect to the data node in order to find the other nodes in the Cluster. Unless the data nodes are running on the same host as the management node, they must be told the connect-string for the management node (as must other nodes). The connect-string can be specified in the config file or through a command line option. I can&#039;t comment on what the ServeralNines tools do.

2) I&#039;ve not experimented with skip_name_resolve

3) I&#039;ve not experimented with memlock and can&#039;t comment on SeveralNines tools but the parameter is described at http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_memlock

4) You need a [mysqld] or [ndbapi] section for each connection to the data nodes. In the simplest case this would be 1 per mysqld but if you wanted to improve performance then you can use &quot;connection pooling&quot; to exploit multiple connections per mysqld - see http://www.mysql.com/why-mysql/white-papers/guide-to-optimizing-performance-of-the-mysql-cluster/ for details on connection pooling

5) You can use auto-increment columns for a Cluster primary key. Note that you need to make sure that the same PK isn&#039;t used by 2 different mysqlds in the  same Cluster; you can enforce that by using the an increment value &gt;1 and a different starting point on each mysqld using auto_increment_increment and auto_increment_offset.

6) It is regular MySQL functionality that the auto-increment starting point isn&#039;t set back to zero after deleting the contents of a table. Don&#039;t know if this answers everything you&#039;ve seen, if not, perhaps it&#039;s some option that&#039;s set in you config files (e.g. by the S9s tool)?

7) Could this be the client connections being shutdown when stopping or restarting mysqlds?

8) I&#039;m not familiar with ClusterControl and so can&#039;t help you with that. Oracle do of course offer MySQL subscriptions that include consultative support and so that would be away to get an expert to look at your config files.

Regards, Andrew.]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-408">ThomasC</a>.</p>
<p>Hi ThomasC,</p>
<p>1) The data node must be able to connect to the data node in order to find the other nodes in the Cluster. Unless the data nodes are running on the same host as the management node, they must be told the connect-string for the management node (as must other nodes). The connect-string can be specified in the config file or through a command line option. I can&#8217;t comment on what the ServeralNines tools do.</p>
<p>2) I&#8217;ve not experimented with skip_name_resolve</p>
<p>3) I&#8217;ve not experimented with memlock and can&#8217;t comment on SeveralNines tools but the parameter is described at <a href="http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_memlock" rel="nofollow ugc">http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_memlock</a></p>
<p>4) You need a [mysqld] or [ndbapi] section for each connection to the data nodes. In the simplest case this would be 1 per mysqld but if you wanted to improve performance then you can use &#8220;connection pooling&#8221; to exploit multiple connections per mysqld &#8211; see <a href="http://www.mysql.com/why-mysql/white-papers/guide-to-optimizing-performance-of-the-mysql-cluster/" rel="nofollow ugc">http://www.mysql.com/why-mysql/white-papers/guide-to-optimizing-performance-of-the-mysql-cluster/</a> for details on connection pooling</p>
<p>5) You can use auto-increment columns for a Cluster primary key. Note that you need to make sure that the same PK isn&#8217;t used by 2 different mysqlds in the  same Cluster; you can enforce that by using the an increment value >1 and a different starting point on each mysqld using auto_increment_increment and auto_increment_offset.</p>
<p>6) It is regular MySQL functionality that the auto-increment starting point isn&#8217;t set back to zero after deleting the contents of a table. Don&#8217;t know if this answers everything you&#8217;ve seen, if not, perhaps it&#8217;s some option that&#8217;s set in you config files (e.g. by the S9s tool)?</p>
<p>7) Could this be the client connections being shutdown when stopping or restarting mysqlds?</p>
<p>8) I&#8217;m not familiar with ClusterControl and so can&#8217;t help you with that. Oracle do of course offer MySQL subscriptions that include consultative support and so that would be away to get an expert to look at your config files.</p>
<p>Regards, Andrew.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: ThomasC		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-408</link>

		<dc:creator><![CDATA[ThomasC]]></dc:creator>
		<pubDate>Wed, 06 Feb 2013 21:42:35 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-408</guid>

					<description><![CDATA[Hi guys, 
I would like to ask you some accurate questions about cluster: 

1. 
Do you confirm that if I don&#039;t have a section like that : 
[mysql_cluster] 
ndb-connectstring=10.12.14.26,10.12.14.25 
...the data nodes don&#039;t start. I don&#039;t understand &#039;cause there is not in the generated file we can find with severalnines generator

2. You confirm that using &#039;skip_name_resolve&#039; means I must only use @IP address, &#039;cause I&#039;ve some warnings about it the logs.

3. in the generated file, I saw memlock=0 but I&#039;m not sure about its use. could you please give more informations about this parameter ?

4. concerning [MYSQLD] section, you confirm I must have as much as [MYSQLD] as &quot;connection pools&quot; ? 
if connection pools = 4 then I have 4 identical [MYSQLD] section by SQL node ? (&#039;cause I&#039;ve warning about ID allocation when starting SQL nodes)

5. now very important : is it true that using AUTOINCREMENT on PKey column is not a good idea in a cluster ? 
&#039;cause i really need an autoincrement.

6. always about autoincrement, I can&#039;t explain to me why even after emptying tables (and try to alter to set autocincrement to 1 or even with TRUNCATE TABLE (after tests)) I can&#039; retrieve ID=1 in the concerned cluster tables. To be accurate, it seems to be OK on one node, not on the second. So, if I launch my programs after emptying out the tables, I get some ID like 1 and 1025 for the first 2 records for example... 
Hope my request is clear..

7. lastly, I noticed many lines lije this one /mysqld/mysql/bin/mysqld: Forcing close of thread 66 user: &#039;root&#039; 
in the SQL nodes logs.Each line for a different thread..

8. I&#039;m usinf cluster control, so if someone is a geek and kind enough to check if he doens&#039;t see some craps in my config files, I can give the access via http to my cluster control page...It would be great !

Really sorry for bothering with this lot a questions, but I need more understanding. 

Thanks in advance.]]></description>
			<content:encoded><![CDATA[<p>Hi guys,<br />
I would like to ask you some accurate questions about cluster: </p>
<p>1.<br />
Do you confirm that if I don&#8217;t have a section like that :<br />
[mysql_cluster]<br />
ndb-connectstring=10.12.14.26,10.12.14.25<br />
&#8230;the data nodes don&#8217;t start. I don&#8217;t understand &#8217;cause there is not in the generated file we can find with severalnines generator</p>
<p>2. You confirm that using &#8216;skip_name_resolve&#8217; means I must only use @IP address, &#8217;cause I&#8217;ve some warnings about it the logs.</p>
<p>3. in the generated file, I saw memlock=0 but I&#8217;m not sure about its use. could you please give more informations about this parameter ?</p>
<p>4. concerning [MYSQLD] section, you confirm I must have as much as [MYSQLD] as &#8220;connection pools&#8221; ?<br />
if connection pools = 4 then I have 4 identical [MYSQLD] section by SQL node ? (&#8217;cause I&#8217;ve warning about ID allocation when starting SQL nodes)</p>
<p>5. now very important : is it true that using AUTOINCREMENT on PKey column is not a good idea in a cluster ?<br />
&#8217;cause i really need an autoincrement.</p>
<p>6. always about autoincrement, I can&#8217;t explain to me why even after emptying tables (and try to alter to set autocincrement to 1 or even with TRUNCATE TABLE (after tests)) I can&#8217; retrieve ID=1 in the concerned cluster tables. To be accurate, it seems to be OK on one node, not on the second. So, if I launch my programs after emptying out the tables, I get some ID like 1 and 1025 for the first 2 records for example&#8230;<br />
Hope my request is clear..</p>
<p>7. lastly, I noticed many lines lije this one /mysqld/mysql/bin/mysqld: Forcing close of thread 66 user: &#8216;root&#8217;<br />
in the SQL nodes logs.Each line for a different thread..</p>
<p>8. I&#8217;m usinf cluster control, so if someone is a geek and kind enough to check if he doens&#8217;t see some craps in my config files, I can give the access via http to my cluster control page&#8230;It would be great !</p>
<p>Really sorry for bothering with this lot a questions, but I need more understanding. </p>
<p>Thanks in advance.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: andrew		</title>
		<link>./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-407</link>

		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 08 Nov 2012 13:14:29 +0000</pubDate>
		<guid isPermaLink="false">./../../index.html?p=1125#comment-407</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-406&quot;&gt;jelramzy&lt;/a&gt;.

I posted a response to your forum question.... http://forums.mysql.com/read.php?25,573073,573162#msg-573162]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="./../download-install-configure-run-and-test-mysql-cluster-in-under-15-minutes/index.html#comment-406">jelramzy</a>.</p>
<p>I posted a response to your forum question&#8230;. <a href="http://forums.mysql.com/read.php?25,573073,573162#msg-573162" rel="nofollow ugc">http://forums.mysql.com/read.php?25,573073,573162#msg-573162</a></p>
]]></content:encoded>
		
			</item>
	</channel>
</rss>
