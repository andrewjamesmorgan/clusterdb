<!DOCTYPE html>
<!-- HTML 5 --><html lang="en-US">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="pingback" href="/xmlrpc.php">
	
	<title>September | 2021 | Andrew Morgan on Databases</title>

<meta name="robots" content="max-image-preview:large">
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="Andrew Morgan on Databases &raquo; Feed" href="/feed">
<link rel="alternate" type="application/rss+xml" title="Andrew Morgan on Databases &raquo; Comments Feed" href="/comments/feed">
		<!-- This site uses the Google Analytics by MonsterInsights plugin v9.2.2 - Using Analytics tracking - https://www.monsterinsights.com/ -->
		<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
					<!-- No tracking code set -->
				<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.clusterdb.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"🏳️‍⚧️","🏳️​⚧️")?!1:!n(e,"🇺🇳","🇺​🇳")&&!n(e,"🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴​󠁧​󠁢​󠁥​󠁮​󠁧​󠁿");case"emoji":return!n(e,"🐦‍⬛","🐦​⬛")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="plyr-css-css" href="/wp-content/plugins/easy-video-player/lib/plyr.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="zeeSynergie_stylesheet-css" href="/wp-content/themes/zeesynergie/style.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="zeeSynergie_colorscheme-css" href="/wp-content/themes/zeesynergie/includes/css/colorschemes/blue.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="themezee_default_font-css" href="http://fonts.googleapis.com/css?family=Paytone+One&#038;ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<script type="text/javascript" src="/wp-content/plugins/easy-video-player/lib/plyr.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4" id="plyr-js-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<script type="text/javascript" src="/wp-content/themes/zeesynergie/includes/js/jquery.cycle.all.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4" id="zee_jquery-cycle-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">

<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style>
<style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<script type="text/javascript">
				//<![CDATA[
					jQuery(document).ready(function($) {
						$('#nav ul').css({display: 'none'}); // Opera Fix
						$('#nav li').hover(function(){
							$(this).find('ul:first').css({visibility: 'visible',display: 'none'}).show().css({opacity:0}).animate({opacity:1},400);
						},function(){
							$(this).find('ul:first').css({visibility: 'hidden'});
						});
					});
				//]]>
				</script><style type="text/css"></style>
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="custom-background-css">body.custom-background { background-color: #89a5bf; }</style>
	<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style>
</head>

<body class="archive date custom-background">
<div id="wrapper">

	<div id="header">

		<div id="head">
			<div id="logo">
									<a href="/"><h1>Andrew Morgan on Databases</h1></a>
                                        <!-- <a href="/"><h1>MySQL Cluster, Replication, Fabric...</h1></a>  ZXZX -->					
							</div>
			<div id="socialmedia_icons">
				<a href="http://twitter.com/andrewmorgan"><img src="/wp-content/themes/zeesynergie/images/icons/twitter.png" alt="twitter"></a><a href="http://www.facebook.com/andrewjamesmorgan"><img src="/wp-content/themes/zeesynergie/images/icons/facebook.png" alt="facebook"></a><a href="https://plus.google.com/u/0/100605473697871424413/posts"><img src="/wp-content/themes/zeesynergie/images/icons/googleplus.png" alt="googleplus"></a><a href="http://www.linkedin.com/profile/view?id=16709956"><img src="/wp-content/themes/zeesynergie/images/icons/linkedin.png" alt="linkedin"></a><a href="http://www.flickr.com/photos/andrewjamesmorgan/"><img src="/wp-content/themes/zeesynergie/images/icons/flickr.png" alt="flickr"></a><a href="http://www.youtube.com/channel/UCodtDakJ4VdeSCzS3P3rIsw"><img src="/wp-content/themes/zeesynergie/images/icons/youtube.png" alt="youtube"></a>				<div class="clear"></div>
			</div>
			<div class="clear"></div>
		</div>
		
		<div id="navi_container">
			<div id="navi">
				<ul id="nav" class="menu">
<li class="page_item page-item-1011"><a href="/about">About</a></li>
</ul>			</div>
		</div>
		<div class="clear"></div>
	</div>
	
	<div id="container">
	
			<div id="custom_header">
			<img src="/wp-content/uploads/2015/06/cropped-ClusterDB-logo-header.png">
		</div>
	
	<div id="wrap">
		<div id="content">
		
		<h2 class="arh">Archive for September 30, 2021</h2>
				
					<div id="post-4639" class="post-4639 post type-post status-publish format-standard has-post-thumbnail hentry category-realm tag-ios tag-realm tag-swift tag-swiftui">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="/author/andrew" title="Posts by andrew" rel="author">andrew</a> |
		<a href="/mongodb/realm/most-useful-ios-15-swiftui-features">September 30, 2021</a>
			</div>
	<div class="postcomments">
		<a href="/mongodb/realm/most-useful-ios-15-swiftui-features#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="/mongodb/realm/most-useful-ios-15-swiftui-features" rel="bookmark">Most Useful iOS 15 SwiftUI Features</a></h2>
				
				<div class="entry">
					<img width="150" height="150" src="/wp-content/uploads/2021/09/SwiftUI-Features_ATF-150x150.png" class="alignleft wp-post-image" alt="" decoding="async" srcset="/wp-content/uploads/2021/09/SwiftUI-Features_ATF-150x150.png 150w, /wp-content/uploads/2021/09/SwiftUI-Features_ATF-300x300.png 300w, /wp-content/uploads/2021/09/SwiftUI-Features_ATF-1024x1024.png 1024w, /wp-content/uploads/2021/09/SwiftUI-Features_ATF-768x768.png 768w, /wp-content/uploads/2021/09/SwiftUI-Features_ATF-144x144.png 144w, /wp-content/uploads/2021/09/SwiftUI-Features_ATF.png 1501w" sizes="(max-width: 150px) 100vw, 150px">					<h2>Introduction</h2>
<p>I&#8217;m all-in on using SwiftUI to build iOS apps. I find it so much simpler than wrangling with storyboards and UIKit. Unfortunately, there are still occasions when SwiftUI doesn&#8217;t let you do what you need—forcing you to break out into UIKit.</p>
<p>That&#8217;s why I always focus on Apple&#8217;s SwiftUI enhancements at each year&#8217;s WWDC. And, each year I&#8217;m rewarded with a few more enhancements that make SwiftUI more powerful and easy to work with. For example, iOS14 made it much <a href="https://www.mongodb.com/developer/how-to/realm-swiftui-maps-location/">easier to work with Apple Maps</a>.</p>
<p>WWDC 2021 was no exception, introducing a raft of <a href="https://developer.apple.com/videos/play/wwdc2021/10018/">SwiftUI enhancements that were coming in iOS 15/ SwiftUI 3 / Xcode 13</a>. As iOS 15 has now been released, it feels like a good time to cover the features that I&#8217;ve found the most useful.</p>
<p>I&#8217;ve revisited some of my existing iOS apps to see how I could exploit the new iOS 15 SwiftUI features to improve the user experience and/or simplify my code base. This article steps through the features I found most interesting/useful, and how I tested them out on my apps. These are the apps/branches that I worked with:</p>
<ul>
<li><a href="https://github.com/realm/RCurrency/">RCurrency</a></li>
<li><a href="https://github.com/realm/RChat/">RChat</a></li>
<li><a href="https://github.com/mongodb-developer/LiveTutorial2021/">LiveTutorial2021</a></li>
<li><a href="https://github.com/realm/task-tracker-swiftui/">task-tracker-swiftui</a></li>
</ul>
<h2>Prerequisites</h2>
<ul>
<li>Xcode 13</li>
<li>iOS 15</li>
<li>
<a href="https://github.com/realm/realm-cocoa/releases">Realm-Cocoa</a> (varies by app, but 10.13.0+ is safe for them all)</li>
</ul>
<h2>Lists</h2>
<p>SwiftUI <code>List</code>s are pretty critical to data-based apps. I use <code>List</code>s in almost every iOS app I build, typically to represent objects stored in Realm. That&#8217;s why I always go there first when seeing what&#8217;s new.</p>
<h3>Custom Swipe Options</h3>
<p>We&#8217;ve all used mobile apps where you swipe an item to the left for one action, and to the right for another. SwiftUI had a glaring omission—the only supported action was to swipe left to delete an item.</p>
<p>This was a massive pain.</p>
<p>This limitation meant that my <a href="https://github.com/realm/task-tracker-swiftui/">task-tracker-swiftui</a> app had a cumbersome UI. You had to click on a task to expose a sheet that let you click on your preferred action.</p>
<p>With iOS 15, I can replace that popup sheet with swipe actions:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/swipe_action_b291b24533.gif" alt="iOS app showing that action buttons are revealed when swiping a list item to the left or right"></p>
<p>The swipe actions are implemented in <a href="https://github.com/realm/task-tracker-swiftui/blob/main/task-tracker-swiftui/Views/Projects%20%26%20Tasks/TasksView.swift"><code>TasksView</code></a>:</p>
<pre><code class="swift">List {
   ForEach(tasks) { task in
       TaskView(task: task)
           .swipeActions(edge: .leading) {
               if task.statusEnum == .Open || task.statusEnum == .InProgress {
                   CompleteButton(task: task)
               }
               if task.statusEnum == .Open || task.statusEnum == .Complete {
                   InProgressButton(task: task)
               }
               if task.statusEnum == .InProgress || task.statusEnum == .Complete {
                   NotStartedButton(task: task)
               }
           }
           .swipeActions(edge: .trailing) {
               Button(role: .destructive, action: { $tasks.remove(task) }) {
                   Label("Delete", systemImage: "trash")
               }
           }
   }
}
</code></pre>
<p>The role of the delete button is set to <code>.destructive</code> which automatically sets the color to red.</p>
<p>For the other actions, I created custom buttons. For example, this is the code for <a href="https://github.com/realm/task-tracker-swiftui/blob/main/task-tracker-swiftui/Views/Projects%20%26%20Tasks/Buttons/CompleteButton.swift"><code>CompleteButton</code></a>:</p>
<pre><code class="swift">struct CompleteButton: View {
   @ObservedRealmObject var task: Task

   var body: some View {
       Button(action: { $task.statusEnum.wrappedValue = .Complete }) {
           Label("Complete", systemImage: "checkmark")
       }
       .tint(.green)
   }
}
</code></pre>
<h3>Searchable Lists</h3>
<p>When you&#8217;re presented with a long list of options, it helps the user if you offer a way to filter the results.</p>
<p><a href="https://github.com/realm/RCurrency/">RCurrency</a> lets the user choose between 150 different currencies. Forcing the user to scroll through the whole list wouldn&#8217;t make for a good experience. A search bar lets them quickly jump to the items they care about:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/search_d5cdac1c86.gif" alt="Animation showing currencies being filtered as a user types into the search box"></p>
<p>The selection of the currency is implemented in the <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/SymbolPickerView.swift"><code>SymbolPickerView</code></a> view.</p>
<p>The view includes a state variable to store the <code>searchText</code> (the characters that the user has typed) and a <code>searchResults</code> computed value that uses it to filter the full list of symbols:</p>
<pre><code class="swift">struct SymbolPickerView: View {
   ...
   @State private var searchText = ""
   ...
   var searchResults: Dictionary&lt;String, String&gt; {
       if searchText.isEmpty {
           return Symbols.data.symbols
       } else {
           return Symbols.data.symbols.filter {
               $0.key.contains(searchText.uppercased()) || $0.value.contains(searchText)}
       }
   }
}
</code></pre>
<p>The <code>List</code> then loops over those <code>searchResults</code>. We add the <code>.searchable</code> modifier to add the search bar, and bind it to the <code>searchText</code> state variable:</p>
<pre><code class="swift">List {
   ForEach(searchResults.sorted(by: &lt;), id: \.key) { symbol in
       ...
   }
}
.searchable(text: $searchText)
</code></pre>
<p>This is the full view:</p>
<pre><code class="swift">struct SymbolPickerView: View {
   @Environment(\.presentationMode) var presentationMode

   var action: (String) -&gt; Void
   let existingSymbols: [String]

   @State private var searchText = ""

   var body: some View {
       List {
           ForEach(searchResults.sorted(by: &lt;), id: \.key) { symbol in
               Button(action: {
                   pickedSymbol(symbol.key)
               }) {
                   HStack {
                       Image(symbol.key.lowercased())
                       Text("\(symbol.key): \(symbol.value)")
                   }
                   .foregroundColor(existingSymbols.contains(symbol.key) ? .secondary : .primary)
               }
               .disabled(existingSymbols.contains(symbol.key))
           }
       }
       .searchable(text: $searchText)
       .navigationBarTitle("Pick Currency", displayMode: .inline)
   }

   private func pickedSymbol(_ symbol: String) {
       action(symbol)
       presentationMode.wrappedValue.dismiss()
   }

   var searchResults: Dictionary&lt;String, String&gt; {
       if searchText.isEmpty {
           return Symbols.data.symbols
       } else {
           return Symbols.data.symbols.filter {
               $0.key.contains(searchText.uppercased()) || $0.value.contains(searchText)}
       }
   }
}
</code></pre>
<h2>Pull to Refresh</h2>
<p>We&#8217;ve all used this feature in iOS apps. You&#8217;re impatiently waiting on an important email, and so you drag your thumb down the page to get the app to check the server.</p>
<p>This feature isn&#8217;t always helpful for apps that use Realm and Realm Sync. When Realm cloud data changes, the local realm is updated, and your SwiftUI view automatically refreshes to show the new data.</p>
<p>However, the feature <strong>is</strong> useful for the RCurrency app. I can use it to refresh all of the locally-stored exchange rates with fresh data from the API:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/pull_to_refresh_b37e5a81b9.gif" alt="Animation showing currencies being refreshed when the screen is dragged dowm"></p>
<p>We allow the user to trigger the refresh by adding a <code>.refreshable</code> modifier and action (<code>refreshAll</code>) to the list of currencies in <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyList/CurrencyListContainerView.swift"><code>CurrencyListContainerView</code></a>:</p>
<pre><code class="swift">List {
   ForEach(userSymbols.symbols, id: \.self) { symbol in
       CurrencyRowContainerView(baseSymbol: userSymbols.baseSymbol,
                                   baseAmount: $baseAmount,
                                   symbol: symbol,
                                   refreshNeeded: refreshNeeded)
           .listRowSeparator(.hidden)
   }
   .onDelete(perform: deleteSymbol)
}
.refreshable{ refreshAll() }
</code></pre>
<p>In that code snippet, you can see that I added the <code>.listRowSeparator(.hidden)</code> modifier to the <code>List</code>. This is another iOS 15 feature that hides the line that would otherwise be displayed between each <code>List</code> item. Not a big feature, but every little bit helps in letting us use native SwiftUI to get the exact design we want.</p>
<h2>Text</h2>
<h3>Markdown</h3>
<p>I&#8217;m a big fan of <a href="https://daringfireball.net/projects/markdown/">Markdown</a>. Markdown lets you write formatted text (including tables, links, and images) without taking your hands off the keyboard. I added this post to our CMS in markdown.</p>
<p>iOS 15 allows you to render markdown text within a <code>Text</code> view. If you pass a literal link to a <code>Text</code> view, then it&#8217;s automatically rendered correctly:</p>
<pre><code class="swift">struct MarkDownTest: View {
   var body: some View {
       Text("Let's see some **bold**, *italics* and some ***bold italic text***. ~~Strike that~~. We can even include a [link](https://realm.io).")
   }
}
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/markdown1_718e4edcae.png" alt="Text formatted. Included bold, italics and a link"></p>
<p>But, it doesn&#8217;t work out of the box for string constants or variables (e.g., data read from Realm):</p>
<pre><code class="swift">struct MarkDownTest: View {
   let myString = "Let's see some **bold**, *italics* and some ***bold italic text***. ~~Strike that~~. We can even include a [link](https://realm.io)."

   var body: some View {
       Text(myString)
   }
}
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/markdown2_be6d3e6123.png" alt="Raw Markdown source code, rather than rendered text"></p>
<p>The issue is that the version of <code>Text</code> that renders markdown expects to be passed an <code>AttributedString</code>. I created this simple <a href="https://github.com/realm/RChat/blob/main/RChat-iOS/RChat/Views/Components/MarkDown.swift"><code>Markdown</code></a> view to handle this for us:</p>
<pre><code class="swift">struct MarkDown: View {
   let text: String

   @State private var formattedText: AttributedString?

   var body: some View {
       Group {
           if let formattedText = formattedText {
               Text(formattedText)
           } else {
               Text(text)
           }
       }
       .onAppear(perform: formatText)
   }

   private func formatText() {
       do {
           try formattedText = AttributedString(markdown: text)
       } catch {
           print("Couldn't convert this from markdown: \(text)")
       }
   }
}
</code></pre>
<p>I updated the <a href="https://github.com/realm/RChat/blob/main/RChat-iOS/RChat/Views/Chat%20Messages/ChatBubbleView.swift"><code>ChatBubbleView</code></a> in RChat to use the <code>Markdown</code> view:</p>
<pre><code class="swift">if chatMessage.text != "" {
   MarkDown(text: chatMessage.text)
   .padding(Dimensions.padding)
}
</code></pre>
<p>RChat now supports markdown in user messages:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/markdown_in_R_Chat_b6d3a01409.gif" alt="Animation showing that Markdown source is converted to formated text in the RChat app"></p>
<h3>Dates</h3>
<p>We all know that working with dates can be a pain. At least in iOS 15 we get some nice new functionality to control how we display dates and times. We use the new <code>Date.formatted</code> syntax.</p>
<p>In RChat, I want the date/time information included in a chat bubble to depend on how recently the message was sent. If a message was sent less than a minute ago, then I care about the time to the nearest second. If it were sent a day ago, then I want to see the day of the week plus the hour and minutes. And so on.</p>
<p>I created a <a href="https://github.com/realm/RChat/blob/main/RChat-iOS/RChat/Views/Components/TextDate.swift"><code>TextDate</code></a> view to perform this conditional formatting:</p>
<pre><code class="swift">struct TextDate: View {
   let date: Date

   private var isLessThanOneMinute: Bool { date.timeIntervalSinceNow &gt; -60 }
   private var isLessThanOneDay: Bool { date.timeIntervalSinceNow &gt; -60 * 60 * 24 }
   private var isLessThanOneWeek: Bool { date.timeIntervalSinceNow &gt; -60 * 60 * 24 * 7}
   private var isLessThanOneYear: Bool { date.timeIntervalSinceNow &gt; -60 * 60 * 24 * 365}

   var body: some View {
       if isLessThanOneMinute {
           Text(date.formatted(.dateTime.hour().minute().second()))
       } else {
           if isLessThanOneDay {
               Text(date.formatted(.dateTime.hour().minute()))
           } else {
               if isLessThanOneWeek {
                   Text(date.formatted(.dateTime.weekday(.wide).hour().minute()))
               } else {
                   if isLessThanOneYear {
                       Text(date.formatted(.dateTime.month().day()))
                   } else {
                       Text(date.formatted(.dateTime.year().month().day()))
                   }
               }
           }
       }
   }
}
</code></pre>
<p>This preview code lets me test it&#8217;s working in the Xcode Canvas preview:</p>
<pre><code class="swift">struct TextDate_Previews: PreviewProvider {
   static var previews: some View {
       VStack {
           TextDate(date: Date(timeIntervalSinceNow: -60 * 60 * 24 * 365)) // 1 year ago
           TextDate(date: Date(timeIntervalSinceNow: -60 * 60 * 24 * 7))   // 1 week ago
           TextDate(date: Date(timeIntervalSinceNow: -60 * 60 * 24))       // 1 day ago
           TextDate(date: Date(timeIntervalSinceNow: -60 * 60))            // 1 hour ago
           TextDate(date: Date(timeIntervalSinceNow: -60))                 // 1 minute ago
           TextDate(date: Date())                                          // Now
       }
   }
}
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/dates_9f872c74b7.png" alt="Screen capture of dates rendered in various formatt"></p>
<p>We can then use <code>TextDate</code> in RChat&#8217;s <a href="https://github.com/realm/RChat/blob/main/RChat-iOS/RChat/Views/Chat%20Messages/ChatBubbleView.swift"><code>ChatBubbleView</code></a> to add context-sensitive date and time information:</p>
<pre><code class="swift">TextDate(date: chatMessage.timestamp)
   .font(.caption)
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/rchat_dates_034fae5600.png" alt="Screen capture of properly formatted dates against each chat message in the RChat app"></p>
<h2>Keyboards</h2>
<p>Customizing keyboards and form input was a real pain in the early days of SwiftUI—take a look at the work we did for the <a href="https://github.com/WildAid/o-fish-ios/tree/main/o-fish-ios/Views/Components/KeyboardControlling">WildAid O-FISH</a> app if you don&#8217;t believe me. Thankfully, iOS 15 has shown some love in this area. There are a couple of features that I could see an immediate use for&#8230;</p>
<h3>Submit Labels</h3>
<p>It&#8217;s now trivial to rename the on-screen keyboard&#8217;s &#8220;return&#8221; key. It sounds trivial, but it can give the user a big hint about what will happen if they press it.</p>
<p>To rename the return key, add a <a href="https://developer.apple.com/documentation/swiftui/form/submitlabel(_:)"><code>.submitLabel</code></a> modifier to the input field. You pass the modifier one of these values:</p>
<ul>
<li><code>done</code></li>
<li><code>go</code></li>
<li><code>send</code></li>
<li><code>join</code></li>
<li><code>route</code></li>
<li><code>search</code></li>
<li><code>return</code></li>
<li><code>next</code></li>
<li><code>continue</code></li>
</ul>
<p>I decided to use these labels to improve the login flow for the <a href="https://github.com/mongodb-developer/LiveTutorial2021">LiveTutorial2021</a> app. In <a href="https://github.com/mongodb-developer/LiveTutorial2021/blob/main/iOS/LiveChat/LiveChat/Views/LoginView.swift"><code>LoginView</code></a>, I added a <code>submitLabel</code> to both the &#8220;email address&#8221; and &#8220;password&#8221; <code>TextFields</code>:</p>
<pre><code class="swift">TextField("email address", text: $email)
   .submitLabel(.next)
SecureField("password", text: $password)
   .onSubmit(userAction)
   .submitLabel(.go)
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/email_field_6245860cb5.png" alt="Screen capture showing that the &quot;return&quot; key is replaced with &quot;next&quot; when editing the email/username field"></p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/password_field_924329af36.png" alt="Screen capture showing that the &quot;return&quot; key is replaced with &quot;go&quot; when editing the password field"></p>
<p>Note the <code>.onSubmit(userAction)</code> modifier on the password field. If the user taps &#8220;go&#8221; (or hits return on an external keyboard), then the <code>userAction</code> function is called. <code>userAction</code> either registers or logs in the user, depending on whether &#8220;Register new user” is checked.</p>
<h3>Focus</h3>
<p>It can be tedious to have to click between different fields on a form. iOS 15 makes it simple to automate that shifting focus.</p>
<p>Sticking with <a href="https://github.com/mongodb-developer/LiveTutorial2021/">LiveTutorial2021</a>, I want the &#8220;email address&#8221; field to be selected when the view opens. When the user types their address and hits ~~&#8221;return&#8221;~~ &#8220;next&#8221;, focus should move to the &#8220;password&#8221; field. When the user taps &#8220;go,&#8221; the app logs them in.</p>
<p>You can use the new <a href="https://developer.apple.com/documentation/swiftui/focusstate"><code>FocusState</code></a> SwiftUI property wrapper to create variables to represent the placement of focus in the view. It can be a boolean to flag whether the associated field is in focus. In our login view, we have two fields that we need to switch focus between and so we use the <code>enum</code> option instead.</p>
<p>In <a href="https://github.com/mongodb-developer/LiveTutorial2021/blob/main/iOS/LiveChat/LiveChat/Views/LoginView.swift"><code>LoginView</code></a>, I define the <code>Field</code> enumeration type to represent whether the username (email address) or password is in focus. I then create the <code>focussedField</code> <code>@FocusState</code> variable to store the value using the <code>Field</code> type:</p>
<pre><code class="swift">enum Field: Hashable {
   case username
   case password
}

@FocusState private var focussedField: Field?
</code></pre>
<p>I use the <code>.focussed</code> modifier to bind <code>focussedField</code> to the two fields:</p>
<pre><code class="swift">TextField("email address", text: $email)
   .focused($focussedField, equals: .username)
   ...
SecureField("password", text: $password)
    .focused($focussedField, equals: .password)
   ...
</code></pre>
<p>It&#8217;s a two-way binding. If the user selects the email field, then <code>focussedField</code> is set to <code>.username</code>. If the code sets <code>focussedField</code> to <code>.password</code>, then focus switches to the password field.</p>
<p>This next step feels like a hack, but I&#8217;ve not found a better solution yet. When the view is loaded, the code waits half a second before setting focus to the username field. Without the delay, the focus isn&#8217;t set:</p>
<pre><code class="swift">VStack(spacing: 16) {
   ...
}
.onAppear {
   DispatchQueue.main.asyncAfter(deadline: .now() + 0.5) {
       focussedField = .username
    ...
   }
}
</code></pre>
<p>The final step is to shift focus to the password field when the user hits the &#8220;next&#8221; key in the username field:</p>
<pre><code class="swift">TextField("email address", text: $email)
   .onSubmit { focussedField = .password }
   ...
</code></pre>
<p>This is the complete body from <a href="https://github.com/mongodb-developer/LiveTutorial2021/blob/main/iOS/LiveChat/LiveChat/Views/LoginView.swift"><code>LoginView</code></a>:</p>
<pre><code class="swift">var body: some View {
   VStack(spacing: 16) {
       Spacer()
       TextField("email address", text: $email)
           .focused($focussedField, equals: .username)
           .submitLabel(.next)
           .onSubmit { focussedField = .password }
       SecureField("password", text: $password)
           .focused($focussedField, equals: .password)
           .onSubmit(userAction)
           .submitLabel(.go)
       Button(action: { newUser.toggle() }) {
           HStack {
               Image(systemName: newUser ? "checkmark.square" : "square")
               Text("Register new user")
               Spacer()
           }
       }
       Button(action: userAction) {
           Text(newUser ? "Register new user" : "Log in")
       }
       .buttonStyle(.borderedProminent)
       .controlSize(.large)
       Spacer()
   }
   .onAppear {
       DispatchQueue.main.asyncAfter(deadline: .now() + 0.5) {
           focussedField = .username
       }
   }
   .padding()
}
</code></pre>
<h2>Buttons</h2>
<h3>Formatting</h3>
<p>Previously, I&#8217;ve created custom SwiftUI views to make buttons look like…. buttons.</p>
<p>Things get simpler in iOS 15.</p>
<p>In <a href="https://github.com/mongodb-developer/LiveTutorial2021/blob/main/iOS/LiveChat/LiveChat/Views/LoginView.swift"><code>LoginView</code></a>, I added two new modifiers to my register/login button:</p>
<pre><code class="swift">Button(action: userAction) {
   Text(newUser ? "Register new user" : "Log in")
}
.buttonStyle(.borderedProminent)
.controlSize(.large)
</code></pre>
<p>Before making this change, I experimented with other button styles:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/button_styles_7882dc43b7.png" alt="Xcode. Showing button source code and the associated previews"></p>
<h3>Confirmation</h3>
<p>It&#8217;s very easy to accidentally tap the &#8220;Logout&#8221; button, and so I wanted to add this confirmation dialog:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/confirm_logout_e913c93674.png" alt="Dialog for the user to confirm that they wish to log out"></p>
<p>Again, iOS 15 makes this simple.</p>
<p>This is the modified version of the <code>LogoutButton</code> view:</p>
<pre><code class="swift">struct LogoutButton: View {
   ...
   @State private var isConfirming = false

   var body: some View {
       Button("Logout") { isConfirming = true }
       .confirmationDialog("Are you sure want to logout",
                           isPresented: $isConfirming) {
           Button(action: logout) {
               Text("Confirm Logout")
           }
           Button("Cancel", role: .cancel) {}
       }
   }
   ...
}
</code></pre>
<p>These are the changes I made:</p>
<ul>
<li>Added a new state variable (<code>isConfirming</code>)</li>
<li>Changed the logout button&#8217;s action from calling the <code>logout</code> function to setting <code>isConfirming</code> to <code>true</code>
</li>
<li>Added the <a href="https://developer.apple.com/documentation/swiftui/view/confirmationdialog(_:ispresented:titlevisibility:presenting:actions:)-9ibgk"><code>confirmationDialog</code></a> modifier to the button, providing three things:
<ul>
<li>The dialog title (I didn&#8217;t override the <code>titleVisibility</code> option and so the system decides whether this should be shown)</li>
<li>A binding to <code>isConfirming</code> that controls whether the dialog is shown or not</li>
<li>A view containing the contents of the dialog:
<ul>
<li>A button to logout the user</li>
<li>A cancel button</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Material</h2>
<p>I&#8217;m no designer, and this is <em>blurring</em> the edges of what changes I consider worth adding.</p>
<p>The <a href="https://github.com/realm/RChat/">RChat</a> app may have to wait a moment while the backend MongoDB Realm application confirms that the user has been authenticated and logged in. I superimpose a progress view while that&#8217;s happening:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/busy_62dee69adb.png" alt="A semi-transparrent overlay to indicate that the apps is working on something"></p>
<p>To make it look a bit more professional, I can update <a href="https://github.com/realm/RChat/blob/ios15/RChat-iOS/RChat/Views/Components/OpaqueProgressView.swift"><code>OpaqueProgressView</code></a> to use <a href="https://developer.apple.com/documentation/swiftui/material">Material</a> to blur the content that&#8217;s behind the overlay. To get this effect, I update the background modifier for the <code>VStack</code>:</p>
<pre><code class="swift">var body: some View {
   VStack {
       if let message = message {
           ProgressView(message)
       } else {
           ProgressView()
       }
   }
   .padding(Dimensions.padding)
   .background(.ultraThinMaterial,
               in: RoundedRectangle(cornerRadius: Dimensions.cornerRadius))
}
</code></pre>
<p>The result looks like this:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/busy_material_35e6fedf53.png" alt="A semi-transparrent overlay, with the background blurred, to indicate that the apps is working on something"></p>
<h2>Developer Tools</h2>
<p>Finally, there are a couple of enhancements that are helpful during your development phase.</p>
<h3>Landscape Previews</h3>
<p>I&#8217;m a big fan of Xcode&#8217;s &#8220;Canvas&#8221; previews. Previews let you see what your view will look like. Previews update in more or less real time as you make code changes. You can even display multiple previews at once for example:</p>
<ul>
<li>For different devices: <code>.previewDevice(PreviewDevice(rawValue: "iPhone 12 Pro Max"))</code>
</li>
<li>For dark mode: <code>.preferredColorScheme(.dark)</code>
</li>
</ul>
<p>A glaring omission was that there was no way to preview landscape mode. That&#8217;s fixed in iOS 15 with the addition of the <a href="https://developer.apple.com/documentation/SwiftUI/View/previewInterfaceOrientation(_:)"><code>.previewInterfaceOrientation</code></a> modifier.</p>
<p>For example, this code will show two devices in the preview. The first will be in portrait mode. The second will be in landscape and dark mode:</p>
<pre><code class="swift">struct CurrencyRow_Previews: PreviewProvider {
   static var previews: some View {
       Group {
           List {
               CurrencyRowView(value: 3.23, symbol: "USD", baseValue: .constant(1.0))
               CurrencyRowView(value: 1.0, symbol: "GBP", baseValue: .constant(10.0))
           }
           List {
               CurrencyRowView(value: 3.23, symbol: "USD", baseValue: .constant(1.0))
               CurrencyRowView(value: 1.0, symbol: "GBP", baseValue: .constant(10.0))
           }
           .preferredColorScheme(.dark)
           .previewInterfaceOrientation(.landscapeLeft)
       }
   }
}
</code></pre>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/preview_demo_12b5116b98.gif" alt="Animation of Xcode preview. Shows that the preview updates in real time as the code is changed. There are previews for both landscape and portrait modes"></p>
<h3>Self._printChanges</h3>
<p>SwiftUI is very smart at automatically refreshing views when associated state changes. But sometimes, it can be hard to figure out exactly why a view is or isn&#8217;t being updated.</p>
<p>iOS 15 adds a way to print out what pieces of state data have triggered each refresh for a view. Simply call <code>Self._printChanges()</code> from the body of your view. For example, I updated <a href="https://github.com/mongodb-developer/LiveTutorial2021/blob/main/iOS/LiveChat/LiveChat/Views/ContentView.swift"><code>ContentView</code></a> for the LiveChat app:</p>
<pre><code class="swift">struct ContentView: View {
   @State private var username = ""

   var body: some View {
       print(Self._printChanges())
       return NavigationView {
           Group {
               if app.currentUser == nil {
                   LoginView(username: $username)
               } else {
                   ChatRoomsView(username: username)
               }
           }
           .navigationBarTitle(username, displayMode: .inline)
           .navigationBarItems(trailing: app.currentUser != nil ? LogoutButton(username: $username) : nil) }
    }
}
</code></pre>
<p>If I log in and check the Xcode console, I can see that it&#8217;s the update to <code>username</code> that triggered the refresh (rather than <code>app.currentUser</code>):</p>
<pre><code class="swift">ContentView: _username changed.
</code></pre>
<p>There can be a lot of these messages, and so remember to turn them off before going into production.</p>
<h2>Conclusion</h2>
<p>SwiftUI is developing at pace. With each iOS release, there is less and less reason to not use it for all/some of your mobile app.</p>
<p>This post describes how to use some of the iOS 15 SwiftUI features that caught my attention. I focussed on the features that I could see would instantly benefit my most recent mobile apps. In this article, I&#8217;ve shown how those apps could be updated to use these features.</p>
<p>There are lots of features that I didn&#8217;t include here. A couple of notable omissions are:</p>
<ul>
<li>
<a href="https://developer.apple.com/documentation/swiftui/asyncimage"><code>AsyncImage</code></a> is going to make it far easier to work with images that are stored in the cloud. I didn&#8217;t need it for any of my current apps, but I&#8217;ve no doubt that I&#8217;ll be using it in a project soon.</li>
<li>The <a href="https://developer.apple.com/documentation/swiftui/anyview/task(priority:_:)/"><code>task</code></a> view modifier is going to have a significant effect on how people run asynchronous code when a view is loaded. I plan to cover this in a future article that takes a more general look at how to handle concurrency with Realm.</li>
<li>Adding a toolbar to your keyboards (e.g., to let the user switch between input fields).</li>
</ul>
<p>If you have any questions or comments on this post (or anything else Realm-related), then please raise them on our <a href="https://www.mongodb.com/community/forums/c/realm-sdks/58">community forum</a>. To keep up with the latest Realm news, follow <a href="https://twitter.com/realm">@realm</a> on Twitter and join the <a href="https://live.mongodb.com/realm-global-community/">Realm global community</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url="/mongodb/realm/most-useful-ios-15-swiftui-features" data-via="wpbeginner" data-text="Most Useful iOS 15 SwiftUI Features" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href="/mongodb/realm/most-useful-ios-15-swiftui-features"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url="/mongodb/realm/most-useful-ios-15-swiftui-features" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=%2Fmongodb%2Frealm%2Fmost-useful-ios-15-swiftui-features&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowtransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="/category/mongodb/realm" rel="category tag">Realm</a> | 
Tags: <a href="/tag/ios" rel="tag">ios</a>, <a href="/tag/realm" rel="tag">Realm</a>, <a href="/tag/swift" rel="tag">Swift</a>, <a href="/tag/swiftui" rel="tag">SwiftUI</a>
</div>

			</div>			<div id="post-4633" class="post-4633 post type-post status-publish format-standard has-post-thumbnail hentry category-realm tag-realm tag-swift tag-swiftui">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="/author/andrew" title="Posts by andrew" rel="author">andrew</a> |
		<a href="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm">September 14, 2021</a>
			</div>
	<div class="postcomments">
		<a href="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm" rel="bookmark">Build Offline-First Mobile Apps by Caching API Results in Realm</a></h2>
				
				<div class="entry">
					<img width="150" height="150" src="/wp-content/uploads/2021/09/Twitter_1024x512-150x150.png" class="alignleft wp-post-image" alt="" decoding="async" srcset="/wp-content/uploads/2021/09/Twitter_1024x512-150x150.png 150w, /wp-content/uploads/2021/09/Twitter_1024x512-144x144.png 144w" sizes="(max-width: 150px) 100vw, 150px">					<p>Note that this post was originally published at <a href="https://www.mongodb.com/developer/how-to/realm-api-cache/">Build Offline-First Mobile Apps by Caching API Results in Realm</a>.</p>
<h2>Introduction</h2>
<p>When building a mobile app, there&#8217;s a good chance that you want it to pull in data from a cloud service—whether from your own or from a third party. While other technologies are growing (e.g., <a href="https://docs.mongodb.com/realm/graphql/">GraphQL</a> and <a href="https://docs.mongodb.com/realm/sync/">MongoDB Realm Sync</a>), <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST APIs</a> are still prevalent.</p>
<p>It&#8217;s easy to make a call to a REST API endpoint from your mobile app, but what happens when you lose network connectivity? What if you want to slice and dice that data after you&#8217;ve received it? How many times will your app have to fetch the same data (consuming data bandwidth and battery capacity each time)? How will your users react to a sluggish app that&#8217;s forever fetching data over the internet?</p>
<p>By caching the data from API calls in Realm, the data is always available to your app. This leads to higher availability, faster response times, and reduced network and battery consumption.</p>
<p>This article shows how the <a href="https://github.com/realm/RCurrency">RCurrency</a> mobile app fetches exchange rate data from a <a href="https://exchangerate.host/">public API</a>, and then caches it in Realm for always-on, local access.</p>
<h3>Is Using the API from Your Mobile App the Best Approach?</h3>
<p>This app only reads data through the API. Writing an offline-first app that needs to reliably update cloud data via an API is a <strong>far</strong> more complex affair. If you need to update cloud data when offline, then I&#8217;d strongly recommend you consider <a href="https://docs.mongodb.com/realm/sync/">MongoDB Realm Sync</a>.</p>
<p>Many APIs throttle your request rate or charge per request. That can lead to issues as your user base grows. A more scalable approach is to have your backend Realm app fetch the data from the API and store it in Atlas. Realm Sync then makes that data available locally on every user&#8217;s mobile device—without the need for any additional API calls.</p>
<h2>Prerequisites</h2>
<ul>
<li><a href="https://github.com/realm/realm-cocoa">Realm-Cocoa 10.13.0+</a></li>
<li>Xcode 13</li>
<li>iOS 15</li>
</ul>
<h2>The RCurrency Mobile App</h2>
<p>The <a href="https://github.com/realm/RCurrency">RCurrency</a> app is a simple exchange rate app. It&#8217;s intended for uses such as converting currencies when traveling.</p>
<p>You choose a base currency and a list of other currencies you want to convert between.</p>
<p>When opened for the first time, RCurrency uses a REST API to retrieve exchange rates, and stores the data in Realm. From that point on, the app uses the data that&#8217;s stored in Realm. Even if you force-close the app and reopen it, it uses the local data.</p>
<p>If the stored rates are older than today, the app will fetch the latest rates from the API and replace the Realm data.</p>
<p>The app supports pull-to-refresh to fetch and store the latest exchange rates from the API.</p>
<p>You can alter the amount of any currency, and the amounts for all other currencies are instantly recalculated.</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/R_Currency_demo_9820e35730.gif" alt="Animation of the RCurrency app running on an iPhone. Includes the user selecting currencies, changing amounts and observing the amounts changing for other currencies"></p>
<h2>The REST API</h2>
<p>I&#8217;m using the API provided by <a href="https://exchangerate.host/">exchangerate.host</a>. The API is a free service that provides a simple API to fetch currency exchange rates.</p>
<p>One of the reasons I picked this API is that it doesn&#8217;t require you to register and then manage access keys/tokens. It&#8217;s not rocket science to handle that complexity, but I wanted this app to focus on when to fetch data, and what to do once you receive it.</p>
<p>The app uses a single endpoint (where you can replace <code>USD</code> and <code>EUR</code> with the currencies you want to convert between):</p>
<pre><code class="js">https://api.exchangerate.host/convert?from=USD&amp;to=EUR
</code></pre>
<p>You can try <a href="https://api.exchangerate.host/convert?from=USD&amp;to=EUR">calling that endpoint directly from your browser</a>.</p>
<p>The endpoint responds with a JSON document:</p>
<pre><code class="js">{
  "motd": {
    "msg": "If you or your company use this project or like what we doing, please consider backing us so we can continue maintaining and evolving this project.",
    "url": "https://exchangerate.host/#/donate"
  },
  "success": true,
  "query": {
    "from": "USD",
    "to": "EUR",
    "amount": 1
  },
  "info": {
    "rate": 0.844542
  },
  "historical": false,
  "date": "2021-09-02",
  "result": 0.844542
}
</code></pre>
<p>Note that the exchange rate for each currency is only updated once every 24 hours. That&#8217;s fine for our app that&#8217;s helping you decide whether you can afford that baseball cap when you&#8217;re on vacation. If you&#8217;re a currency day-trader, then you should look elsewhere.</p>
<h2>The RCurrency App Implementation</h2>
<h3>Data Model</h3>
<p>JSON is the language of APIs. That&#8217;s great news as most modern programming languages (including Swift) make it super easy to convert between JSON strings and native objects.</p>
<p>The app stores the results from the API query in objects of type <code>Rate</code>. To make it as simple as possible to receive and store the results, I made the <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Model/Rate.swift"><code>Rate</code> class</a> match the JSON format of the API results:</p>
<pre><code class="swift">class Rate: Object, ObjectKeyIdentifiable, Codable {
    var motd = Motd()
    var success = false
    @Persisted var query: Query?
    var info = Info()
    @Persisted var date: String
    @Persisted var result: Double
}

class Motd: Codable {
    var msg = ""
    var url = ""
}

class Query: EmbeddedObject, ObjectKeyIdentifiable, Codable {
    @Persisted var from: String
    @Persisted var to: String
    var amount = 0
}

class Info: Codable {
    var rate = 0.0
}
</code></pre>
<p>Note that only the fields annotated with <code>@Persisted</code> will be stored in Realm.</p>
<p>Swift can automatically convert between <code>Rate</code> objects and the JSON strings returned by the API because we make the class comply with the <a href="https://developer.apple.com/documentation/swift/codable"><code>Codable</code> protocol</a>.</p>
<p>There are two other top-level classes used by the app.</p>
<p><a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Model/Symbols.swift"><code>Symbols</code></a> stores all of the supported currency symbols. In the app, the list is bootstrapped from a fixed list. For future-proofing, it would be better to fetch them from an API:</p>
<pre><code class="swift">class Symbols {
    var symbols = Dictionary&lt;String, String&gt;()
}

extension Symbols {
    static var data = Symbols()


    static func loadData() {
        data.symbols["AED"] = "United Arab Emirates Dirham"
        data.symbols["AFN"] = "Afghan Afghani"
        data.symbols["ALL"] = "Albanian Lek"
        ...
    }
}
</code></pre>
<p><code>UserSymbols</code> is used to store the user&#8217;s chosen base currency and the list of currencies they&#8217;d like to see exchange rates for:</p>
<pre><code class="swift">class UserSymbols: Object, ObjectKeyIdentifiable {
    @Persisted var baseSymbol: String
    @Persisted var symbols: List&lt;String&gt;
}
</code></pre>
<p>An instance of <code>UserSymbols</code> is stored in Realm so that the user gets the same list whenever they open the app.</p>
<h3>
<code>Rate</code> Data Lifecycle</h3>
<p>This flowchart shows how the exchange rate for a single currency (represented by the <code>symbol</code> string) is managed when the <code>CurrencyRowContainerView</code> is used to render data for that currency:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/Rendering_a_Currency_flowchart_c92433a8dc.png" alt="Flowchart showing how the app fetches data from the API and stored in in Realm. The mobile app's UI always renders what's stored in MongoDB. The following sections will describe each block in the flow diagram."></p>
<p>Note that the actual behavior is a little more subtle than the diagram suggests. SwiftUI ties the Realm data to the UI. If stage #2 finds the data in Realm, then it will immediately get displayed in the view (stage #8). The code will then make the extra checks and refresh the Realm data if needed. If and when the Realm data is updated, SwiftUI will automatically refresh the UI to render it.</p>
<p>Let&#8217;s look at each of those steps in turn.</p>
<h4>#1 <code>CurrencyContainerView</code> loaded for currency represented by <code>symbol</code>
</h4>
<p><a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyList/CurrencyListContainerView.swift"><code>CurrencyListContainerView</code></a> iterates over each of the currencies that the user has selected. For each currency, it creates a <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyItem/CurrencyRowContainerView.swift"><code>CurrencyRowContainerView</code></a> and passes in strings representing the base currency (<code>baseSymbol</code>) and the currency we want an exchange rate for (<code>symbol</code>):</p>
<pre><code class="swift">List {
   ForEach(userSymbols.symbols, id: \.self) { symbol in
       CurrencyRowContainerView(baseSymbol: userSymbols.baseSymbol,
                                   baseAmount: $baseAmount,
                                   symbol: symbol,
                                   refreshNeeded: refreshNeeded)
   }
   .onDelete(perform: deleteSymbol)
}
</code></pre>
<h4>#2 <code>rate</code> = FetchFromRealm(<code>symbol</code>)</h4>
<p><a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyItem/CurrencyRowContainerView.swift"><code>CurrencyRowContainerView</code></a> then uses the <code>@ObservedResults</code> property wrapper to query all <code>Rate</code> objects that are already stored in Realm:</p>
<pre><code class="swift">struct CurrencyRowContainerView: View {
   @ObservedResults(Rate.self) var rates
   ...
}
</code></pre>
<p>The view then filters those results to find one for the requested <code>baseSymbol</code>/<code>symbol</code> pair:</p>
<pre><code class="swift">var rate: Rate? {
   rates.filter(
       NSPredicate(format: "query.from = %@ AND query.to = %@",
                   baseSymbol, symbol)).first
}
</code></pre>
<h4>#3 <code>rate</code> found?</h4>
<p>The view checks whether <code>rate</code> is set or not (i.e., whether a matching object was found in Realm). If <code>rate</code> is set, then it&#8217;s passed to <code>CurrencyRowDataView</code> to render the details (step #8). If <code>rate</code> is <code>nil</code>, then a placeholder &#8220;Loading Data&#8230;&#8221; <code>TextView</code> is rendered, and <code>loadData</code> is called to fetch the data using the API (step #4-3):</p>
<pre><code class="swift">var body: some View {
   if let rate = rate {
       HStack {
           CurrencyRowDataView(rate: rate, baseAmount: $baseAmount, action: action)
           ...
       }
   } else {
       Text("Loading Data...")
           .onAppear(perform: loadData)
   }
}
</code></pre>
<h4>#4-3 Fetch <code>rate</code> from API — No matching object found in Realm</h4>
<p>The API URL is formed by inserting the base currency (<code>baseSymbol</code>) and the target currency (<code>symbol</code>) into a template string. <code>loadData</code> then sends the request to the API endpoint and handles the response:</p>
<pre><code class="swift">private func loadData() {
   guard let url = URL(string: "https://api.exchangerate.host/convert?from=\(baseSymbol)&amp;to=\(symbol)") else {
       print("Invalid URL")
       return
   }
   let request = URLRequest(url: url)
   print("Network request: \(url.description)")
   URLSession.shared.dataTask(with: request) { data, response, error in
       guard let data = data else {
           print("Error fetching data: \(error?.localizedDescription ?? "Unknown error")")
           return
       }
       if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
           // TODO: Step #5-3
       } else {
           print("No data received")
       }
   }
   .resume()
}
</code></pre>
<h4>#5-3 StoreInRealm(<code>rate</code>) — No matching object found in Realm</h4>
<p><code>Rate</code> objects stored in Realm are displayed in our SwiftUI views. Any data changes that impact the UI must be done on the main thread. When the API endpoint sends back results, our code receives them in a callback thread, and so we must use <code>DispatchQueue</code> to run our closure in the main thread so that we can add the resulting <code>Rate</code> object to Realm:</p>
<pre><code class="swift">if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
   DispatchQueue.main.async {
       $rates.append(decodedResponse)
   }
} else {
   print("No data received")
}
</code></pre>
<p>Notice how simple it is to convert the JSON response into a Realm <code>Rate</code> object and store it in our local realm!</p>
<h4>#6 Refresh Requested?</h4>
<p>RCurrency includes a <a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-enable-pull-to-refresh">pull-to-refresh</a> feature which will fetch fresh exchange rate data for each of the user&#8217;s currency symbols. We add the refresh functionality by appending the <code>.refreshable</code> modifier to the <code>List</code> of rates in <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyList/CurrencyListContainerView.swift"><code>CurrencyListContainerView</code></a>:</p>
<pre><code class="swift">List {
   ...
}
.refreshable(action: refreshAll)
</code></pre>
<p><code>refreshAll</code> sets the <code>refreshNeeded</code> variable to <code>true</code>, waits a second to allow SwiftUI to react to the change, and then sets it back to <code>false</code>:</p>
<pre><code class="swift">private func refreshAll() {
   refreshNeeded = true
   DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {
       refreshNeeded = false
   }
}
</code></pre>
<p><code>refreshNeeded</code> is passed to each instance of <code>CurrencyRowContainerView</code>:</p>
<pre><code class="swift">CurrencyRowContainerView(baseSymbol: userSymbols.baseSymbol,
                        baseAmount: $baseAmount,
                        symbol: symbol,
                        refreshNeeded: refreshNeeded)
</code></pre>
<p><a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyItem/CurrencyRowContainerView.swift"><code>CurrencyRowContainerView</code></a> checks <code>refreshNeeded</code>. If <code>true</code>, it displays a temporary refresh image and invokes <code>refreshData</code> (step #4-6):</p>
<pre><code class="swift">if refreshNeeded {
   Image(systemName: "arrow.clockwise.icloud")
       .onAppear(perform: refreshData)
}
</code></pre>
<h4>#4-6 Fetch <code>rate</code> from API — Refresh requested</h4>
<p><code>refreshData</code> fetches the data in exactly the same way as <code>loadData</code> in step #4-3:</p>
<pre><code class="swift">private func refreshData() {
   guard let url = URL(string: "https://api.exchangerate.host/convert?from=\(baseSymbol)&amp;to=\(symbol)") else {
       print("Invalid URL")
       return
   }
   let request = URLRequest(url: url)
   print("Network request: \(url.description)")
   URLSession.shared.dataTask(with: request) { data, response, error in
       guard let data = data else {
           print("Error fetching data: \(error?.localizedDescription ?? "Unknown error")")
           return
       }
       if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
           DispatchQueue.main.async {
               // TODO: #5-5
           }
       } else {
           print("No data received")
       }
   }
   .resume()
}
</code></pre>
<p>The difference is that in this case, there may already be a <code>Rate</code> object in Realm for this currency pair, and so the results are handled differently&#8230;</p>
<h4>#5-6 StoreInRealm(<code>rate</code>) — Refresh requested</h4>
<p>If the <code>Rate</code> object for this currency pair had been found in Realm, then we reference it with <code>existingRate</code>. <code>existingRate</code> is then updated with the API results:</p>
<pre><code class="swift">if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
   DispatchQueue.main.async {
       if let existingRate = rate {
           do {
               let realm = try Realm()
               try realm.write() {
                   guard let thawedrate = existingRate.thaw() else {
                       print("Couldn't thaw existingRate")
                       return
                   }
                   thawedrate.date = decodedResponse.date
                   thawedrate.result = decodedResponse.result
               }
           } catch {
               print("Unable to update existing rate in Realm")
           }
       }
   }
}
</code></pre>
<h4>#7 <code>rate</code> stale?</h4>
<p>The exchange rates available through the API are updated daily. The date that the rate applies to is included in the API response, and it’s stored in the Realm <code>Rate</code> object. When displaying the exchange rate data, <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyItem/CurrencyRowDataView.swift"><code>CurrencyRowDataView</code></a> invokes <code>loadData</code>:</p>
<pre><code class="swift">var body: some View {
   CurrencyRowView(value: (rate.result) * baseAmount,
                   symbol: rate.query?.to ?? "",
                   baseValue: $baseAmount,
                   action: action)
       .onAppear(perform: loadData)
}
</code></pre>
<p><code>loadData</code> checks that the existing Realm <code>Rate</code> object applies to today. If not, then it will refresh the data (stage 4-7):</p>
<pre><code class="swift">private func loadData() {
   if !rate.isToday {
       // TODO: 4-7
   }
}
</code></pre>
<p><code>isToday</code> is a <a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Model/Rate.swift"><code>Rate</code></a> method to check whether the stored data matches the current date:</p>
<pre><code class="swift">extension Rate {
   var isToday: Bool {
       let today = Date().description.prefix(10)
       return  date == today
   }
}
</code></pre>
<h4>#4-7 Fetch <code>rate</code> from API — <code>rate</code> stale</h4>
<p>By now, the code to fetch the data from the API should be familiar:</p>
<pre><code class="swift">private func loadData() {
   if !rate.isToday {
       guard let query = rate.query else {
           print("Query data is missing")
           return
       }
       guard let url = URL(string: "https://api.exchangerate.host/convert?from=\(query.from)&amp;to=\(query.to)") else {
           print("Invalid URL")
           return
       }
       let request = URLRequest(url: url)
       URLSession.shared.dataTask(with: request) { data, response, error in
           guard let data = data else {
               print("Error fetching data: \(error?.localizedDescription ?? "Unknown error")")
               return
           }
           if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
               DispatchQueue.main.async {
                   // TODO: #5.7
               }
           } else {
               print("No data received")
           }
       }
       .resume()
   }
}
</code></pre>
<h4>#5-7 StoreInRealm(<code>rate</code>) — <code>rate</code> stale</h4>
<p><code>loadData</code> copies the new <code>date</code> and exchange rate (<code>result</code>) to the stored Realm <code>Rate</code> object:</p>
<pre><code class="swift">if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
   DispatchQueue.main.async {
       $rate.date.wrappedValue = decodedResponse.date
       $rate.result.wrappedValue = decodedResponse.result
   }
}
</code></pre>
<h4>#8 View rendered with <code>rate</code>
</h4>
<p><a href="https://github.com/realm/RCurrency/blob/main/iOS-SwiftUI/RCurrency/RCurrency/Views/CurrencyItem/CurrencyRowView.swift"><code>CurrencyRowView</code></a> receives the raw exchange rate data, and the amount to convert. It’s responsible for calculating and rendering the results:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/Single_Rate_Rendered_84c0c03e6a.png" alt="Screen capture showing the row for a single currency. In this case it shows the US flag, the &quot;USD&quot; symbol and the amount (3.23...)"></p>
<p>The number shown in this view is part of a <code>TextField</code>, which the user can overwrite:</p>
<pre><code class="swift">@Binding var baseValue: Double
...
TextField("Amount", text: $amount)
   .keyboardType(.decimalPad)
   .onChange(of: amount, perform: updateValue)
   .font(.largeTitle)
</code></pre>
<p>When the user overwrites the number, the <code>onChange</code> function is called which recalculates <code>baseValue</code> (the value of the base currency that the user wants to convert):</p>
<pre><code class="swift">private func updateValue(newAmount: String) {
   guard let newValue = Double(newAmount) else {
       print("\(newAmount) cannot be converted to a Double")
       return
   }
   baseValue = newValue / rate
}
</code></pre>
<p>As <code>baseValue</code> was passed in as a binding, the new value percolates up the view hierarchy, and all of the currency values are updated. As the exchange rates are held in Realm, all of the currency values are recalculated without needing to use the API:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/change_values_fd69a8240b.gif" alt="Animation showing the app running on an iPhone. When the user changes the amount for 1 currency, the amounts for all of the others changes immediately"></p>
<h2>Conclusion</h2>
<p>REST APIs let your mobile apps act on a vast variety of cloud data. The downside is that APIs can&#8217;t help you when you don&#8217;t have access to the internet. They can also make your app seem sluggish, and your users may get frustrated when they have to wait for data to be downloaded.</p>
<p>A common solution is to use Realm to cache data from the API so that it&#8217;s always available and can be accessed locally in an instant.</p>
<p>This article has shown you a typical data lifecycle that you can reuse in your own apps. You&#8217;ve also seen how easy it is to store the JSON results from an API call in your Realm database:</p>
<pre><code class="swift">if let decodedResponse = try? JSONDecoder().decode(Rate.self, from: data) {
   DispatchQueue.main.async {
       $rates.append(decodedResponse)
   }
}
</code></pre>
<p>We&#8217;ve focussed on using a read-only API. Things get complicated very quickly when your app starts modifying data through the API. What should your app do when your device is offline?</p>
<ul>
<li>Don&#8217;t allow users to do anything that requires an update?</li>
<li>Allow local updates and maintain a list of changes that you iterate through when back online?
<ul>
<li>Will some changes you accept from the user have to be backed out once back online and you discover conflicting changes from other users?</li>
</ul>
</li>
</ul>
<p>If you need to modify data that&#8217;s accessed by other users or devices, consider <a href="https://docs.mongodb.com/realm/sync/">MongoDB Realm Sync</a> as an alternative to accessing APIs directly from your app. It will save you thousands of lines of tricky code!</p>
<p>The API you&#8217;re using may throttle access or charge per request. You can create a backend MongoDB Realm app to fetch the data from the API just once, and then use Realm Sync to handle the fan-out to all instances of your mobile app.</p>
<p>If you have any questions or comments on this post (or anything else Realm-related), then please raise them on our <a href="https://www.mongodb.com/community/forums/c/realm-sdks/58">community forum</a>. To keep up with the latest Realm news, follow <a href="https://twitter.com/realm">@realm</a> on Twitter and join the <a href="https://live.mongodb.com/realm-global-community/">Realm global community</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm" data-via="wpbeginner" data-text="Build Offline-First Mobile Apps by Caching API Results in Realm" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url="/mongodb/realm/build-offline-first-mobile-apps-by-caching-api-results-in-realm" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=%2Fmongodb%2Frealm%2Fbuild-offline-first-mobile-apps-by-caching-api-results-in-realm&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowtransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="/category/mongodb/realm" rel="category tag">Realm</a> | 
Tags: <a href="/tag/realm" rel="tag">Realm</a>, <a href="/tag/swift" rel="tag">Swift</a>, <a href="/tag/swiftui" rel="tag">SwiftUI</a>
</div>

			</div>			<div id="post-4626" class="post-4626 post type-post status-publish format-standard hentry category-mongodb category-realm tag-ios tag-swift tag-swiftui">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="/author/andrew" title="Posts by andrew" rel="author">andrew</a> |
		<a href="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production">September 2, 2021</a>
			</div>
	<div class="postcomments">
		<a href="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production" rel="bookmark">Migrating Your iOS App&#8217;s Synced Realm Schema in Production</a></h2>
				
				<div class="entry">
										<h2>Introduction</h2>
<p>In the <a href="https://www.mongodb.com/developer/how-to/realm-schema-migration">previous post in this series</a>, we saw how to migrate your Realm data when you upgraded your iOS app with a new schema. But, that only handled the data in your local, standalone Realm database. What if you&#8217;re using <a href="https://docs.mongodb.com/realm/sync/">MongoDB Realm Sync</a> to replicate your local Realm data with other instances of your mobile app and with MongoDB Atlas? That&#8217;s what this article will focus on.</p>
<p>We&#8217;ll start with the original <a href="https://www.mongodb.com/developer/how-to/building-a-mobile-chat-app-using-realm-new-way/">RChat app</a>. We&#8217;ll then extend the iOS app and backend Realm schema to add a new feature that allows chat messages to be tagged as high priority. The next (and perhaps surprisingly more complicated from a Realm perspective) upgrade is to make the <code>author</code> attribute of the existing <code>ChatMessage</code> object non-optional.</p>
<p>You can find all of the code for this post in the RChat repo under these branches:</p>
<ul>
<li><a href="https://github.com/realm/RChat">Starting point</a></li>
<li><a href="https://github.com/realm/RChat/tree/new-schema">Upgrade #1</a></li>
<li><a href="https://github.com/realm/RChat/tree/v2-schema">Upgrade #2</a></li>
</ul>
<h2>Prerequisites</h2>
<p><a href="https://github.com/realm/realm-cocoa/releases">Realm Cocoa 10.13.0</a> or later (for versions of the app that you&#8217;re upgrading <strong>to</strong>)</p>
<h2>Catch-Up — The RChat App</h2>
<p>RChat is a basic chat app:</p>
<ul>
<li>Users can register and log in using their email address and a password.</li>
<li>Users can create chat rooms and include other users in those rooms.</li>
<li>Users can post messages to a chat room (optionally including their location and photos).</li>
<li>All members of a chatroom can see messages sent to the room by themselves or other users.</li>
</ul>
<p><iframe width="600" height="340" src="https://www.youtube.com/embed/BlV9El_MJqk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<h2>Upgrade #1: Add a High-Priority Flag to Chat Messages</h2>
<p>The first update is to allow a user to tag a message as being high-priority as they post it to the chat room:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/Set_Priority_a2c8f60550.png" alt="Screenshot showing the option to click a thermometer button to tag the message as urgent"></p>
<p>That message is then highlighted with bold text and a &#8220;hot&#8221; icon in the list of chat messages:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/View_Priority_1991c9d4bf.png" alt="Screenshot showing that a high-priority message has bold text and a hot thermometer icon"></p>
<h3>Updating the Backend Realm Schema</h3>
<p>Adding a new field is an <a href="https://docs.mongodb.com/realm/sync/synced-schema-overview/">additive change</a>—meaning that you don&#8217;t need to restart sync (which would require every deployed instance of the RChat mobile app to recognize the change and start sync from scratch, potentially losing local changes).</p>
<p>We add the new <code>isHighPriority</code> bool to our Realm schema through the Realm UI:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/Update_Schema_v1_b9ff24b45c.png" alt="Screenshot from the RealmUI showing that the isHighPriority bool has been added to the schema"></p>
<p>We also make <code>isHighPriority</code> a required (non-optional field).</p>
<p>The resulting schema looks like this:</p>
<pre><code class="js">{
   "bsonType": "object",
   "properties": {
     "_id": {
       "bsonType": "string"
     },
     "author": {
       "bsonType": "string"
     },
     "image": {
       "bsonType": "object",
       "properties": {
         "_id": {
           "bsonType": "string"
         },
         "date": {
           "bsonType": "date"
         },
         "picture": {
           "bsonType": "binData"
         },
         "thumbNail": {
           "bsonType": "binData"
         }
       },
       "required": [
         "_id",
         "date"
       ],
       "title": "Photo"
     },
     "isHighPriority": {
       "bsonType": "bool"
     },
     "location": {
       "bsonType": "array",
       "items": {
         "bsonType": "double"
       }
     },
     "partition": {
       "bsonType": "string"
     },
     "text": {
       "bsonType": "string"
     },
     "timestamp": {
       "bsonType": "date"
     }
   },
   "required": [
     "_id",
     "partition",
     "text",
     "timestamp",
     "isHighPriority"
   ],
   "title": "ChatMessage"
 }
</code></pre>
<p>Note that existing versions of our iOS RChat app can continue to work with our updated backend Realm app, even though their local <code>ChatMessage</code> Realm objects don&#8217;t include the new field.</p>
<h3>Updating the iOS RChat App</h3>
<p>While existing versions of the iOS RChat app can continue to work with the updated Realm backend app, they can&#8217;t use the new <code>isHighPriority</code> field as it isn&#8217;t part of the <code>ChatMessage</code> object.</p>
<p>To add the new feature, we need to update the mobile app after deploying the updated Realm backend application.</p>
<p>The first change is to add the <code>isHighPriority</code> field to the <code>ChatMessage</code> class:</p>
<pre><code class="swift">class ChatMessage: Object, ObjectKeyIdentifiable {
   @Persisted(primaryKey: true) var _id = UUID().uuidString
   @Persisted var partition = "" // "conversation=&lt;conversation-id&gt;"
   @Persisted var author: String? // username
   @Persisted var text = ""
   @Persisted var image: Photo?
   @Persisted var location = List&lt;Double&gt;()
   @Persisted var timestamp = Date()
   @Persisted var isHighPriority = false
   ...
}
</code></pre>
<p>As seen in the <a href="https://www.mongodb.com/developer/how-to/realm-schema-migration">previous post in this series</a>, Realm can automatically update the local realm to include this new attribute and initialize it to <code>false</code>. Unlike with standalone realms, we **don&#8217;t*- need to signal to the Realm SDK that we&#8217;ve updated the schema by providing a schema version.</p>
<p>The new version of the app will happily exchange messages with instances of the original app on other devices (via our updated backend Realm app).</p>
<h2>Upgrade #2: Make <code>author</code> a Non-Optional Chat Message field</h2>
<p>When the initial version of RChat was written, the <code>author</code> field of <code>ChatMessage</code> was declared as being optional. We&#8217;ve since realized that there are no scenarios where we wouldn&#8217;t want the author included in a chat message. To make sure that no existing or future client apps neglect to include the author, we need to update our schema to make <code>author</code> a required field.</p>
<p>Unfortunately, changing a field from optional to required (or vice versa) is a <a href="https://docs.mongodb.com/realm/sync/synced-schema-overview/#destructive-changes">destructive change</a>, and so would break sync for any deployed instances of the RChat app.</p>
<p>Oops!</p>
<p>This means that there&#8217;s extra work needed to make the upgrade seamless for the end users. We&#8217;ll go through the process now.</p>
<h3>Updating the Backend Realm Schema</h3>
<p>The change we need to make to the schema is destructive. This means that the new document schema is incompatible with the schema that&#8217;s currently being used in our mobile app.</p>
<p>If RChat wasn&#8217;t already deployed on the devices of hundreds of millions of users (we can dream!), then we could update the Realm schema for the <code>ChatMessage</code> collection and restart Realm Sync. During development, we can simply remove the original RChat mobile app and then install an updated version on our test devices.</p>
<p>To avoid that trauma for our end users, we leave the <code>ChatMessage</code> collection&#8217;s schema as is and create a <a href="https://docs.mongodb.com/realm/sync/migrate-schema-partner-collection/#partner-collections">partner collection</a>. The partner collection (<code>ChatMessageV2</code>) will contain the same data as <code>ChatMessage</code>, except that its schema makes <code>author</code> a required field.</p>
<p>These are the steps we&#8217;ll go through to create the partner collection:</p>
<ul>
<li>Define a Realm schema for the <code>ChatMessageV2</code> collection.</li>
<li>Run an <a href="https://docs.mongodb.com/manual/aggregation/">aggregation</a> to copy all of the documents from <code>ChatMessage</code> to <code>ChatMessageV2</code>. If <code>author</code> is missing from a <code>ChatMessage</code> document, then the aggregation will add it.</li>
<li>Add a trigger to the <code>ChatMessage</code> collection to propagate any changes to <code>ChatMessageV2</code> (adding <code>author</code> if needed).</li>
<li>Add a trigger to the <code>ChatMessageV2</code> collection to propagate any changes to <code>ChatMessage</code>.</li>
</ul>
<h4>Define the Schema for the Partner Collection</h4>
<p>From the Realm UI, copy the schema from the <code>ChatMessage</code> collection.</p>
<p>Click the button to create a new schema:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/add_collection_c16ec9a063.png" alt="Showing a plus button in the Realm UI to add a new collection"></p>
<p>Set the database and collection name before clicking &#8220;Add Collection&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/config_collection_324bc0182e.png" alt="Setting the database and collection names in the Realm UI"></p>
<p>Paste in the schema copied from <code>ChatMessage</code>, add <code>author</code> to the <code>required</code> section, change the <code>title</code> to <code>ChatMessageV2</code>, and the click the &#8220;SAVE&#8221; button:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/define_schema_be6ae7c555.png" alt="Adding &quot;author&quot; to the required attribute list and naming the class ChatMessageV2 in the Realm UI"></p>
<p>This is the resulting schema:</p>
<pre><code class="js">{
   "bsonType": "object",
   "properties": {
     "_id": {
       "bsonType": "string"
     },
     "author": {
       "bsonType": "string"
     },
     "image": {
       "bsonType": "object",
       "properties": {
         "_id": {
           "bsonType": "string"
         },
         "date": {
           "bsonType": "date"
         },
         "picture": {
           "bsonType": "binData"
         },
         "thumbNail": {
           "bsonType": "binData"
         }
       },
       "required": [
         "_id",
         "date"
       ],
       "title": "Photo"
     },
     "isHighPriority": {
       "bsonType": "bool"
     },
     "location": {
       "bsonType": "array",
       "items": {
         "bsonType": "double"
       }
     },
     "partition": {
       "bsonType": "string"
     },
     "text": {
       "bsonType": "string"
     },
     "timestamp": {
       "bsonType": "date"
     }
   },
   "required": [
     "_id",
     "partition",
     "text",
     "timestamp",
     "isHighPriority",
     "author"
   ],
   "title": "ChatMessageV2"
 }
</code></pre>
<h4>Copy Existing Data to the Partner Collection</h4>
<p>We&#8217;re going to use an <a href="https://docs.mongodb.com/manual/aggregation/">aggregation pipeline</a> to copy and transform the existing data from the original collection (<code>ChatMessage</code>) to the partner collection (<code>ChatMessageV2</code>).</p>
<p>You may want to pause sync just before you run the aggregation, and then unpause it after you enable the trigger on the <code>ChatMessage</code> collection in the next step:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/pause_sync_707605a511.png" alt="Pressing a button to pause Realm sync in the Realm UI"></p>
<p>The end users can continue to create new messages while sync is paused, but those messages won&#8217;t be published to other users until sync is resumed. By pausing sync, you can ensure that all new messages will make it into the partner collection (and so be visible to users running the new version of the mobile app).</p>
<p>If pausing sync is too much of an inconvenience, then you could create a temporary trigger on the <code>ChatMessage</code> collection that will copy and transform document inserts to the <code>ChatMessageV2</code> collection (it&#8217;s a subset of the <code>ChatMessageProp</code> trigger we&#8217;ll define in the next section.).</p>
<p>From the Atlas UI, select &#8220;Collections&#8221; -> &#8220;ChatMessage&#8221;, &#8220;New Pipeline From Text&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/add_aggregation_2e84c4a8df.png" alt="Navigating through &quot;Atlas/ChatMessage/Collections/New Pipeline from Text&quot; in the Realm UI"></p>
<p>Paste in this aggregation pipeline and click the &#8220;Create New&#8221; button:</p>
<pre><code class="js">[
 {
   '$addFields': {
     'author': {
       '$convert': {
         'input': '$author',
         'to': 'string',
         'onError': 'unknown',
         'onNull': 'unknown'
       }
     }
   }
 },
 {
   '$merge': {
     into: "ChatMessageV2",
     on: "_id",
     whenMatched: "replace",
     whenNotMatched: "insert"
   }
 }
]
</code></pre>
<p>This aggregation will take each <code>ChatMessage</code> document, set <code>author</code> to &#8220;unknown&#8221; if it&#8217;s not already set, and then add it to the <code>ChatMessageV2</code> collection.</p>
<p>Click &#8220;MERGE DOCUMENTS&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/merge_documents_8b40ae6ce6.png" alt="Clicking the &quot;Merge Documents&quot; button in the Realm UI"></p>
<p><code>ChatMessageV2</code> now contains a (possibly transformed) copy of every document from <code>ChatMessage</code>. But, changes to one collection won&#8217;t be propagated to the other. To address that, we add a database trigger to each collection…</p>
<h4>Add Database Triggers</h4>
<p>We need to create two <a href="https://docs.mongodb.com/realm/functions/">Realm Functions</a>—one to copy/transfer documents to <code>ChatMessageV2</code>, and one to copy documents to <code>ChatMessage</code>.</p>
<p>From the &#8220;Functions&#8221; section of the Realm UI, click &#8220;Create New Function&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/new_function_3fd3b90a11.png" alt="Clicking the &quot;Create New Function&quot; button in the Realm UI"></p>
<p>Name the function <code>copyToChatMessageV2</code>. Set the authentication method to &#8220;System&#8221;—this will circumvent any access permissions on the <code>ChatMessageV2</code> collection. Ensure that the &#8220;Private&#8221; switch is turned on—that means that the function can be called from a trigger, but not directly from a frontend app. Click &#8220;Save&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/configure_function_6acb29f42b.png" alt="Set the name to &quot;copyToChatMessageV2&quot;, authentication to &quot;System&quot; and &quot;Private&quot; to &quot;On&quot;. Then click the &quot;Save&quot; button in the Realm UI"></p>
<p>Paste this code into the function editor and save:</p>
<pre><code class="js">exports = function (changeEvent) {
   const db = context.services.get("mongodb-atlas").db("RChat");


   if (changeEvent.operationType === "delete") {
     return db.collection("ChatMessageV2").deleteOne({ _id: changeEvent.documentKey._id });
   }


   const author = changeEvent.fullDocument.author ? changeEvent.fullDocument.author : "Unknown";
   const pipeline = [
     { $match: { _id: changeEvent.documentKey._id } },
     {
       $addFields: {
         author: author,
       }
     },
     { $merge: "ChatMessageV2" }];


   return db.collection("ChatMessage").aggregate(pipeline);
};
</code></pre>
<p>This function will receive a <code>ChatMessage</code> document from our trigger. If the operation that triggered the function is a delete, then this function deletes the matching document from <code>ChatMessageV2</code>. Otherwise, the function either copies <code>author</code> from the incoming document or sets it to &#8220;Unknown&#8221; before writing the transformed document to <code>ChatMessageV2</code>. We could initialize <code>author</code> to any string, but I&#8217;ve used &#8220;Unknown&#8221; to tell the user that we don&#8217;t know who the author was.</p>
<p>Create the <code>copyToChatMessage</code> function in the same way:</p>
<pre><code class="js">exports = function (changeEvent) {
   const db = context.services.get("mongodb-atlas").db("RChat");


   if (changeEvent.operationType === "delete") {
     return db.collection("ChatMessage").deleteOne({ _id: changeEvent.documentKey._id })
   }
    const pipeline = [
     { $match: { _id: changeEvent.documentKey._id } },
     { $merge: "ChatMessage" }]
   return db.collection("ChatMessageV2").aggregate(pipeline);
};
</code></pre>
<p>The final change needed to the backend Realm application is to add database triggers that invoke these functions.</p>
<p>From the &#8220;Triggers&#8221; section of the Realm UI, click &#8220;Add a Trigger&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/configure_trigger_558a629423.png" alt="Click the &quot;Add a Trigger&quot; button in the Realm UI"></p>
<p>Configure the <code>ChatMessageProp</code> trigger as shown:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/trigger_settings_1601e02011.png" alt="In the Realm UI, set &quot;Trigger Type&quot; to &quot;Database&quot;. Set &quot;Name&quot; to &quot;ChatMessageProp&quot;. Enabled = On. Event Ordering = on. Cluster Name = Cluster 0. Database name = RChat. Collection name = ChatMessage. Check all operation types. Full Document = on. Document Preimage = off. Event Type = Function. Function = copyToChatMessageV2"></p>
<p>Repeat for <code>ChatMessageV2Change</code>:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/trigger2_settings_c55de55738.png" alt="In the Realm UI, set &quot;Trigger Type&quot; to &quot;Database&quot;. Set &quot;Name&quot; to &quot;ChatMessageProp&quot;. Enabled = On. Event Ordering = on. Cluster Name = Cluster 0. Database name = RChat. Collection name = ChatMessage. Check all operation types. Full Document = off. Document Preimage = off. Event Type = Function. Function = copyToChatMessage"></p>
<p>If you paused sync in the previous section, then you can now unpause it.</p>
<h3>Updating the iOS RChat App</h3>
<p>We want to ensure that users still running the old version of the app can continue to exchange messages with users running the latest version.</p>
<p>Existing versions of RChat will continue to work. They will create <code>ChatMessage</code> objects which will get synced to the <code>ChatMessage</code> Atlas collection. The database triggers will then copy/transform the document to the <code>ChatMessageV2</code> collection.</p>
<p>We now need to create a new version of the app that works with documents from the <code>ChatMessageV2</code> collection. We&#8217;ll cover that in this section.</p>
<p>Recall that we set <code>title</code> to <code>ChatMessageV2</code> in the partner collection&#8217;s schema. That means that to sync with that collection, we need to rename the <code>ChatMessage</code> class to <code>ChatMessageV2</code> in the iOS app.</p>
<p>Changing the name of the class throughout the app is made trivial by Xcode.</p>
<p>Open <code>ChatMessage.swift</code> and right-click on the class name (<code>ChatMessage</code>), select &#8220;Refactor&#8221; and then &#8220;Rename…&#8221;:</p>
<p><img decoding="async" src="https://mongodb-devhub-cms.s3.us-west-1.amazonaws.com/refactor1_4c2d938e3d.png" alt="In Xcode, select the &quot;ChatMessage&quot; class name, right-click and select &quot;Refactor -> Rename&#8230;&quot;&#8221; /></p>
<p>Override the class name with <code>ChatMessageV2</code> and click &#8220;Rename&#8221;:</p>
<p><img decoding=" async></p>
<p>The final step is to make the author field mandatory. Remove the ? from the author attribute to make it non-optional:</p>
<pre><code class="swift">class ChatMessageV2: Object, ObjectKeyIdentifiable {
   @Persisted(primaryKey: true) var _id = UUID().uuidString
   @Persisted var partition = "" // "conversation=&lt;conversation-id&gt;"
   @Persisted var author: String
   ...
}
</code></pre>
<h2>Conclusion</h2>
<p>Modifying a Realm schema is a little more complicated when you&#8217;re using Realm Sync for a deployed app. You&#8217;ll have end users who are using older versions of the schema, and those apps need to continue to work.</p>
<p>Fortunately, the most common schema changes (adding or removing fields) are additive. They simply require updates to the back end and iOS schema.</p>
<p>Things get a little trickier for destructive changes, such as changing the type or optionality of an existing field. For these cases, you need to create and maintain a partner collection to avoid loss of data or service for your users.</p>
<p>This article has stepped through how to handle both additive and destructive schema changes, allowing you to add new features or fix issues in your apps without impacting users running older versions of your app.</p>
<p>Remember, you can find all of the code for this post in the RChat repo under these branches:</p>
<ul>
<li><a href="https://github.com/realm/RChat">Starting point</a></li>
<li><a href="https://github.com/realm/RChat/tree/new-schema">Upgrade #1</a></li>
<li><a href="https://github.com/realm/RChat/tree/v2-schema">Upgrade #2</a></li>
</ul>
<p>If you&#8217;re looking to upgrade the Realm schema for an iOS app that <strong>isn&#8217;t</strong> using Realm Sync, then refer to the <a href="https://www.mongodb.com/developer/how-to/realm-schema-migration">previous post in this series</a>.</p>
<p>If you have any questions or comments on this post (or anything else Realm-related), then please raise them on our <a href="https://www.mongodb.com/community/forums/c/realm-sdks/58">community forum</a>. To keep up with the latest Realm news, follow <a href="https://twitter.com/realm">@realm</a> on Twitter and join the <a href="https://live.mongodb.com/realm-global-community/">Realm global community</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production" data-via="wpbeginner" data-text="Migrating Your iOS App&#8217;s Synced Realm Schema in Production" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url="/mongodb/migrating-your-ios-apps-synced-realm-schema-in-production" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=%2Fmongodb%2Fmigrating-your-ios-apps-synced-realm-schema-in-production&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowtransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="/category/mongodb" rel="category tag">MongoDB</a>, <a href="/category/mongodb/realm" rel="category tag">Realm</a> | 
Tags: <a href="/tag/ios" rel="tag">ios</a>, <a href="/tag/swift" rel="tag">Swift</a>, <a href="/tag/swiftui" rel="tag">SwiftUI</a>
</div>

			</div>      
							<div class="more_posts">
					<span class="post_links"> &nbsp; </span>
				</div>
						

					
	</div>
		
		
<div id="sidebar">
	<ul>

<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form></li>

		<li id="recent-posts-2" class="widget widget_recent_entries">
		<h2 class="widgettitle">Recent Posts</h2>

		<ul>
											<li>
					<a href="/mongodb/building-a-collaborative-ios-minesweeper-game-with-realm">Building a collaborative iOS Minesweeper game with Realm</a>
									</li>
											<li>
					<a href="/mongodb/using-realm-flexible-sync-in-your-app-an-ios-tutorial">Using Realm Flexible Sync in Your App—an iOS Tutorial</a>
									</li>
											<li>
					<a href="/mongodb/realm-swift-type-projections">Realm-Swift Type Projections</a>
									</li>
											<li>
					<a href="/mongodb/introducing-flexible-sync-preview-the-next-iteration-of-realm-sync">Introducing Flexible Sync (Preview) – The Next Iteration of Realm Sync</a>
									</li>
											<li>
					<a href="/mongodb/goodbye-nspredicate-hello-realm-swift-query-api">Goodbye NSPredicate, hello Realm Swift Query API</a>
									</li>
					</ul>

		</li>
<li id="text-2" class="widget widget_text">			<div class="textwidget">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-5257306915232759";
/* Clusterdb-home */
google_ad_slot = "1624229680";
google_ad_width = 200;
google_ad_height =600;
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments">
<h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments">
<li class="recentcomments">
<span class="comment-author-link"><a href="http://mikael.ronstrom@blogspot.com/" class="url" rel="ugc external nofollow">Mikael Ronström</a></span> on <a href="/mysql-cluster/mysql-cluster-running-on-raspberry-pi#comment-787242">MySQL Cluster running on Raspberry Pi</a>
</li>
<li class="recentcomments">
<span class="comment-author-link">andrew</span> on <a href="/mysql-cluster/setting-up-mysql-asynchronous-replication-for-high-availability#comment-668717">Setting up MySQL Asynchronous Replication for High Availability</a>
</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="http://www.suksesonline.com/" class="url" rel="ugc external nofollow">Betty</a></span> on <a href="/mysql-cluster/setting-up-mysql-asynchronous-replication-for-high-availability#comment-668713">Setting up MySQL Asynchronous Replication for High Availability</a>
</li>
<li class="recentcomments">
<span class="comment-author-link">Sai Krishnan</span> on <a href="/mysql-cluster/get-mysql-replication-up-and-running-in-5-minutes#comment-661143">Get MySQL Replication up and running in 5 minutes</a>
</li>
<li class="recentcomments">
<span class="comment-author-link">Nayan</span> on <a href="/mysql-cluster/get-mysql-replication-up-and-running-in-5-minutes#comment-660628">Get MySQL Replication up and running in 5 minutes</a>
</li>
</ul>
</li>
<li id="categories-2" class="widget widget_categories">
<h2 class="widgettitle">Categories</h2>

			<ul>
					<li class="cat-item cat-item-2">
<a href="/category/me">Me</a>
</li>
	<li class="cat-item cat-item-146">
<a href="/category/mongodb">MongoDB</a>
</li>
	<li class="cat-item cat-item-3">
<a href="/category/mysql">MySQL</a>
</li>
	<li class="cat-item cat-item-4">
<a href="/category/mysql-cluster">MySQL Cluster</a>
</li>
	<li class="cat-item cat-item-131">
<a href="/category/mysql-fabric">MySQL Fabric</a>
</li>
	<li class="cat-item cat-item-5">
<a href="/category/mysql-replication">MySQL Replication</a>
</li>
	<li class="cat-item cat-item-214">
<a href="/category/mongodb/realm">Realm</a>
</li>
	<li class="cat-item cat-item-1">
<a href="/category/uncategorized">Uncategorized</a>
</li>
			</ul>

			</li>
<li id="tag_cloud-2" class="widget widget_tag_cloud">
<h2 class="widgettitle">Tags</h2>
<div class="tagcloud">
<a href="/tag/7-4" class="tag-cloud-link tag-link-137 tag-link-position-1" style="font-size: 9.0632911392405pt;" aria-label="7.4 (7 items)">7.4</a>
<a href="/tag/apache-kafka" class="tag-cloud-link tag-link-169 tag-link-position-2" style="font-size: 8.620253164557pt;" aria-label="Apache Kafka (6 items)">Apache Kafka</a>
<a href="/tag/cluster" class="tag-cloud-link tag-link-18 tag-link-position-3" style="font-size: 8.620253164557pt;" aria-label="Cluster (6 items)">Cluster</a>
<a href="/tag/ha" class="tag-cloud-link tag-link-41 tag-link-position-4" style="font-size: 15.354430379747pt;" aria-label="HA (40 items)">HA</a>
<a href="/tag/high-availability" class="tag-cloud-link tag-link-43 tag-link-position-5" style="font-size: 15.26582278481pt;" aria-label="High Availability (39 items)">High Availability</a>
<a href="/tag/ios" class="tag-cloud-link tag-link-215 tag-link-position-6" style="font-size: 10.658227848101pt;" aria-label="ios (11 items)">ios</a>
<a href="/tag/java" class="tag-cloud-link tag-link-47 tag-link-position-7" style="font-size: 8.620253164557pt;" aria-label="Java (6 items)">Java</a>
<a href="/tag/javascript" class="tag-cloud-link tag-link-48 tag-link-position-8" style="font-size: 10.303797468354pt;" aria-label="javascript (10 items)">javascript</a>
<a href="/tag/mcm" class="tag-cloud-link tag-link-56 tag-link-position-9" style="font-size: 8pt;" aria-label="MCM (5 items)">MCM</a>
<a href="/tag/mean" class="tag-cloud-link tag-link-186 tag-link-position-10" style="font-size: 8pt;" aria-label="MEAN (5 items)">MEAN</a>
<a href="/tag/memcached" class="tag-cloud-link tag-link-57 tag-link-position-11" style="font-size: 8pt;" aria-label="Memcached (5 items)">Memcached</a>
<a href="/tag/mobile" class="tag-cloud-link tag-link-211 tag-link-position-12" style="font-size: 8pt;" aria-label="mobile (5 items)">mobile</a>
<a href="/tag/mongodb" class="tag-cloud-link tag-link-150 tag-link-position-13" style="font-size: 16.417721518987pt;" aria-label="mongodb (53 items)">mongodb</a>
<a href="/tag/mongodb-3-2" class="tag-cloud-link tag-link-153 tag-link-position-14" style="font-size: 8pt;" aria-label="MongoDB 3.2 (5 items)">MongoDB 3.2</a>
<a href="/tag/mongodb-atlas" class="tag-cloud-link tag-link-163 tag-link-position-15" style="font-size: 9.0632911392405pt;" aria-label="MongoDB Atlas (7 items)">MongoDB Atlas</a>
<a href="/tag/mongodb-mobile" class="tag-cloud-link tag-link-212 tag-link-position-16" style="font-size: 8pt;" aria-label="MongoDB Mobile (5 items)">MongoDB Mobile</a>
<a href="/tag/mongodb-stitch" class="tag-cloud-link tag-link-204 tag-link-position-17" style="font-size: 12.253164556962pt;" aria-label="MongoDB Stitch (17 items)">MongoDB Stitch</a>
<a href="/tag/mysql" class="tag-cloud-link tag-link-147 tag-link-position-18" style="font-size: 22pt;" aria-label="MySQL (229 items)">MySQL</a>
<a href="/tag/mysql-5-6" class="tag-cloud-link tag-link-64 tag-link-position-19" style="font-size: 10.924050632911pt;" aria-label="MySQL 5.6 (12 items)">MySQL 5.6</a>
<a href="/tag/mysql-cluster" class="tag-cloud-link tag-link-148 tag-link-position-20" style="font-size: 21.46835443038pt;" aria-label="MySQL Cluster (198 items)">MySQL Cluster</a>
<a href="/tag/mysql-cluster-70" class="tag-cloud-link tag-link-69 tag-link-position-21" style="font-size: 13.936708860759pt;" aria-label="MySQL Cluster 7.0 (27 items)">MySQL Cluster 7.0</a>
<a href="/tag/mysql-cluster-7-1" class="tag-cloud-link tag-link-70 tag-link-position-22" style="font-size: 15.177215189873pt;" aria-label="MySQL Cluster 7.1 (38 items)">MySQL Cluster 7.1</a>
<a href="/tag/mysql-cluster-7-2" class="tag-cloud-link tag-link-71 tag-link-position-23" style="font-size: 14.556962025316pt;" aria-label="MySQL Cluster 7.2 (32 items)">MySQL Cluster 7.2</a>
<a href="/tag/mysql-cluster-7-3" class="tag-cloud-link tag-link-72 tag-link-position-24" style="font-size: 12.253164556962pt;" aria-label="MySQL Cluster 7.3 (17 items)">MySQL Cluster 7.3</a>
<a href="/tag/mysql-cluster-7-4" class="tag-cloud-link tag-link-134 tag-link-position-25" style="font-size: 11.278481012658pt;" aria-label="MySQL Cluster 7.4 (13 items)">MySQL Cluster 7.4</a>
<a href="/tag/mysql-cluster-cge" class="tag-cloud-link tag-link-73 tag-link-position-26" style="font-size: 17.569620253165pt;" aria-label="MySQL Cluster CGE (72 items)">MySQL Cluster CGE</a>
<a href="/tag/mysql-cluster-manager" class="tag-cloud-link tag-link-74 tag-link-position-27" style="font-size: 12.607594936709pt;" aria-label="MySQL Cluster Manager (19 items)">MySQL Cluster Manager</a>
<a href="/tag/mysql-enterprise-monitor" class="tag-cloud-link tag-link-76 tag-link-position-28" style="font-size: 9.0632911392405pt;" aria-label="MySQL Enterprise Monitor (7 items)">MySQL Enterprise Monitor</a>
<a href="/tag/mysql-fabric-2" class="tag-cloud-link tag-link-132 tag-link-position-29" style="font-size: 9.0632911392405pt;" aria-label="mysql fabric (7 items)">mysql fabric</a>
<a href="/tag/mysql-replication" class="tag-cloud-link tag-link-149 tag-link-position-30" style="font-size: 15.354430379747pt;" aria-label="MySQL Replication (40 items)">MySQL Replication</a>
<a href="/tag/mysql-utilities" class="tag-cloud-link tag-link-78 tag-link-position-31" style="font-size: 8pt;" aria-label="MySQL Utilities (5 items)">MySQL Utilities</a>
<a href="/tag/ndb-api" class="tag-cloud-link tag-link-80 tag-link-position-32" style="font-size: 10.303797468354pt;" aria-label="NDB API (10 items)">NDB API</a>
<a href="/tag/node-js" class="tag-cloud-link tag-link-83 tag-link-position-33" style="font-size: 10.303797468354pt;" aria-label="node.js (10 items)">node.js</a>
<a href="/tag/nosql" class="tag-cloud-link tag-link-84 tag-link-position-34" style="font-size: 12.784810126582pt;" aria-label="NoSQL (20 items)">NoSQL</a>
<a href="/tag/performance" class="tag-cloud-link tag-link-97 tag-link-position-35" style="font-size: 9.9493670886076pt;" aria-label="Performance (9 items)">Performance</a>
<a href="/tag/realm" class="tag-cloud-link tag-link-213 tag-link-position-36" style="font-size: 11.721518987342pt;" aria-label="Realm (15 items)">Realm</a>
<a href="/tag/replication" class="tag-cloud-link tag-link-104 tag-link-position-37" style="font-size: 10.924050632911pt;" aria-label="Replication (12 items)">Replication</a>
<a href="/tag/secondary" class="tag-cloud-link tag-link-138 tag-link-position-38" style="font-size: 11.278481012658pt;" aria-label="secondary (13 items)">secondary</a>
<a href="/tag/serverless" class="tag-cloud-link tag-link-208 tag-link-position-39" style="font-size: 8.620253164557pt;" aria-label="serverless (6 items)">serverless</a>
<a href="/tag/sharding" class="tag-cloud-link tag-link-129 tag-link-position-40" style="font-size: 8pt;" aria-label="sharding (5 items)">sharding</a>
<a href="/tag/swift" class="tag-cloud-link tag-link-216 tag-link-position-41" style="font-size: 10.303797468354pt;" aria-label="Swift (10 items)">Swift</a>
<a href="/tag/swiftui" class="tag-cloud-link tag-link-217 tag-link-position-42" style="font-size: 10.303797468354pt;" aria-label="SwiftUI (10 items)">SwiftUI</a>
<a href="/tag/webcast" class="tag-cloud-link tag-link-124 tag-link-position-43" style="font-size: 8pt;" aria-label="Webcast (5 items)">Webcast</a>
<a href="/tag/webinar" class="tag-cloud-link tag-link-125 tag-link-position-44" style="font-size: 12.430379746835pt;" aria-label="webinar (18 items)">webinar</a>
<a href="/tag/windows" class="tag-cloud-link tag-link-127 tag-link-position-45" style="font-size: 9.0632911392405pt;" aria-label="Windows (7 items)">Windows</a>
</div>
</li>
<li id="theme_socialmedia-2" class="widget theme_socialmedia">			<div class="widget-social-icons">
				
			<a href="http://twitter.com/andrewmorgan"><img src="/wp-content/themes/zeesynergie/images/icons/twitter.png" alt="twitter"></a><a href="http://www.facebook.com/andrewjamesmorgan"><img src="/wp-content/themes/zeesynergie/images/icons/facebook.png" alt="facebook"></a><a href="https://plus.google.com/u/0/100605473697871424413/posts"><img src="/wp-content/themes/zeesynergie/images/icons/googleplus.png" alt="googleplus"></a><a href="http://www.linkedin.com/profile/view?id=16709956"><img src="/wp-content/themes/zeesynergie/images/icons/linkedin.png" alt="linkedin"></a><a href="http://www.flickr.com/photos/andrewjamesmorgan/"><img src="/wp-content/themes/zeesynergie/images/icons/flickr.png" alt="flickr"></a><a href="http://www.youtube.com/channel/UCodtDakJ4VdeSCzS3P3rIsw"><img src="/wp-content/themes/zeesynergie/images/icons/youtube.png" alt="youtube"></a>			</div>
		</li>
<li id="archives-2" class="widget widget_archive">
<h2 class="widgettitle">Archives</h2>

			<ul>
					<li><a href="/2022/03">March 2022</a></li>
	<li><a href="/2022/02">February 2022</a></li>
	<li><a href="/2022/01">January 2022</a></li>
	<li><a href="/2021/12">December 2021</a></li>
	<li><a href="/2021/11">November 2021</a></li>
	<li><a href="/2021/09" aria-current="page">September 2021</a></li>
	<li><a href="/2021/08">August 2021</a></li>
	<li><a href="/2021/07">July 2021</a></li>
	<li><a href="/2021/06">June 2021</a></li>
	<li><a href="/2021/05">May 2021</a></li>
	<li><a href="/2021/04">April 2021</a></li>
	<li><a href="/2021/02">February 2021</a></li>
	<li><a href="/2021/01">January 2021</a></li>
	<li><a href="/2020/12">December 2020</a></li>
	<li><a href="/2019/03">March 2019</a></li>
	<li><a href="/2019/01">January 2019</a></li>
	<li><a href="/2018/12">December 2018</a></li>
	<li><a href="/2018/11">November 2018</a></li>
	<li><a href="/2018/10">October 2018</a></li>
	<li><a href="/2018/09">September 2018</a></li>
	<li><a href="/2017/09">September 2017</a></li>
	<li><a href="/2017/03">March 2017</a></li>
	<li><a href="/2017/02">February 2017</a></li>
	<li><a href="/2017/01">January 2017</a></li>
	<li><a href="/2016/12">December 2016</a></li>
	<li><a href="/2016/11">November 2016</a></li>
	<li><a href="/2016/09">September 2016</a></li>
	<li><a href="/2016/01">January 2016</a></li>
	<li><a href="/2015/11">November 2015</a></li>
	<li><a href="/2015/10">October 2015</a></li>
	<li><a href="/2015/09">September 2015</a></li>
	<li><a href="/2015/06">June 2015</a></li>
	<li><a href="/2015/04">April 2015</a></li>
	<li><a href="/2015/03">March 2015</a></li>
	<li><a href="/2015/02">February 2015</a></li>
	<li><a href="/2015/01">January 2015</a></li>
	<li><a href="/2014/12">December 2014</a></li>
	<li><a href="/2014/11">November 2014</a></li>
	<li><a href="/2014/10">October 2014</a></li>
	<li><a href="/2014/09">September 2014</a></li>
	<li><a href="/2014/08">August 2014</a></li>
	<li><a href="/2014/07">July 2014</a></li>
	<li><a href="/2014/06">June 2014</a></li>
	<li><a href="/2014/05">May 2014</a></li>
	<li><a href="/2014/04">April 2014</a></li>
	<li><a href="/2014/03">March 2014</a></li>
	<li><a href="/2014/02">February 2014</a></li>
	<li><a href="/2014/01">January 2014</a></li>
	<li><a href="/2013/12">December 2013</a></li>
	<li><a href="/2013/11">November 2013</a></li>
	<li><a href="/2013/09">September 2013</a></li>
	<li><a href="/2013/08">August 2013</a></li>
	<li><a href="/2013/07">July 2013</a></li>
	<li><a href="/2013/06">June 2013</a></li>
	<li><a href="/2013/05">May 2013</a></li>
	<li><a href="/2013/03">March 2013</a></li>
	<li><a href="/2013/02">February 2013</a></li>
	<li><a href="/2013/01">January 2013</a></li>
	<li><a href="/2012/12">December 2012</a></li>
	<li><a href="/2012/11">November 2012</a></li>
	<li><a href="/2012/09">September 2012</a></li>
	<li><a href="/2012/07">July 2012</a></li>
	<li><a href="/2012/06">June 2012</a></li>
	<li><a href="/2012/05">May 2012</a></li>
	<li><a href="/2012/04">April 2012</a></li>
	<li><a href="/2012/03">March 2012</a></li>
	<li><a href="/2012/02">February 2012</a></li>
	<li><a href="/2012/01">January 2012</a></li>
	<li><a href="/2011/12">December 2011</a></li>
	<li><a href="/2011/11">November 2011</a></li>
	<li><a href="/2011/10">October 2011</a></li>
	<li><a href="/2011/09">September 2011</a></li>
	<li><a href="/2011/07">July 2011</a></li>
	<li><a href="/2011/06">June 2011</a></li>
	<li><a href="/2011/05">May 2011</a></li>
	<li><a href="/2011/04">April 2011</a></li>
	<li><a href="/2011/03">March 2011</a></li>
	<li><a href="/2011/02">February 2011</a></li>
	<li><a href="/2011/01">January 2011</a></li>
	<li><a href="/2010/12">December 2010</a></li>
	<li><a href="/2010/11">November 2010</a></li>
	<li><a href="/2010/10">October 2010</a></li>
	<li><a href="/2010/09">September 2010</a></li>
	<li><a href="/2010/08">August 2010</a></li>
	<li><a href="/2010/07">July 2010</a></li>
	<li><a href="/2010/06">June 2010</a></li>
	<li><a href="/2010/05">May 2010</a></li>
	<li><a href="/2010/04">April 2010</a></li>
	<li><a href="/2010/03">March 2010</a></li>
	<li><a href="/2010/02">February 2010</a></li>
	<li><a href="/2010/01">January 2010</a></li>
	<li><a href="/2009/12">December 2009</a></li>
	<li><a href="/2009/11">November 2009</a></li>
	<li><a href="/2009/10">October 2009</a></li>
	<li><a href="/2009/09">September 2009</a></li>
	<li><a href="/2009/08">August 2009</a></li>
	<li><a href="/2009/07">July 2009</a></li>
	<li><a href="/2009/06">June 2009</a></li>
	<li><a href="/2009/05">May 2009</a></li>
	<li><a href="/2009/04">April 2009</a></li>
			</ul>

			</li>
	
	</ul>
</div>	</div>
	
	</div>
	<div id="footer">
		<div id="foot">
			Supported by <a href="http://www.thievesgarden.co.uk/" title="Maidenhead Accommodation - self catering apartment to rent" target="Thieves Garden">Thieves Garden - Maidenhead self catering apartment</a> and <a href="http://www.oleronvilla.com/" title="Ile d'Oleron Holiday Home to rent" target="Oleron Villa">Oleron Villa holiday home on Ile d'Oleron</a>.			<div class="credit_link">	<a href="http://themezee.com/">Theme by ThemeZee</a>
</div>
			<div class="clear"></div>
		</div>
	</div>
</div>
	<!-- Powered by WPtouch: 4.3.39 -->
</body>
</html>