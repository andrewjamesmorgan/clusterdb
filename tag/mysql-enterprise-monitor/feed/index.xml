<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>MySQL Enterprise Monitor &#8211; Andrew Morgan on Databases</title>
	<atom:link href="./feed/index.html" rel="self" type="application/rss+xml" />
	<link>./../../index.html</link>
	<description>Database technologies - especially around scalability and High Availability</description>
	<lastBuildDate>Tue, 15 Nov 2011 08:16:20 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	
	<item>
		<title>Setting per-server threshold in MySQL Enterprise Monitor</title>
		<link>./../../mysql/setting-per-server-threshold-in-mysql-enterprise-monitor/index.html</link>
					<comments>./../../mysql/setting-per-server-threshold-in-mysql-enterprise-monitor/index.html#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Tue, 15 Nov 2011 08:16:20 +0000</pubDate>
				<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<guid isPermaLink="false">./../../index.html?p=2105</guid>

					<description><![CDATA[I was speaking with a MySQL customer last week and he had a feature request for MEM. He wants different servers to have different threshold values for certain MEM advisor rules and suggests that users be allowed to override the thresholds when scheduling the rule against a server &#8211; just as you can with the]]></description>
										<content:encoded><![CDATA[<p>I was speaking with a MySQL customer last week and he had a feature request for MEM. He wants different servers to have different threshold values for certain MEM advisor rules and suggests that users be allowed to override the thresholds when scheduling the rule against a server &#8211; just as you can with the refresh interval. At the moment they work around this by creating multiple duplicates of the same rule and then set different thresholds in each. This is a good feature request but in the mean-time this post explains an alternate workaround &#8211; having the rules act on thresholds that are defined within the databases of the individual serves.</p>
<h3>Step 1. Create a new threshold table in each MySQL Server</h3>
<p>The table should be created and then a row added for each rule that needs a per-server threshold:</p>
<pre style="padding-left: 30px;"><span style="color: #003366;">mysql&gt; create database clusterdb;use clusterdb;
mysql&gt; CREATE TABLE thresholds (name VARCHAR(50) NOT NULL PRIMARY KEY, 
       scale_percentage INT);
mysql&gt; REPLACE INTO thresholds VALUES ('connect_usage_excessive',50);</span></pre>
<p>The scale_percentage value will be used in the new MEM rule as a scaling factor for the info, warning and critical threshold levels.<br />
Note that if using MySQL Cluster then you have the option as to whether each MySQL Server in the Cluster has its own set of thresholds (create the table with the InnoDB storage engine) or if they share the same thresholds (create the table with the ndbcluster storage engine).</p>
<h3>Step 2. Add custom data collector(s)</h3>
<p>First of all, check that you have permissions to edit the custom.xml file &#8211; on Windows this will be stored in a location such as C:Program FilesMySQLEnterpriseAgentsharemysql-monitor-agentitems<br />
<div id="attachment_2108" style="width: 507px" class="wp-caption alignnone"><a href="./../../wp-content/uploads/2011/11/custom_xml_permissions.png"><img fetchpriority="high" decoding="async" aria-describedby="caption-attachment-2108" src="./../../wp-content/uploads/2011/11/custom_xml_permissions.png" alt="" title="custom_xml_permissions" width="497" height="579" class="size-full wp-image-2108" /></a><p id="caption-attachment-2108" class="wp-caption-text">Change permissions for custom.xml if needed</p></div><br />
For each rule that needs a variable threshold, add a new class:</p>
<pre style="padding-left: 30px;"><span style="color: #003366;">&lt;class&gt;
     &lt;namespace&gt;mysql&lt;/namespace&gt;
     &lt;classname&gt;connection_usage_excessive&lt;/classname&gt;
     &lt;query&gt;&lt;![CDATA[SELECT scale_percentage AS 
         connection_usage_excessive_scale_percentage
         FROM clusterdb.thresholds 
         WHERE name='connect_usage_excessive']]&gt;&lt;/query&gt;
     &lt;attributes&gt;
          &lt;default counter="false" type="INTEGER"/&gt;
     &lt;attribute name="connection_usage_excessive_scale_percentage"/&gt;
     &lt;/attributes&gt;
&lt;/class&gt;
</span></pre>
<p>This custom.xml files should be copied to every server. For this data collector to be picked up by MEM, simply restart the agent(s).</p>
<h3>Step 3. Copy and extend the rule</h3>
<p>From the &#8220;Advisors/Manage Rules&#8221; tab of the MEM browser click on the copy icon next to the rule you want to apply per-server thresholds to and then edit that rule.<br />
<div id="attachment_2107" style="width: 546px" class="wp-caption alignnone"><a href="./../../wp-content/uploads/2011/11/Copy_rule.png"><img decoding="async" aria-describedby="caption-attachment-2107" src="./../../wp-content/uploads/2011/11/Copy_rule.png" alt="" title="Copy_rule" width="536" height="278" class="size-full wp-image-2107" /></a><p id="caption-attachment-2107" class="wp-caption-text">Create a copy of the advisor rule</p></div><br />
When editing the rule, add a new variable &#8220;%threshold_scale%&#8221; which uses the new data collector you&#8217;ve just created and then in the expression apply that as a percentage to factor the threshold.<br />
<div id="attachment_2109" style="width: 610px" class="wp-caption alignnone"><a href="./../../wp-content/uploads/2011/11/edit_rule.png"><img decoding="async" aria-describedby="caption-attachment-2109" src="./../../wp-content/uploads/2011/11/edit_rule.png" alt="" title="edit_rule" width="600" class="size-full wp-image-2109" /></a><p id="caption-attachment-2109" class="wp-caption-text">Apply the threshold scaler within the rule</p></div></p>
<h3>Step 4. Schedule the rule</h3>
<p>You can now go ahead and schedule this rule against each of the servers &#8211; and the threshold will automatically be scaled appropriately for each server.<br />
<div id="attachment_2110" style="width: 610px" class="wp-caption alignnone"><a href="./../../wp-content/uploads/2011/11/schedule_rule.png"><img decoding="async" aria-describedby="caption-attachment-2110" src="./../../wp-content/uploads/2011/11/schedule_rule.png" alt="" title="schedule_rule" width="600"  class="size-full wp-image-2110" /></a><p id="caption-attachment-2110" class="wp-caption-text">Schedule new rule against each server</p></div></p>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql/setting-per-server-threshold-in-mysql-enterprise-monitor/feed/index.html</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>Further MySQL Cluster additions to MySQL Enterprise Monitor</title>
		<link>./../../mysql-cluster/further-mysql-cluster-additions-to-mysql-enterprise-monitor/index.html</link>
					<comments>./../../mysql-cluster/further-mysql-cluster-additions-to-mysql-enterprise-monitor/index.html#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Mon, 17 Oct 2011 15:19:47 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.1]]></category>
		<category><![CDATA[MySQL Cluster 7.2]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<guid isPermaLink="false">./../../index.html?p=2086</guid>

					<description><![CDATA[About 11 months ago I described the MySQL Cluster functionality that was added to MySQL Enterprise Monitor 2.3; this new post is intended to just bring this up to date &#8211; briefly describing the new graph and advisors which have been added since then (up to and including MEM 2.3.7). Cluster Data Node Has Been]]></description>
										<content:encoded><![CDATA[<div id="attachment_2087" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2011/10/Data_Node_Restarted_alert.jpg"><img decoding="async" aria-describedby="caption-attachment-2087" class="size-medium wp-image-2087" title="Data_Node_Restarted_alert" src="./../../wp-content/uploads/2011/10/Data_Node_Restarted_alert-300x285.jpg" alt="" width="300" height="285" /></a><p id="caption-attachment-2087" class="wp-caption-text">Data Node Restarted alert</p></div>
<p>About 11 months ago I described the <a href="./../../mysql-cluster/monitoring-mysql-cluster-with-mysql-enterprise-monitor/index.html" target="_blank">MySQL Cluster functionality that was added to MySQL Enterprise Monitor 2.3</a>; this new post is intended to just bring this up to date &#8211; briefly describing the new graph and advisors which have been added since then (up to and including MEM 2.3.7).</p>
<h3>Cluster Data Node Has Been Restarted</h3>
<p>This new alert flags when a data node has been restarted (by default it alerts on any data node that has started in the last 10 minutes but you can change that interval if you wish). If you manually perform a restart (e.g. as part of a rolling upgrade) then you can safely ignore this alert (or you may even want to temporarily unschedule it first). However if the restart was spontaneous then this can be an early warning for you to take a look at the error logs and address any issues before the situation worsens.</p>
<h3>Cluster DiskPageBuffer Hit Ratio Is Low (&amp; associated graph)</h3>
<p>The Disk Page Buffer is a cache on each data node which is used when using disk-based tables. Like any cache, the higher the hit rate the better the performance. Tuning the size of this cache can have a significant effect on your system &#8211; the new graph helps you see the results of your changes and the alert warns you when the ration falls below an acceptable level (this could happen for example temporarily after a data node restart or permanently when the active data set grows).</p>
<p>The ndbinfo database has a new table &#8220;diskpagebuffer&#8221; which contains the raw information needed to calculate the cache hit ration and it is the source of the data for the new alert and graph. If you wanted to calculate the cache hit ratio for yourself directly from this table then you can use the following query:</p>
<pre><span style="color: #003366;">mysql&gt; SELECT node_id, page_requests_direct_return AS hit, </span>
<span style="color: #003366;"> page_requests_wait_io AS miss,  100*page_requests_direct_return/</span>
<span style="color: #003366;"> (page_requests_direct_return+page_requests_wait_io) AS hit_rate 
  FROM ndbinfo.diskpagebuffer;</span></pre>
<pre><span style="color: #003366;">
+---------+------+------+----------+
| node_id | hit  | miss | hit_rate |
+---------+------+------+----------+
| 3       | 6    | 3    | 66.6667  |
| 4       | 10   | 3    | 76.9231  |
+---------+------+------+----------+</span></pre>
<p>The alert is first raised (info level) when the hit rate falls bellow 97%, the warning level is raised at 90% and the critical level at 80%. Again, you can alter any of these thresholds.</p>
<p>The new graph simply displays how the hit rate varies over time so that you can spot trends.</p>
<p>As a reminder you can get more information on the <a href="./../../mysql-cluster/monitoring-mysql-cluster-with-mysql-enterprise-monitor/index.html" target="_blank">original set of alerts and graphs here</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql-cluster/further-mysql-cluster-additions-to-mysql-enterprise-monitor/feed/index.html</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>On-demand-webinar &#8211; What&#8217;s New in Managing MySQL Cluster</title>
		<link>./../../mysql-cluster/upcoming-webinar-whats-new-in-managing-mysql-cluster/index.html</link>
					<comments>./../../mysql-cluster/upcoming-webinar-whats-new-in-managing-mysql-cluster/index.html#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Fri, 14 Jan 2011 09:57:54 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.0]]></category>
		<category><![CDATA[MySQL Cluster 7.1]]></category>
		<category><![CDATA[MySQL Cluster Manager]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<category><![CDATA[ndbinfo]]></category>
		<guid isPermaLink="false">./../../index.html?p=1458</guid>

					<description><![CDATA[The recording of this webinar is now available to view on-line here. There will be a live webinar on Wednesday January 12 describing the new ways that you can manage MySQL Cluster (with a bit of monitoring thrown in). As always, the webinar is free but you need to register here. The event is scheduled]]></description>
										<content:encoded><![CDATA[<p><img loading="lazy" decoding="async" class="alignright size-full wp-image-919" title="mysql-cluster-logo-150x105" src="./../../wp-content/uploads/2010/02/mysql-cluster-logo-150x105.png" alt="" width="150" height="105" /></p>
<p>The recording of this webinar is now available to <a href="cluster2Lecluster" target="_blank">view on-line here</a>.</p>
<p>There will be a live webinar on Wednesday January 12 describing the new ways that you can manage MySQL Cluster (with a bit of monitoring thrown in). As always, the webinar is free but you need to <a href="http://www.mysql.com/news-and-events/web-seminars/display-599.html" target="_blank">register here</a>. The event is scheduled for 09:00 Pacific / 17:00 UK / 18:00 Central European time but if you can&#8217;t make the live webinar it&#8217;s still worth registering so that you&#8217;re emailed the replay after the event.</p>
<p>By their very nature, clustered environments involve more effort and resource to administer than standalone systems, and the same is true of MySQL Cluster, the database designed for web-scale throughput with carrier-grade availability.</p>
<p>In this webinar, we will present an overview of the three latest enhancements to provisioning, monitoring and managing MySQL Cluster &#8211; collectively serving to lower costs, enhance agility and reduce the risk of downtime caused by manual configuration errors.</p>
<p>In this webinar, we will present:</p>
<ul>
<li><strong>NDBINFO</strong>: released with MySQL Cluster 7.1, NDBINFO presents real-time status and usage statistics, providing developers and DBAs with a simple means of pro-actively monitoring and optimizing database performance and availability.</li>
<li><strong>MySQL Cluster Manager</strong>: available as part of the commercial MySQL Cluster Carrier Grade Edition simplifies the creation and management of MySQL Cluster by automating common management tasks, delivering higher administration productivity and enhancing cluster agility. Tasks that used to take 46 commands can be reduced to just one!</li>
<li><strong>MySQL Cluster Advisors &amp; Graphs</strong>: part of the MySQL Enterprise Monitor and available in the commercial MySQL Cluster Carrier Grade Edition, the Enterprise Advisor includes automated best practice rules that alert on key performance and availability metrics from MySQL Cluster data nodes.</li>
</ul>
<p>You will also learn how you can get started evaluating and using all of these tools to simplify MySQL Cluster management.</p>
<p>This session will be approximately 1 hour in length and will include interactive Q&amp;A throughout. Please join us for this informative webinar!</p>
<h4>WHO:</h4>
<ul>
<li><strong>Andrew Morgan</strong>, MySQL Cluster Product Management, Oracle</li>
<li><strong>Mat Keep</strong>, MySQL Cluster Product Management, Oracle</li>
</ul>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql-cluster/upcoming-webinar-whats-new-in-managing-mysql-cluster/feed/index.html</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Monitoring MySQL Cluster with MySQL Enterprise Monitor</title>
		<link>./../../mysql-cluster/monitoring-mysql-cluster-with-mysql-enterprise-monitor/index.html</link>
					<comments>./../../mysql-cluster/monitoring-mysql-cluster-with-mysql-enterprise-monitor/index.html#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Mon, 08 Nov 2010 15:34:50 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.1]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<category><![CDATA[ndbinfo]]></category>
		<guid isPermaLink="false">./../../index.html?p=1382</guid>

					<description><![CDATA[A few months ago, I posted a walkthrough of how to extend MySQL Enterprise Monitor in order to monitor MySQL Cluster. The great news is that as of MySQL Enterprise Monitor 2.3 (available from Oracle E-Delivery since 1st November) this functionality is included in the core product and so there is no need to add the]]></description>
										<content:encoded><![CDATA[<div id="attachment_1385" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_2_3.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1385" class="size-medium wp-image-1385" title="MEM_2_3" src="./../../wp-content/uploads/2010/11/MEM_2_3-300x160.jpg" alt="" width="300" height="160" /></a><p id="caption-attachment-1385" class="wp-caption-text">MySQL Enterprise Monitor with MySQL Cluster</p></div>
<p>A few months ago, I posted a<a href="./../../mysql-cluster/configure-mysql-enterprise-monitor-to-monitor-mysql-cluster/index.html" target="_blank"> walkthrough of how to extend MySQL Enterprise Monitor in order to monitor MySQL Cluster</a>. The great news is that as of MySQL Enterprise Monitor 2.3 (available from <a href="http://edelivery.oracle.com/" target="_blank">Oracle E-Delivery</a> since 1st November) this functionality is included in the core product and so there is no need to add the extra features in manually. Of course, that post might still be of interest if you want to further extend MySQL Enterprise Monitor.</p>
<p>This post briefly steps through the new (Cluster-specific) functionality but if you&#8217;re interested, why not try it for yourself and download the new MySQL Enterprise Monitor software from <a href="http://edelivery.oracle.com/" target="_blank">Oracle E-Delivery</a>. If you like what you see then the good news is that if you take out a subscription for MySQL Cluster CGE (or buy a license) then this now also entitles you to use MySQL Enterprise Monitor.</p>
<p>There are two main aspects that have been extended to cover MySQL Cluster:</p>
<ul>
<li>A new MySQL Cluster Advisor has been added. This Advisor is made up of a set of rules that check various aspects of the data nodes and raise alerts if a configurable threshold is exceeded</li>
<li>A set of new graphs have been added so that you can monitor the usage of key resources over time.</li>
</ul>
<p>Note that MySQL Enterprise Monitor has no direct connection to the data nodes and so one or more of the MySQL Servers from the Cluster is effectively used as a proxy. There is nothing special for you to configure on the servers, behind the scenes, Enterprise Monitor is reading the contents of the ndbinfo database that was introduced in MySQL Cluster 7.1.</p>
<p>If using an older version of MySQL Cluster then you get less benefit from MySQL Enterprise Monitor but there is still some value in using it to monitor the MySQL Servers that are part of the cluster:</p>
<ul>
<li>Use the Query Analyzer to keep track of how your applications access the database and troubleshoot performance issues</li>
<li>Monitor the state of the MySQL Server itself (number of client connections, CPU usage etc.)</li>
<li>Generate alerts when data nodes are out of service.</li>
</ul>
<div id="attachment_1388" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_schedule.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1388" class="size-medium wp-image-1388" title="MEM_schedule" src="./../../wp-content/uploads/2010/11/MEM_schedule-300x259.jpg" alt="" width="300" height="259" /></a><p id="caption-attachment-1388" class="wp-caption-text">Schedule Cluster Rules Against the Servers</p></div>
<p>There is <a href="http://dev.mysql.com/doc/mysql-monitor/2.3/en/mem-install.html" target="_blank">documentation covering installing and running the MySQL Enterprise Monitor service manager and agents</a> and so I won&#8217;t repeat the steps here except to point out that you need one or more of the agents to be configured to monitor one or more of the MySQL Servers in your Cluster. Of course, you could monitor multiple MySQL Cluster deployments from the same dashboard &#8211; just make sure that you have an agent monitoring at least one MySQL Server from each one.</p>
<p>By default, none of the rules from the MySQL Cluster Advisor are scheduled against any of your servers and so the first thing you need to do is go to the &#8220;Advisors&#8221; tab and from their select &#8220;Add to Schedule&#8221;. Select the server(s) on the left and then check the radio button(s) against the whole Cluster advisor or against one or more of the rules within it and click the &#8220;schedule&#8221; button. You&#8217;ll then be given the option to override the default frequency that each rule is run before confirming the activation (scheduling) of the rule(s) for your server(s). This is also the point where you can indicate whether or not an SNMP Trap should be raised when the alert is raised/cleared (the destinations for the SNMP notifications can be set under the &#8220;Settings&#8221; tab).</p>
<div id="attachment_1389" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_schedule_error.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1389" class="size-medium wp-image-1389" title="MEM_schedule_error" src="./../../wp-content/uploads/2010/11/MEM_schedule_error-300x259.jpg" alt="" width="300" height="259" /></a><p id="caption-attachment-1389" class="wp-caption-text">Error scheduling rules against wrong version of MySQL Server</p></div>
<p>Note that if you try scheduling the Cluster Advisor rules against a MySQL Server that is not part of a MySQL Cluster 7.1 (or later) deployment they you will get errors indicating that the server cannot provide the required data.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="attachment_1392" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_graph.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1392" class="size-medium wp-image-1392" title="MEM_graph" src="./../../wp-content/uploads/2010/11/MEM_graph-300x230.jpg" alt="" width="300" height="230" /></a><p id="caption-attachment-1392" class="wp-caption-text">MySQL Cluster Graphs</p></div>
<p>The new MySQL Cluster graphs are activated by default and you can view them from the &#8220;Graphs&#8221; tab but note that if there are no MySQL Cluster 7.1 servers in the list that you highlight on the left of the browser then the Cluster graphs will be hidden.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="attachment_1391" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_alter_rule.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1391" class="size-medium wp-image-1391" title="MEM_alter_rule" src="./../../wp-content/uploads/2010/11/MEM_alter_rule-300x191.jpg" alt="" width="300" height="191" /></a><p id="caption-attachment-1391" class="wp-caption-text">Customize Cluster Rule</p></div>
<p>Note that there is still scope for simple customizations directly from the the MySQL Enterprise Monitor GUI. For example if you don&#8217;t think that the default thresholds are appropriate for your configuration then select &#8220;Manage Rules&#8221; within the &#8220;Advisors&#8221; tab and then click &#8220;edit&#8221; next to the rule in question &#8211; you then get the option to alter the threshold values.</p>
<p>As a final configuration step, go back to the &#8220;Monitor&#8221; tab and click on &#8220;edit favorites&#8221; to promote your favourite Cluster graphs to the home screen.</p>
<p>&nbsp;</p>
<p><div id="attachment_1412" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/11/MEM_alert.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1412" src="./../../wp-content/uploads/2010/11/MEM_alert-300x193.jpg" alt="" title="MEM_alert" width="300" height="193" class="size-medium wp-image-1412" /></a><p id="caption-attachment-1412" class="wp-caption-text">Details of Cluster alert</p></div>Any Critical alerts (including ones for the newly scheduled Cluster rules) will appear on the Monitor page &#8211; to see the Info and Warning alerts, select the &#8220;Events&#8221; tab. Clicking on any of these alerts will give you extra details and the opportunity to close the alert.</p>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql-cluster/monitoring-mysql-cluster-with-mysql-enterprise-monitor/feed/index.html</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>Breakfast seminar on what&#8217;s new with MySQL &#8211; London</title>
		<link>./../../mysql/breakast-seminar-on-whats-new-with-mysql-london/index.html</link>
					<comments>./../../mysql/breakast-seminar-on-whats-new-with-mysql-london/index.html#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 17 Jun 2010 12:58:27 +0000</pubDate>
				<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL Cluster 7.1]]></category>
		<category><![CDATA[MySQL Cluster CGE]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<category><![CDATA[MySQL Workbench]]></category>
		<guid isPermaLink="false">./../../index.html?p=1111</guid>

					<description><![CDATA[If you&#8217;re in London on Thursday 24th June then there&#8217;s a great chance to find out what&#8217;s new in MySQL. Join us for an Oracle MySQL Breakfast Seminar to better understand Oracle’s MySQL strategy and what’s new with MySQL! Agenda: 09:00 a.m.    Welcome Coffee/Tea 09:30 a.m.    Oracle&#8217;s MySQL Strategy 10:00 a.m.    What&#8217;s New &#8211; The]]></description>
										<content:encoded><![CDATA[<p>If you&#8217;re in London on Thursday 24th June then there&#8217;s a great chance to find out what&#8217;s new in MySQL. <a href="./../../wp-content/uploads/2010/06/London.jpg"><img loading="lazy" decoding="async" class="alignright size-medium wp-image-1112" title="London" src="./../../wp-content/uploads/2010/06/London-300x234.jpg" alt="" width="300" height="234" /></a></p>
<p>Join us for an Oracle MySQL Breakfast Seminar to better understand Oracle’s MySQL strategy and what’s new with MySQL!<br />
Agenda:<br />
09:00 a.m.    Welcome Coffee/Tea<br />
09:30 a.m.    Oracle&#8217;s MySQL Strategy<br />
10:00 a.m.    What&#8217;s New &#8211; The MySQL Server &amp; MySQL Cluster<br />
10.45 a.m.    Coffee/Tea Break<br />
11:00 a.m.    What&#8217;s New &#8211; MySQL Enterprise &amp; MySQL Workbench<br />
11:45 a.m.    Q&amp;A<br />
12:00 noon    End of the Breakfast Seminar</p>
<p>Cost?<br />
None, it’s a free event! But places are limited and the seminar is held on a first come first served basis, so <a href="http://www.oracle.com/webapps/events/EventsDetail.jsp?p_eventId=114010&amp;src=7011252&amp;src=7011252&amp;Act=16&amp;evite=16" target="_blank">register quickly</a>!</p>
<p>Location:</p>
<p><span style="border-collapse: separate; color: #000000; font-family: arial,helvetica,sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span style="font-family: Arial,Helvetica,sans-serif; font-size: 11px; line-height: 12px;"><strong>Sun Microsystem’s Customer Briefing Center</strong><br />
Regis House<br />
45 King William Street<br />
London EC4R 9AN<br />
<strong>Tel: (020) 7628 3000</strong></span></span></p>
<p><span style="border-collapse: separate; color: #000000; font-family: arial,helvetica,sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span style="font-family: Arial,Helvetica,sans-serif; font-size: 11px; line-height: 12px;"><a href="http://www.flickr.com/photos/anirudhkoul/" target="_blank">Image courtesy of Anirudh Koul</a>.<br />
</span></span></p>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">
<p><span style="border-collapse: separate; color: #000000; font-family: arial,helvetica,sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span style="font-family: Arial,Helvetica,sans-serif; line-height: 14px;">Join us for an Oracle MySQL Breakfast Seminar in London, Thursday June 24th 2010, to better understand Oracle’s MySQL strategy and what’s new with MySQL!</span></span></p>
<table class="bodycopy" style="color: #000000; font-size: 12px; font-family: Arial,Helvetica,sans-serif; line-height: 14px; text-decoration: none;" border="0" cellspacing="0" cellpadding="4" width="100%">
<tbody>
<tr>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="3"><strong>Agenda:</strong></td>
</tr>
<tr valign="top" bgcolor="#f5f5f5">
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" width="78">09:00 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2" width="406">Welcome Coffee/Tea</td>
</tr>
<tr>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" valign="top">09:30 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2" valign="top">Oracle&#8217;s MySQL Strategy</td>
</tr>
<tr valign="top" bgcolor="#f5f5f5">
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" width="78">10:00 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2">What&#8217;s New &#8211; The MySQL Server &amp; MySQL Cluster</td>
</tr>
<tr>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" valign="top">10.45 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2" valign="top">Coffee/Tea Break</td>
</tr>
<tr valign="top" bgcolor="#f5f5f5">
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" width="78">11:00 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2">What&#8217;s New &#8211; MySQL Enterprise &amp; MyQL Workbench</td>
</tr>
<tr>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" valign="top">11:45 a.m.</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2" valign="top">Q&amp;A</td>
</tr>
<tr valign="top" bgcolor="#f5f5f5">
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" width="78">12:00 noon</td>
<td style="font-family: arial,helvetica,sans-serif; font-size: 12px; color: #000000;" colspan="2">End of the Breakfast Seminar</td>
</tr>
</tbody>
</table>
<p>* Agenda subject to change</p>
<p><strong>Cost?</strong><br />
None, it’s a free event! But places are limited and the seminar is held on a first come first served basis, so register quickly!</p>
</div>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql/breakast-seminar-on-whats-new-with-mysql-london/feed/index.html</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Configure MySQL Enterprise Monitor to monitor MySQL Cluster</title>
		<link>./../../mysql-cluster/configure-mysql-enterprise-monitor-to-monitor-mysql-cluster/index.html</link>
					<comments>./../../mysql-cluster/configure-mysql-enterprise-monitor-to-monitor-mysql-cluster/index.html#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 20 May 2010 15:54:12 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.1]]></category>
		<category><![CDATA[MySQL Cluster CGE]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<category><![CDATA[ndbinfo]]></category>
		<guid isPermaLink="false">./../../index.html?p=1064</guid>

					<description><![CDATA[MySQL Cluster 7.1 introduced the ndbinfo database which contains views giving real-time access to a whole host of information that helps you monitor and tune your MySQL Cluster deployment. Because this data can be accessed through regular SQL, various systems can be configured to monitor the Cluster. This post gives one example, extending MySQL Enterprise]]></description>
										<content:encoded><![CDATA[<p><a href="./../../wp-content/uploads/2010/04/Cluster_7_1.jpg"><img loading="lazy" decoding="async" class="alignright size-medium wp-image-1039" title="Cluster_7_1" src="./../../wp-content/uploads/2010/04/Cluster_7_1-300x103.jpg" alt="" width="300" height="103" /></a>MySQL Cluster 7.1 introduced the ndbinfo database which contains views giving real-time access to a whole host of information that helps you monitor and tune your MySQL Cluster deployment. Because this data can be accessed through regular SQL, various systems can be configured to monitor the Cluster. This post gives one example, extending MySQL Enterprise Monitor to keep an eye on the amount of free memory on the data nodes (through a graph) and then raise an alarm when it starts to run low &#8211; even generating SNMP traps if that&#8217;s what you need.</p>
<p>One of the features of MySQL Enterprise Monitor is that you can define custom data collectors and that those data collectors can run SQL queries to get the data. The information retrieved by those custom data collectors can then be used with rules that the user defines through the MySQL Enterprise Monitor GUI to create warning/alarms.</p>
<p>In this example, I create two new data collectors in the file&#8221;&lt;MySQL Enterprise Monitor installation directory&gt;/agent/share/mysql-proxy/items/cluster.xml&#8221; before starting up the MySQL Enterprise Monitor agent (note that these should be created for the agent of each MySQL Server in the Cluster that you would like to use to present the information from the data nodes):</p>
<p><strong>cluster.xml</strong>:</p>
<pre style="padding-left: 30px;"><span style="color: #800000;">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;classes&gt;
  &lt;class&gt;
    &lt;namespace&gt;mysql&lt;/namespace&gt;
    &lt;classname&gt;cluster_max_used&lt;/classname&gt;
    &lt;query&gt;&lt;![CDATA[SELECT MAX(used) AS Used FROM ndbinfo.memoryusage WHERE memory_type = 'Data Memory';]]&gt;&lt;/query&gt;
  &lt;/class&gt;
  &lt;class&gt;
    &lt;namespace&gt;mysql&lt;/namespace&gt;
    &lt;classname&gt;cluster_min_avail&lt;/classname&gt;
    &lt;query&gt;&lt;![CDATA[SELECT MIN(total) AS Total FROM ndbinfo.memoryusage WHERE memory_type = 'Data Memory';]]&gt;&lt;/query&gt;
  &lt;/class&gt;
&lt;/classes&gt;</span></pre>
<p>So that the agent picks up this file, it should be referenced within &lt;MySQL Enterprise Monitor installation directory&gt;/agent/mysql-monitor-agent.ini:</p>
<pre style="padding-left: 30px;"><span style="color: #800000;">agent-item-files = share/mysql-monitor-agent/items/quan.lua,share/mysql-monitor-agent/items/items-mysql-monitor.xml,
share/mysql-monitor-agent/items/custom.xml,<strong>share/mysql-monitor-agent/items/cluster.xml</strong></span></pre>
<p><a href="./../../wp-content/uploads/2010/05/Cluster_MEM_rule.jpg"><img loading="lazy" decoding="async" class="alignright size-medium wp-image-1069" title="Fig. 1 Create rule" src="./../../wp-content/uploads/2010/05/Cluster_MEM_rule-271x300.jpg" alt="" width="271" height="300" /></a></p>
<p>In MySQL Enterprise Monitor, events are raised by rules. Rules are grouped together into Advisors and so I create a new Advisor called &#8220;MySQL Cluster&#8221; and then create just one new rule within that Advisor group.</p>
<p>As shown in Fig. 1 the rule is called &#8220;Data Node Low Memory&#8221;. The &#8220;Variable Assignment&#8221; section is used to define 2 variables %used_mem% and %config_mem% which are populated from the <span style="color: #800000;">Used </span>and <span style="color: #800000;">Total </span>results from the 2 new data collectors. The &#8220;Expression&#8221; section is used to test &#8220;((<span style="color: #800000;">Total </span>&#8211; <span style="color: #800000;">Used</span>)/<span style="color: #800000;">Total</span>)x100&lt; THRESHOLD&#8221; and then the values to be substituted for THRESHOLD are defined in the &#8220;Thresholds&#8221; section &#8211; indicating at what points the Info, Warning and Critical Alters should be raised.</p>
<p>There are then a number of optional sections that you can use to add useful information to the person investigating the alert.</p>
<p>Once the rule has been created, the next step is to schedule and (if desired) tag that the alerts should also result in SNMP traps being raised. This is standard MySQL Enterprise Monitor practice and so it isn&#8217;t explained here except to point out that this rule is monitoring information from the data nodes but the rule has to be applied to a MySQL Server in the Cluster (MySQL Enterprise Monitor has no idea what a data node is) and so you need to schedule the rule against one or more arbitrary MySQL Server instances in the Cluster).</p>
<div id="attachment_1068" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/05/Cluster_Mem_warning.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1068" class="size-medium wp-image-1068" title="Cluster_Mem_warning" src="./../../wp-content/uploads/2010/05/Cluster_Mem_warning-300x238.jpg" alt="" width="300" height="238" /></a><p id="caption-attachment-1068" class="wp-caption-text">Fig. 2 Warning alert</p></div>
<p>To test the functionality, start adding more data to your MySQL Cluster until the Warning alert is triggered as shown in Fig. 2. As you can see, the optional information we included is shown &#8211; including values from <span style="color: #800000;">Used </span>and <span style="color: #800000;">Total</span>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="attachment_1065" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/05/Cluster_MEM_critical.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1065" class="size-medium wp-image-1065" title="Cluster_MEM_critical" src="./../../wp-content/uploads/2010/05/Cluster_MEM_critical-300x186.jpg" alt="" width="300" height="186" /></a><p id="caption-attachment-1065" class="wp-caption-text">Fig. 3 Major alert</p></div>
<p>I then add more data to the database until the critical alert is raised and confirm that it&#8217;s displayed on the main monitoring panel of the MySQL Enterprise Monitor dashboard. Note that if you requested these alerts be included with the SNMP feed then SNMP traps will also be raised.</p>
<p>Please note that this example is intended to illustrate the mechanics of setting up monitoring on an arbitrary piece of data from ndbinfo and obviously in the real world you would want to monitor more than just the memory and even for the memory, you might want to use a more sophisticated rule.</p>
<div id="attachment_1067" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/05/Cluster_MEM_graph.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1067" class="size-medium wp-image-1067" title="Cluster_MEM_graph" src="./../../wp-content/uploads/2010/05/Cluster_MEM_graph-300x217.jpg" alt="" width="300" height="217" /></a><p id="caption-attachment-1067" class="wp-caption-text">Fig. 4 Custom graph for memory usage</p></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>It is sometimes more useful to see how a value changes over time. For this, MySQL Enterprise Monitor provides graphs. The data collectors created for the rule can also be used to add a new graph to Enterprise monitor. The graph is defined by creating the following file:</p>
<pre style="padding-left: 30px;"><span style="color: #800000;">&lt;com_mysql_merlin_server_graph_Design&gt;
</span><span style="color: #800000;">  &lt;version&gt;1.0&lt;/version&gt;
</span><span style="color: #800000;">  &lt;uuid&gt;b0bc2bba-ea9b-102b-b396-94aca32b0b28&lt;/uuid&gt;
  &lt;tag&gt;&lt;/tag&gt;</span><span style="color: #800000;">
  &lt;name&gt;Per Data Node Data Memory Use&lt;/name&gt;
 </span><span style="color: #800000;"> &lt;rangeLabel&gt;MB&lt;/rangeLabel&gt; &lt;frequency&gt;00:01:00&lt;/frequency&gt;</span><span style="color: #800000;">
  &lt;series&gt;</span><span style="color: #800000;">
    &lt;label&gt;Used&lt;/label&gt;
    &lt;expression&gt;cluster_data_node_used_data_memory/1024/1024&lt;/expression&gt;
  </span><span style="color: #800000;">&lt;/series&gt;
 </span><span style="color: #800000;"> &lt;series&gt;
    &lt;label&gt;Avail&lt;/label&gt;
    </span><span style="color: #800000;">&lt;expression&gt;cluster_data_node_config_data_memory/1024/1024&lt;/expression&gt;</span><span style="color: #800000;">
  &lt;/series&gt;</span><span style="color: #800000;">
  &lt;variables&gt;
    &lt;name&gt;cluster_data_node_used_data_memory&lt;/name&gt;
    </span><span style="color: #800000;">&lt;dcItem&gt;
</span><span style="color: #800000;">      &lt;nameSpace&gt;mysql&lt;/nameSpace&gt;</span><span style="color: #800000;">
      &lt;className&gt;cluster_max_used&lt;/className&gt;</span><span style="color: #800000;">
      &lt;attribName&gt;Used&lt;/attribName&gt;
 </span><span style="color: #800000;">   &lt;/dcItem&gt;
   </span><span style="color: #800000;"> &lt;instance&gt;local&lt;/instance&gt;
</span><span style="color: #800000;">  &lt;/variables&gt;
</span><span style="color: #800000;">  &lt;variables&gt;</span><span style="color: #800000;">
    &lt;name&gt;cluster_data_node_config_data_memory&lt;/name&gt;
</span><span style="color: #800000;">    &lt;dcItem&gt;</span><span style="color: #800000;">
      &lt;nameSpace&gt;mysql&lt;/nameSpace&gt;
     </span><span style="color: #800000;"> &lt;className&gt;cluster_min_avail&lt;/className&gt;
     </span><span style="color: #800000;"> &lt;attribName&gt;Total&lt;/attribName&gt;</span><span style="color: #800000;">
    &lt;/dcItem&gt;</span><span style="color: #800000;">
    &lt;instance&gt;local&lt;/instance&gt;
  </span><span style="color: #800000;">&lt;/variables&gt;
&lt;/com_mysql_merlin_server_graph_Design&gt;
</span><span style="color: #800000;"> </span></pre>
<div id="attachment_1066" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/05/Cluster_MEM_dashboard.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1066" class="size-medium wp-image-1066" title="Cluster_MEM_dashboard" src="./../../wp-content/uploads/2010/05/Cluster_MEM_dashboard-300x174.jpg" alt="" width="300" height="174" /></a><p id="caption-attachment-1066" class="wp-caption-text">Fig. 5 MySQL Enterprise Monitor dashboard</p></div>
<p>Click on Import/Export in the Graphs tab in Enterprise Monitor (2.2) and then import the file defining the graph.</p>
<p>The graph will then appear on the graphs tab and can also be configured to appear on the main dashboard as shown in Fig. 5</p>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql-cluster/configure-mysql-enterprise-monitor-to-monitor-mysql-cluster/feed/index.html</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Using NDBINFO &#8211; example of monitoring data nodes with MySQL Enterprise Monitor</title>
		<link>./../../mysql-cluster/using-ndbinfo-example-of-monitoring-data-nodes-with-mysql-enterprise-monitor/index.html</link>
					<comments>./../../mysql-cluster/using-ndbinfo-example-of-monitoring-data-nodes-with-mysql-enterprise-monitor/index.html#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Thu, 04 Feb 2010 10:33:48 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster CGE]]></category>
		<category><![CDATA[MySQL Enterprise Monitor]]></category>
		<category><![CDATA[ndbinfo]]></category>
		<category><![CDATA[snmp]]></category>
		<guid isPermaLink="false">./../../index.html?p=929</guid>

					<description><![CDATA[You may have read Bernd&#8217;s recent post that explained how to try out some new beta functionality for MySQL Cluster and wondered what kind of use you could put the new ndb$info to. ndb$info uses tables/views to give real-time access to a whole host of information that helps you monitor and tune your MySQL Cluster]]></description>
										<content:encoded><![CDATA[<p><a href="./../../wp-content/uploads/2010/02/mysql-cluster-logo-150x105.png"><img loading="lazy" decoding="async" class="alignright size-full wp-image-919" title="mysql-cluster-logo-150x105" src="./../../wp-content/uploads/2010/02/mysql-cluster-logo-150x105.png" alt="" width="150" height="105" /></a>You may have read <a href="http://ocklin.blogspot.com/2010/02/mysql-cluster-711-is-there.html" target="_blank">Bernd&#8217;s recent post</a> that explained how to try out some new beta functionality for MySQL Cluster and wondered what kind of use you could put the new ndb$info to. ndb$info uses tables/views to give real-time access to a whole host of information that helps you monitor and tune your MySQL Cluster deployment. This article gives one example, extending MySQL Enterprise Monitor to keep an eye on the amount of free memory on the data nodes and then raise an alarm when it starts to run low &#8211; even generating SNMP traps if that&#8217;s what you need.</p>
<p>One of the features of MySQL Enterprise Monitor is that you can define custom data collectors and that those data collectors can run SQL queries to get the data. The information retrieved by those custom data collectors can then be used with rules that the user defines through the MySQL Enterprise Monitor GUI to create warning/alarms.</p>
<p>In this example, I create two new data collectors and store the files in the &#8220;&lt;MySQL Enterprise Monitor installation directory&gt;/agent/share/mysql-proxy/items/&#8221; directory before starting up the MySQL Enterprise Monitor agents:</p>
<p><strong>cluster_max_used.xml</strong>:</p>
<pre style="padding-left: 30px;"><span style="color: #800000;">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;classes&gt;
  &lt;class&gt;
    &lt;namespace&gt;mysql&lt;/namespace&gt;
    &lt;classname&gt;cluster_max_used&lt;/classname&gt;
    &lt;query&gt;&lt;![CDATA[SELECT MAX(used) as Used FROM ndbinfo.memoryusage
      WHERE DATA_MEMORY = 'DATA_MEMORY']]&gt;
    &lt;/query&gt;
  &lt;/class&gt;
&lt;/classes&gt;</span></pre>
<p><strong>cluster_min_avail.xml</strong>:</p>
<pre style="padding-left: 30px;"><span style="color: #800000;">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><span style="color: #800000;">
&lt;classes&gt;
</span><span style="color: #800000;">  &lt;class&gt;
</span><span style="color: #800000;">    &lt;namespace&gt;mysql&lt;/namespace&gt;
    &lt;classname&gt;cluster_min_avail&lt;/classname&gt;
    &lt;query&gt;&lt;![CDATA[SELECT MIN(max)as Max FROM ndbinfo.memoryusage
       WHERE DATA_MEMORY = 'DATA_MEMORY']]&gt;
    &lt;/query&gt;
  &lt;/class&gt;
&lt;/classes&gt;</span></pre>
<div id="attachment_927" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/02/rule.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-927" class="size-medium wp-image-927" title="rule" src="./../../wp-content/uploads/2010/02/rule-300x297.jpg" alt="" width="300" height="297" srcset="./../../wp-content/uploads/2010/02/rule-300x297.jpg 300w, ./../../wp-content/uploads/2010/02/rule-150x150.jpg 150w, ./../../wp-content/uploads/2010/02/rule.jpg 759w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-927" class="wp-caption-text">Fig. 1 Rule definition</p></div>
<p>In MySQL Enterprise Monitor, rules are grouped together into Advisors and so I create a new Advisor called &#8220;MySQL Cluster&#8221; and then create just one new rule within that Advisor group.</p>
<p>As shown in Fig. 1 the rule is called &#8220;Data Node Low Memory&#8221;. The &#8220;Variable Assignment&#8221; section is used to define 2 variables %used_mem% and %config_mem% which are populated from the <span style="color: #800000;">Used </span>and <span style="color: #800000;">Max </span>results from the 2 new data collectors. The &#8220;Expression&#8221; section is used to test &#8220;(<span style="color: #800000;">Max </span>&#8211; <span style="color: #800000;">Used</span>) &lt; THRESHOLD&#8221; and then the values to be substituted for THRESHOLD are defined in the &#8220;Thresholds&#8221; section &#8211; indicating at what points the Info, Warning and Critical Alters should be raised.</p>
<p>There are then a number of optional sections that you can use to add useful information to the person investigating the alert.</p>
<p>Once the rule has been created, the next step is to schedule it and (if desired) tag that the alerts should also result in SNMP traps being raised. This is standard MySQL Enterprise Monitor practice and so it isn&#8217;t explained here except to point out that this rule is monitoring information from the data nodes but the rule has to be applied to a MySQL Server (MySQL Enterprise Monitor has no idea what a data node is) and so you need to schedule the rule against one or more arbitrary MySQL Server instances in the Cluster.</p>
<div id="attachment_928" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/02/Info_warning.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-928" class="size-medium wp-image-928" title="Info_warning" src="./../../wp-content/uploads/2010/02/Info_warning-300x239.jpg" alt="" width="300" height="239" srcset="./../../wp-content/uploads/2010/02/Info_warning-300x239.jpg 300w, ./../../wp-content/uploads/2010/02/Info_warning.jpg 938w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-928" class="wp-caption-text">Fig. 2 Warning alert</p></div>
<p> <br />
 <br />
To test the functionality, start adding more data to your MySQL Cluster until the Warning alert is triggered as shown in Fig. 2. As you can see, the optional information we included is shown &#8211; including values from <span style="color: #800000;">Used </span>and <span style="color: #800000;">Max</span>.<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
<div id="attachment_926" style="width: 310px" class="wp-caption alignright"><a href="./../../wp-content/uploads/2010/02/critical.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-926" class="size-medium wp-image-926" title="critical" src="./../../wp-content/uploads/2010/02/critical-300x146.jpg" alt="" width="300" height="146" srcset="./../../wp-content/uploads/2010/02/critical-300x146.jpg 300w, ./../../wp-content/uploads/2010/02/critical-1024x501.jpg 1024w, ./../../wp-content/uploads/2010/02/critical.jpg 1082w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-926" class="wp-caption-text">Fig. 3 Critical alarm</p></div></p>
<p>I then add more data to the database until the critical alert is raised and confirm that it&#8217;s displayed on the main monitoring panel of the MySQL Enterprise Monitor dashboard. Note that if you requested these alerts be included with the SNMP feed then SNMP traps will also be raised.</p>
<p>Please note that this example is intended to illustrate the mechanics of setting up monitoring on an arbitrary piece of data from ndbinfo and obviously in the real world you would want to monitor more than just the memory and even for the memory, you might want to use a more sophisticated rule.</p>
]]></content:encoded>
					
					<wfw:commentRss>./../../mysql-cluster/using-ndbinfo-example-of-monitoring-data-nodes-with-mysql-enterprise-monitor/feed/index.html</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
