<!DOCTYPE html>
<!-- HTML 5 --><html lang="en-US">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="pingback" href="./../xmlrpc.php">
	
	<title>MongoDB Compass | Andrew Morgan on Databases</title>

<meta name="robots" content="max-image-preview:large">
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="Andrew Morgan on Databases &raquo; Feed" href="./../feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Andrew Morgan on Databases &raquo; Comments Feed" href="./../comments/feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Andrew Morgan on Databases &raquo; MongoDB Compass Tag Feed" href="./feed/index.html">
		<!-- This site uses the Google Analytics by MonsterInsights plugin v9.2.2 - Using Analytics tracking - https://www.monsterinsights.com/ -->
		<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
					<!-- No tracking code set -->
				<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
/*  */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.clusterdb.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"üè≥Ô∏è‚Äç‚ößÔ∏è","üè≥Ô∏è‚Äã‚ößÔ∏è")?!1:!n(e,"üá∫üá≥","üá∫‚Äãüá≥")&&!n(e,"üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø","üè¥‚ÄãÛ†Åß‚ÄãÛ†Å¢‚ÄãÛ†Å•‚ÄãÛ†ÅÆ‚ÄãÛ†Åß‚ÄãÛ†Åø");case"emoji":return!n(e,"üê¶‚Äç‚¨õ","üê¶‚Äã‚¨õ")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/*  */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="./../wp-includes/css/dist/block-library/style.min.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="plyr-css-css" href="./../wp-content/plugins/easy-video-player/lib/plyr.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="zeeSynergie_stylesheet-css" href="./../wp-content/themes/zeesynergie/style.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="zeeSynergie_colorscheme-css" href="./../wp-content/themes/zeesynergie/includes/css/colorschemes/blue.css?ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<link rel="stylesheet" id="themezee_default_font-css" href="http://fonts.googleapis.com/css?family=Paytone+One&#038;ver=81fb77f64976ac32efe42aab69fdb5e4" type="text/css" media="all">
<script type="text/javascript" src="./../wp-content/plugins/easy-video-player/lib/plyr.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4" id="plyr-js-js"></script>
<script type="text/javascript" src="./../wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="./../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<script type="text/javascript" src="./../wp-content/themes/zeesynergie/includes/js/jquery.cycle.all.min.js?ver=81fb77f64976ac32efe42aab69fdb5e4" id="zee_jquery-cycle-js"></script>
<link rel="https://api.w.org/" href="./../wp-json/index.html"><link rel="alternate" title="JSON" type="application/json" href="./../wp-json/wp/v2/tags/168/index.html"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="./../xmlrpc.php?rsd">

<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style><script type="text/javascript">//
					jQuery(document).ready(function($) {
						$('#nav ul').css({display: 'none'}); // Opera Fix
						$('#nav li').hover(function(){
							$(this).find('ul:first').css({visibility: 'visible',display: 'none'}).show().css({opacity:0}).animate({opacity:1},400);
						},function(){
							$(this).find('ul:first').css({visibility: 'hidden'});
						});
					});
				//</script><style type="text/css"></style><style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><style type="text/css" id="custom-background-css">body.custom-background { background-color: #89a5bf; }</style>
	<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style></head>

<body class="archive tag tag-mongodb-compass tag-168 custom-background">
<div id="wrapper">

	<div id="header">

		<div id="head">
			<div id="logo">
									<a href="./../index.html"><h1>Andrew Morgan on Databases</h1></a>
                                        <!-- <a href=".//"><h1>MySQL Cluster, Replication, Fabric...</h1></a>  ZXZX -->					
							</div>
			<div id="socialmedia_icons">
				<a href="http://twitter.com/andrewmorgan"><img src="./../wp-content/themes/zeesynergie/images/icons/twitter.png" alt="twitter"></a><a href="http://www.facebook.com/andrewjamesmorgan"><img src="./../wp-content/themes/zeesynergie/images/icons/facebook.png" alt="facebook"></a><a href="https://plus.google.com/u/0/100605473697871424413/posts"><img src="./../wp-content/themes/zeesynergie/images/icons/googleplus.png" alt="googleplus"></a><a href="http://www.linkedin.com/profile/view?id=16709956"><img src="./../wp-content/themes/zeesynergie/images/icons/linkedin.png" alt="linkedin"></a><a href="http://www.flickr.com/photos/andrewjamesmorgan/"><img src="./../wp-content/themes/zeesynergie/images/icons/flickr.png" alt="flickr"></a><a href="http://www.youtube.com/channel/UCodtDakJ4VdeSCzS3P3rIsw"><img src="./../wp-content/themes/zeesynergie/images/icons/youtube.png" alt="youtube"></a>				<div class="clear"></div>
			</div>
			<div class="clear"></div>
		</div>
		
		<div id="navi_container">
			<div id="navi">
				<ul id="nav" class="menu"><li class="page_item page-item-1011"><a href="./../about/index.html">About</a></li>
</ul>			</div>
		</div>
		<div class="clear"></div>
	</div>
	
	<div id="container">
	
			<div id="custom_header">
			<img src="./../wp-content/uploads/2015/06/cropped-ClusterDB-logo-header.png">
		</div>
	
	<div id="wrap">
		<div id="content">
		
		<h2 class="arh">Tag Archive for MongoDB Compass</h2>
				
					<div id="post-4305" class="post-4305 post type-post status-publish format-standard hentry category-mongodb tag-compass tag-document-validation tag-mongodb tag-mongodb-compass">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="./../author/andrew/index.html" title="Posts by andrew" rel="author">andrew</a> |
		<a href="./../mongodb/adding-document-validation-rules-using-mongodb-compass-1-5/index.html">November 22, 2016</a>
			</div>
	<div class="postcomments">
		<a href="./../mongodb/adding-document-validation-rules-using-mongodb-compass-1-5/index.html#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="./../mongodb/adding-document-validation-rules-using-mongodb-compass-1-5/index.html" rel="bookmark">Adding Document Validation Rules Using MongoDB Compass 1.5</a></h2>
				
				<div class="entry">
										<h1>Adding Document Validation Rules Using MongoDB Compass 1.5</h1>
<p>This post looks at a new feature in <a href="https://www.mongodb.com/products/compass" title="MongoDB Compass ‚Äì the GUI for MongoDB">MongoDB Compass</a> 1.5 (in beta at the time of writing) which allows document validation rules to be added from the GUI rather from the <code>mongo</code> shell command line. This makes it easy to create and modify rules that ensure that all documents written to a collection contain the data you expect to be there.</p>
<h2>Introduction</h2>
<p>One of MongoDB‚Äôs primary attractions for developers is that it gives them the ability to start application development without first needing to define a formal schema. Operations teams appreciate the fact that they don&#8217;t need to perform a time-consuming schema upgrade operation every time the developers need to store a different attribute. For business leaders, the application gets launched much faster, and new features can be rolled out more frequently. MongoDB powers agility.</p>
<p>Many projects reach a point where it&#8217;s necessary to enforce rules on what&#8217;s being stored in the database ‚Äì for example, that for any document in a particular collection, you can be certain that specific attributes are present in every document. Reasons for this include:</p>
<ul>
<li>Different development teams can work with the same data, each needing to know what they can expect to find in a particular collection.</li>
<li>Development teams working on different applications can be spread over multiple sites, which means that a clear agreement on the format of shared data is important.</li>
<li>Development teams from different companies may be working with the same collections; misunderstandings about what data should be present can lead to issues.</li>
</ul>
<p>As an example, an e-commerce website may centralize product catalog feeds from multiple vendors into a single collection. If one of the vendors alters the format of its product catalog, global catalog searches could fail.</p>
<p>To date, this resulted in developers building their own validation logic &#8211; either within the application code (possibly multiple times for different applications) or by adding middleware such as Mongoose.</p>
<p>To address the challenges discussed above, while at the same time maintaining the benefits of a dynamic schema, MongoDB 3.2 introduced <a href="https://docs.mongodb.com/v3.2/core/document-validation/" title="Validating documents in MongoDB">document validations</a>. Adding and viewing validation rules required understanding the correct commands to run from the <code>mongo</code> shell&#8217;s command line.</p>
<p><a href="https://www.mongodb.com/products/compass" title="The Easiest Way to Explore and Manipulate Your MongoDB Data">MongoDB Compass</a> 1.5 allows users to view, add, and modify document validation rules through its GUI, making them more accessible to both developers and DBAs.</p>
<h2>Validating Documents in MongoDB</h2>
<p>Document Validation provides significant flexibility to customize which parts of the documents are <strong>and are not</strong> validated for any collection. For any attribute it might be appropriate to check:</p>
<ul>
<li>That the attribute exists</li>
<li>If an attribute does exist, that it is of the correct type</li>
<li>That the value is in a particular format (e.g., regular expressions can be used to check if the contents of the string matches a particular pattern)</li>
<li>That the value falls within a given range</li>
</ul>
<p>Further, it may be necessary to combine these checks ‚Äì for example that the document contains the user&#8217;s name <em>and</em> either their email address <em>or</em> phone number, <em>and</em> if the email address does exist, then it must be correctly formed.</p>
<p>Adding the validation checks from the command line is intuitive to developers or DBAs familiar with the MongoDB query language as it uses the same expression syntax as a <code>find</code> query to search the database. For others, it can be a little intimidating.</p>
<p>As an example, the following snippet adds validations to the <code>contacts</code> collection that validates:</p>
<ul>
<li>The year of birth is no later than 1994</li>
<li>The document contains a phone number and/or an email address</li>
<li>When present, the phone number and email address are strings</li>
</ul>
<pre><code>db.runCommand({
   collMod: "contacts",
   validator: { 
      $and: [
        {yearOfBirth: {$lte: 1994}},
        {$or: [ 
                  {"contact.phone": { $type: "string"}}, 
                  {"email": { $type: "string"}}
              ]}]
    }})
</code></pre>
<p>Note that <a href="https://docs.mongodb.com/manual/reference/operator/query/type/" title="$type selects the documents where the value of the field is an instance of the specified BSON type.">types can be specified using either a number or a string alias</a>.</p>
<p>Wouldn&#8217;t it be nice to be able to define these rules through a GUI rather than from the command line?</p>
<h2>Using MongoDB Compass to Add Document Validation Rules</h2>
<p>If you don&#8217;t already have MongoDB Compass 1.5 (or later) installed, <a href="https://www.mongodb.com/download-center#compass" title="Download MongoDB Compass ‚Äì GUI data management tool for MongoDB">download it</a> and start the application. You&#8217;ll then be asked to provide details on how to connect to your database.</p>
<p>MongoDB Compass is free for evaluation and for use in development, for production, a <a href="https://www.mongodb.com/products/mongodb-professional" title="Expert support and a comprehensive management platform for MongoDB">MongoDB Professional</a> of <a href="https://www.mongodb.com/products/mongodb-enterprise-advanced" title="The Best Way to Run MongoDB in Your Data Center. Supported. Secure. Automated.">MongoDB Enterprise Advanced</a> subscription is required.</p>
<p>If you don&#8217;t have a database to test this on, the simplest option is to <a href="https://www.mongodb.com/cloud" title="MongoDB Hosted Service in the cloud ‚Äì MongoDB Atlas">create a new MongoDB Atlas cluster</a>. Details on launching a MongoDB Atlas cluster can be found in <a href="https://www.mongodb.com/blog/post/using-mongodb-atlas-from-your-favorite-language-or-framework">this post</a>.</p>
<p>Note that MongoDB Compass currently only accepts a single server address rather than the list of replica set members in the standard Atlas connect string and so it&#8217;s necessary to explicitly provide Compass with the address of the current primary ‚Äì find that by clicking on the cluster in the Atlas GUI (Figure 1).</p>
<div id="attachment_4307" style="width: 290px" class="wp-caption alignleft"><a href="./../wp-content/uploads/2016/11/MongoDB_Atlas_identify_primary.png"><img decoding="async" aria-describedby="caption-attachment-4307" class="wp-image-4307 size-medium" src="./../wp-content/uploads/2016/11/MongoDB_Atlas_identify_primary-300x204.png" alt="Identify the replica set primary" width="280" srcset="./../wp-content/uploads/2016/11/MongoDB_Atlas_identify_primary-300x204.png 300w, ./../wp-content/uploads/2016/11/MongoDB_Atlas_identify_primary.png 505w" sizes="(max-width: 300px) 100vw, 300px"></a><p id="caption-attachment-4307" class="wp-caption-text">Figure 1: Identify the replica set primary</p></div>
<div id="attachment_4309" style="width: 240px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Connect_MongoDB_Compass_to_MongoDB_Atlas.png"><img decoding="async" aria-describedby="caption-attachment-4309" class="wp-image-4309 size-medium" src="./../wp-content/uploads/2016/11/Connect_MongoDB_Compass_to_MongoDB_Atlas-235x300.png" alt="Connect MongoDB Compass to MongoDB Atlas" width="230" srcset="./../wp-content/uploads/2016/11/Connect_MongoDB_Compass_to_MongoDB_Atlas-235x300.png 235w, ./../wp-content/uploads/2016/11/Connect_MongoDB_Compass_to_MongoDB_Atlas.png 496w" sizes="(max-width: 235px) 100vw, 235px"></a><p id="caption-attachment-4309" class="wp-caption-text">Figure 2: Connect MongoDB Compass to MongoDB Atlas</p></div>
<p>The connection panel can then be populated as shown in Figure 2.</p>
<h3>Load Data and Check in MongoDB Compass</h3>
<p>If you don&#8217;t already have a populated MongoDB collection, create one now. For example, use <code>curl</code> to download a pre-prepared JSON file containing contact data and use <a href="https://docs.mongodb.com/manual/reference/program/mongoimport/" title="Import JSON, CSV, or TSV data into MongoDB"><code>mongoimport</code></a> to load it into your database:</p>
<pre><code class="bash">curl -o contacts.json http://clusterdb.com/upload/contacts.json
mongoimport -h cluster0-shard-00-00-qfovx.mongodb.net -d clusterdb -c contacts --ssl -u billy -p SECRET --authenticationDatabase admin contacts.json
</code></pre>
<p>Connect MongoDB Compass to your database (Figure 3).</p>
<div id="attachment_4310" style="width: 1286px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/connect_compass_to_atlas.png"><img fetchpriority="high" decoding="async" aria-describedby="caption-attachment-4310" class="wp-image-4310 size-full" src="./../wp-content/uploads/2016/11/connect_compass_to_atlas.png" alt="Connect MongoDB Compass to database" width="1276" height="737" srcset="./../wp-content/uploads/2016/11/connect_compass_to_atlas.png 1276w, ./../wp-content/uploads/2016/11/connect_compass_to_atlas-300x173.png 300w, ./../wp-content/uploads/2016/11/connect_compass_to_atlas-768x444.png 768w, ./../wp-content/uploads/2016/11/connect_compass_to_atlas-1024x591.png 1024w" sizes="(max-width: 1276px) 100vw, 1276px"></a><p id="caption-attachment-4310" class="wp-caption-text">Figure 3: Connect MongoDB Compass to database</p></div>
<p>Select the <em>contacts</em> data and browse the schema (Figure 4).</p>
<div id="attachment_4311" style="width: 1292px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/compass_check_schema.png"><img decoding="async" aria-describedby="caption-attachment-4311" class="wp-image-4311 size-full" src="./../wp-content/uploads/2016/11/compass_check_schema.png" alt="Check schema in MongoDB Compass" width="1282" height="739" srcset="./../wp-content/uploads/2016/11/compass_check_schema.png 1282w, ./../wp-content/uploads/2016/11/compass_check_schema-300x173.png 300w, ./../wp-content/uploads/2016/11/compass_check_schema-768x443.png 768w, ./../wp-content/uploads/2016/11/compass_check_schema-1024x590.png 1024w" sizes="(max-width: 1282px) 100vw, 1282px"></a><p id="caption-attachment-4311" class="wp-caption-text">Figure 4: Check schema in MongoDB Compass</p></div>
<p>Browse some documents (Figure 5).</p>
<div id="attachment_4312" style="width: 1290px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/compass_browse_documents.png"><img decoding="async" aria-describedby="caption-attachment-4312" class="size-full wp-image-4312" src="./../wp-content/uploads/2016/11/compass_browse_documents.png" alt="Browse documents using MongoDB Compass" width="1280" height="740" srcset="./../wp-content/uploads/2016/11/compass_browse_documents.png 1280w, ./../wp-content/uploads/2016/11/compass_browse_documents-300x173.png 300w, ./../wp-content/uploads/2016/11/compass_browse_documents-768x444.png 768w, ./../wp-content/uploads/2016/11/compass_browse_documents-1024x592.png 1024w" sizes="(max-width: 1280px) 100vw, 1280px"></a><p id="caption-attachment-4312" class="wp-caption-text">Figure 5: Browse documents using MongoDB Compass</p></div>
<h3>Add Document Validation Rules</h3>
<p>In this section, we build the document validation rule shown earlier.</p>
<p>Navigate to the Validation tab in MongoDB Compass GUI and select the desired <em>validation action</em> and <em>validation level</em>. The effects of these settings are shown in Figure 6. Any warnings generated by the rules are written to the MongoDB log.</p>
<div id="attachment_4313" style="width: 1610px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/document_validation_settings.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4313" class="size-full wp-image-4313" src="./../wp-content/uploads/2016/11/document_validation_settings.png" alt="MongoDB document validation configuration parameters" width="1600" height="662" srcset="./../wp-content/uploads/2016/11/document_validation_settings.png 1600w, ./../wp-content/uploads/2016/11/document_validation_settings-300x124.png 300w, ./../wp-content/uploads/2016/11/document_validation_settings-768x318.png 768w, ./../wp-content/uploads/2016/11/document_validation_settings-1024x424.png 1024w" sizes="auto, (max-width: 1600px) 100vw, 1600px"></a><p id="caption-attachment-4313" class="wp-caption-text">Figure 6: MongoDB document validation configuration parameters</p></div>
<p>When adding document validation rules to an existing collection, you may want to start with fairly permissive rules so that existing applications aren&#8217;t broken before you have chance to clean things up. Once you&#8217;re confident that all applications are following the rules you could then become stricter. Figure 7 shows a possible life cycle for a collection.</p>
<div id="attachment_4314" style="width: 1431px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/colllection_lifecycle.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4314" class="size-full wp-image-4314" src="./../wp-content/uploads/2016/11/colllection_lifecycle.png" alt="Life cycle of a MongoDB collection" width="1421" height="250" srcset="./../wp-content/uploads/2016/11/colllection_lifecycle.png 1421w, ./../wp-content/uploads/2016/11/colllection_lifecycle-300x53.png 300w, ./../wp-content/uploads/2016/11/colllection_lifecycle-768x135.png 768w, ./../wp-content/uploads/2016/11/colllection_lifecycle-1024x180.png 1024w" sizes="auto, (max-width: 1421px) 100vw, 1421px"></a><p id="caption-attachment-4314" class="wp-caption-text">Figure 7: Life cycle of a MongoDB collection</p></div>
<p>This post is starting with a new collection and so you can go straight to <em>error</em>/<em>strict</em> as shown in Figure 8.</p>
<div id="attachment_4315" style="width: 1288px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/error_strict.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4315" class="size-full wp-image-4315" src="./../wp-content/uploads/2016/11/error_strict.png" alt="Set document validation to error/strict" width="1278" height="447" srcset="./../wp-content/uploads/2016/11/error_strict.png 1278w, ./../wp-content/uploads/2016/11/error_strict-300x105.png 300w, ./../wp-content/uploads/2016/11/error_strict-768x269.png 768w, ./../wp-content/uploads/2016/11/error_strict-1024x358.png 1024w" sizes="auto, (max-width: 1278px) 100vw, 1278px"></a><p id="caption-attachment-4315" class="wp-caption-text">Figure 8: Set document validation to error/strict</p></div>
<p>Multiple rules for the document can then be added using the GUI (Figure 9). Note that the rule for the email address uses a regular expression (<code>^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$</code>) to test that the address is properly formatted ‚Äì going further than the original rule.</p>
<div id="attachment_4316" style="width: 1276px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/compass_define_validation_rules.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4316" class="size-full wp-image-4316" src="./../wp-content/uploads/2016/11/compass_define_validation_rules.png" alt="Add new document validation rule through MongoDB Compass" width="1266" height="609" srcset="./../wp-content/uploads/2016/11/compass_define_validation_rules.png 1266w, ./../wp-content/uploads/2016/11/compass_define_validation_rules-300x144.png 300w, ./../wp-content/uploads/2016/11/compass_define_validation_rules-768x369.png 768w, ./../wp-content/uploads/2016/11/compass_define_validation_rules-1024x493.png 1024w" sizes="auto, (max-width: 1266px) 100vw, 1266px"></a><p id="caption-attachment-4316" class="wp-caption-text">Figure 9: Add new document validation rule through MongoDB Compass</p></div>
<p>Clicking <em>UPDATE</em> applies the change and then you can review it by pressing the <em>JSON</em> button (Figure 10).</p>
<div id="attachment_4317" style="width: 1286px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/json_view_of_validation_rule.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4317" class="size-full wp-image-4317" src="./../wp-content/uploads/2016/11/json_view_of_validation_rule.png" alt="JSON view of new document validation rule" width="1276" height="616" srcset="./../wp-content/uploads/2016/11/json_view_of_validation_rule.png 1276w, ./../wp-content/uploads/2016/11/json_view_of_validation_rule-300x145.png 300w, ./../wp-content/uploads/2016/11/json_view_of_validation_rule-768x371.png 768w, ./../wp-content/uploads/2016/11/json_view_of_validation_rule-1024x494.png 1024w" sizes="auto, (max-width: 1276px) 100vw, 1276px"></a><p id="caption-attachment-4317" class="wp-caption-text">Figure 10: JSON view of new document validation rule</p></div>
<p>At this point, a problem appears. Compass has combined the 3 sub-rules with an <strong>and</strong> relationship but our intent was to test that the document contained either an email address <strong>or</strong> a phone number and that <code>yearOfBirth</code> was no later than 1994. Fortunately, for these more complex checks, the JSON can be altered directly within Compass:</p>
<pre><code>{
  "$and": [
    {"yearOfBirth": {"$lte": 1994}}, 
    {
      "$or": [
        {"contact.email": {
          "$regex": "^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$",
          "$options": ""
          }
        },
        {
          "$and": [
            {"contact.phone": {"$type": 2}},
            {"contact.email": {"$exists": false}}
          ]
        }
      ]
    }
  ]
}
</code></pre>
<p>Paste the refined rule into Compass and press <em>UPDATE</em> (Figure 11).</p>
<div id="attachment_4318" style="width: 1289px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/manually_edit_rules.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4318" class="size-full wp-image-4318" src="./../wp-content/uploads/2016/11/manually_edit_rules.png" alt="Manually edit validation rules in MongoDB Compass" width="1279" height="624" srcset="./../wp-content/uploads/2016/11/manually_edit_rules.png 1279w, ./../wp-content/uploads/2016/11/manually_edit_rules-300x146.png 300w, ./../wp-content/uploads/2016/11/manually_edit_rules-768x375.png 768w, ./../wp-content/uploads/2016/11/manually_edit_rules-1024x500.png 1024w" sizes="auto, (max-width: 1279px) 100vw, 1279px"></a><p id="caption-attachment-4318" class="wp-caption-text">Figure 11: Manually edit validation rules in MongoDB Compass</p></div>
<p>Recall that this rule checks that the <code>yearOfBirth</code> is no later than 1994 and that there is a phone number (formatted as a string)or a properly formatted email address.</p>
<h3>Test The Rules</h3>
<p>However you write to the database, the document validation rules are applied in the same way ‚Äì through any of the drivers, or through the <code>mongo</code> shell. For this post we can test the rules directly from the MongoDB Compass GUI, from the <em>DOCUMENTS</em> tab. Select a document and try changing the <code>yearOfBirth</code> to a year later than 1994 as shown in Figure 12.</p>
<div id="attachment_4319" style="width: 1287px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/compass_failed_validation.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4319" class="size-full wp-image-4319" src="./../wp-content/uploads/2016/11/compass_failed_validation.png" alt="hange fails document validation" width="1277" height="491" srcset="./../wp-content/uploads/2016/11/compass_failed_validation.png 1277w, ./../wp-content/uploads/2016/11/compass_failed_validation-300x115.png 300w, ./../wp-content/uploads/2016/11/compass_failed_validation-768x295.png 768w, ./../wp-content/uploads/2016/11/compass_failed_validation-1024x394.png 1024w" sizes="auto, (max-width: 1277px) 100vw, 1277px"></a><p id="caption-attachment-4319" class="wp-caption-text">Figure 12: Change fails document validation</p></div>
<h3>Find the Offending Documents Already in the Collection</h3>
<p>There are a number of ways to track down existing documents that don&#8217;t meet the new rules. A very simple option is to query the database using the negation of the rule definition by wrapping the validation document in a <code>$nor</code> clause:</p>
<pre><code>{"$nor": [
  {
    "$and": [
      {"yearOfBirth": {"$lte": 1994}}, 
      {
        "$or": [
          {"contact.email": {
            "$regex": "^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$",
            "$options": ""
            }
          },
          {"contact.phone": {"$type": 2}}
        ]
      }
    ]
  }]
}
</code></pre>
<p>The query document can be pasted into the query bar in Compass and then pressing <em>APPLY</em> reveals that there are 206 documents with <code>yearOfBirth</code> greater than 1994 ‚Äì Figure 13.</p>
<div id="attachment_4320" style="width: 1286px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/11/find_offending_documents.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4320" class="size-full wp-image-4320" src="./../wp-content/uploads/2016/11/find_offending_documents.png" alt="Find documents not matching the validation rules" width="1276" height="735" srcset="./../wp-content/uploads/2016/11/find_offending_documents.png 1276w, ./../wp-content/uploads/2016/11/find_offending_documents-300x173.png 300w, ./../wp-content/uploads/2016/11/find_offending_documents-768x442.png 768w, ./../wp-content/uploads/2016/11/find_offending_documents-1024x590.png 1024w" sizes="auto, (max-width: 1276px) 100vw, 1276px"></a><p id="caption-attachment-4320" class="wp-caption-text">Figure 13: Find documents not matching the validation rules</p></div>
<h5>Cleaning up Offending Documents</h5>
<p>Potentially more problematic is how to clean up the existing documents which do not match the validation rules, as you need to decide what should happen to them. The good news is that the same <code>$nor</code> document used above can be used as a filter when executing your chosen action.</p>
<p>For example, if you decided that the offending documents should not be in the collection at all then this command can be run from the <code>mongo</code> shell command line to delete them:</p>
<pre><code>use clusterdb
db.contacts.remove(
{"$nor": [
  {
    "$and": [
      {"yearOfBirth": {"$lte": 1994}}, 
      {
        "$or": [
          {"contact.email": {
            "$regex": "^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$",
            "$options": ""
            }
          },
          {"contact.phone": {"$type": 2}}
        ]
      }
    ]
  }]
})
</code></pre>
<h4>Another Example ‚Äì Coping with Multiple Schema Versions</h4>
<p>A tricky problem to solve with RDBMSs is the versioning of data models; with MongoDB it&#8217;s very straight-forward to set up validations that can cope with different versions of documents, with each version having a different set of checks applied. In the example validation checks below, the following logic is applied:</p>
<ul>
<li>If the document is unversioned (possibly dating to the time before validations were added), then no checks are applied</li>
<li>For version 1, the document is checked to make sure that the <code>name</code> key exists</li>
<li>For version 2 documents, the type of the <code>name</code> key is also validated to ensure that it is a string</li>
</ul>
<pre><code>{"$or": [
  {version: {"$exists": false}},
  {"$and": [
    {version: 1},
    {Name: {"$exists": true}}
  ]},
  {"$and": [
    {version: 2},
    {Name: {"$exists": true, "$type": "string"}}
  ]}
]} 
</code></pre>
<p>In this way, multiple versions of documents can exist within the same collection, and the application can lazily up-version them over time. Note that the <code>version</code> attribute is user-defined.</p>
<h4>Where MongoDB Document Validation Excels (vs. RDBMSs)</h4>
<p>In MongoDB, document validation is simple to set up ‚Äì especially now that it can be done through the MongoDB Compass GUI. You can avoid the maintenance headache of stored procedures ‚Äì which for many types of validation would be required in an RDBMS ‚Äì and because the familiar MongoDB query language is used, there is no new syntax to learn.</p>
<p>The functionality is very flexible and it can enforce constraints on as little or as much of the schema as required. You get the best of both worlds ‚Äì a dynamic schema for rapidly changing, polymorphic data, with the option to enforce strict validation checks against specific attributes from the onset of your project, or much later on. You can also use the Compass GUI to find and modify individual, pre-existing documents that don&#8217;t follow any new rules. If you initially have no validations defined, they can still be added later ‚Äì even once in production, across thousand of servers.</p>
<p>It is always a concern whether adding extra checks will impact the performance of the system; in our tests, document validation adds a negligible overhead.</p>
<h4>So, is all Data Validation Now Done in the Database?</h4>
<p>The answer is &#8220;probably not&#8221; ‚Äì either because there&#8217;s a limit to what can be done in the database or because there will always be a more appropriate place for some checks. Here are some areas to consider:</p>
<ul>
<li>For a good user experience, checks should be made as early and as high up the stack as is sensible. For example, the format of an entered email address should be first checked in the browser rather than waiting for the request to be processed and an attempt made to write it to the database.</li>
<li>Any validations which need to compare values between keys, other documents, or external information cannot currently be implemented within the database.</li>
<li>Many checks are best made within the application&#8217;s business logic ‚Äì for example &#8220;is this user allowed to use these services in their home country&#8221;; the checks in the database are primarily there to protect against coding errors.</li>
<li>If you need information on <strong>why</strong> the document failed validation, the developer or application will need to check the document against each of the sub-rules within the collection&#8217;s validation rule in turn as the error message doesn&#8217;t currently give this level of detail.</li>
</ul>
<h4>Summary</h4>
<p>In this post, we&#8217;ve taken a look at the powerful document validation functionality that was added back in MongoDB 3.2. We then explored how MongoDB Compass 1.5 adds the convenience of being able to define these rules through an intuitive GUI.</p>
<p>This is just one of the recent enhancements to MongoDB Compass; others include:</p>
<ul>
<li><a href="https://www.mongodb.com/blog/post/visualizing-your-data-with-mongodb-compass" title="CRUD operations in MongoDB Compass">Create, remove, update, delete, or clone existing documents</a></li>
<li>Provide real-time performance statistics</li>
<li><a href="https://www.mongodb.com/blog/post/visualizing-your-data-with-mongodb-compass" title="Visual Query Exlain in MongoDB Compass">Visualize query explain plans</a></li>
<li>Review index usage</li>
<li>Create new indexes</li>
</ul>
<p>A summary of the enhancements added in MongoDB Compass 1.4 &amp; 1.5 can be found in <a href="https://www.mongodb.com/collateral/mongodb-3-4-whats-new" title="What's new in MongoDB 3.4">MongoDB 3.4 ‚Äì What&#8217;s New</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url=".//mongodb/adding-document-validation-rules-using-mongodb-compass-1-5" data-via="wpbeginner" data-text="Adding Document Validation Rules Using MongoDB Compass 1.5" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href=".//mongodb/adding-document-validation-rules-using-mongodb-compass-1-5"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url=".//mongodb/adding-document-validation-rules-using-mongodb-compass-1-5" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=.%2F%2Fmongodb%2Fadding-document-validation-rules-using-mongodb-compass-1-5&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="./../category/mongodb/index.html" rel="category tag">MongoDB</a> | 
Tags: <a href="./compass/index.html" rel="tag">compass</a>, <a href="./document-validation/index.html" rel="tag">Document Validation</a>, <a href="./mongodb/index.html" rel="tag">mongodb</a>, <a href="./mongodb-compass/index.html" rel="tag">MongoDB Compass</a></div>

			</div>			<div id="post-4293" class="post-4293 post type-post status-publish format-standard hentry category-mongodb tag-collations tag-mongodb tag-mongodb-3-4 tag-mongodb-compass tag-views">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="./../author/andrew/index.html" title="Posts by andrew" rel="author">andrew</a> |
		<a href="./../mongodb/language-specific-views-in-mongodb-3-4/index.html">November 16, 2016</a>
			</div>
	<div class="postcomments">
		<a href="./../mongodb/language-specific-views-in-mongodb-3-4/index.html#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="./../mongodb/language-specific-views-in-mongodb-3-4/index.html" rel="bookmark">Language-Specific Views in MongoDB 3.4</a></h2>
				
				<div class="entry">
										<h1>Language-Specific Views in MongoDB 3.4</h1>
<h4>Introduction</h4>
<p>This post shows you how to create multiple language-specific views on top of a common collection. Each view is optimized for its language with a collated index which only presents entries for documents in that language. Additionally, each view excludes some fields from the underlying collection ‚Äì further limiting the data that can be seen through the that view. Finally, user-defined roles are created to restrict users to just the view(s) they should be able to see, ensuring they can only access the data that they&#8217;re entitled to.</p>
<p>In the course of setting up this environment, a number of features are demonstrated:</p>
<ul>
<li><strong><a href="https://docs.mongodb.com/master/core/views/#reference-views">Read-Only Views</a></strong> (<em>New in MongoDB 3.4</em>): DBAs can define non-materialized views that expose only a subset of data from an underlying collection, i.e. a view that filters out entire documents or specific fields, such as Personally Identifiable Information (PII) from sales data or health records. As a result, risks of data exposure are dramatically reduced. DBAs can define a view of a collection that&#8217;s generated from an aggregation over another collection(s) or view.</li>
<li><strong><a href="https://docs.mongodb.com/master/reference/collation/">Multiple Language Collations</a></strong> (<em>New in MongoDB 3.4</em>): Applications addressing global audiences require handling content that spans many languages. Each language has different rules governing the comparison and sorting of data. MongoDB collations allow users to build applications that adhere to these language-specific comparison rules for over 100 different languages and locales. Developers can specify collations for collections, indexes, views, or for individual operations.</li>
<li><strong><a href="https://docs.mongodb.com/manual/core/index-partial/">Partial Indexes</a></strong>: Partial indexes balance delivering good query performance while consuming fewer system resources. For example, consider an order processing application. The <code>order</code> collection is frequently queried by the application to display all incomplete orders for a particular user. Building an index on the userID field of the collection is necessary for good performance. However, only a small percentage of orders are in progress at a given time. Limiting the index on <code>userID</code> to contain only orders that are in the ‚Äúactive‚Äù state could reduce the number of index entries from millions to thousands, saving working set memory and disk space, while speeding up queries even further as smaller indexes result in faster searches.</li>
<li><strong><a href="https://docs.mongodb.com/manual/core/security-user-defined-roles/">User Defined Roles</a></strong>: User-defined roles, enable administrators to assign finely-grained privileges to users and applications, based on the specific functionality they require. MongoDB provides the ability to specify user privileges at both the database, collection, and view levels.</li>
<li><strong><a href="https://www.mongodb.com/products/compass">MongoDB Compass</a></strong>: MongoDB Compass is the easiest way for DBAs to explore and manage MongoDB data. As the GUI for MongoDB, Compass enables users to visually explore their data, and run ad-hoc queries in seconds ‚Äì all with zero knowledge of MongoDB&#8217;s query language. The latest Compass release expands functionality to allow users to manipulate documents directly from the GUI, optimize performance, and create data governance controls. </li>
</ul>
<h4>The Data Set</h4>
<p>The example used in this post is built on a collection containing documents for customers from multiple countries ‚Äì one of the fields indicates a customer&#8217;s country, but there is no field that identifies their spoken language. To fix that, we infer their language from their country to create a new <code>language</code> field in each document:</p>
<pre><code class="js">db.customers.updateMany(
    {country: "China"},
    {$set: {language: "Chinese"}})

db.customers.updateMany(
    {country: "Germany"},
    {$set: {language: "German"}})

db.customers.updateMany(
    {country: {$in: ["USA", "Canada", "United Kingdom"]}},
    {$set: {language: "English"}})
</code></pre>
<p>A typical document now looks like this:</p>
<pre><code class="js">db.customers.findOne()
{
    "_id" : ObjectId("57fb8fbb99b01440193088eb"),
    "first_name" : "Ben",
    "last_name" : "Dixon",
    "country" : "Germany",
    "avatar" : "https://robohash.org/quiseumquam.bmp?size=50x50&amp;set=set1",
    "ip_address" : "10.102.15.35",
    "dependents" : [
        {
            "name" : "Ben",
            "birthday" : "12-Apr-1994"
        },
        {
            "name" : "Lucas",
            "birthday" : "22-Jun-2016"
        },
        {
            "name" : "Erik",
            "birthday" : "05-Jul-2005"
        }
    ],
    "birthday" : "02-Jul-1964",
    "salary" : "¬£910070.80",
    "skills" : [
        {
            "skill" : "Cvent"
        },
        {
            "skill" : "TKI"
        }
    ],
    "gender" : "Male",
    "language" : "German"
}
</code></pre>
<p>You might ask why we need to add this extra field rather than simply calculating the language each time it&#8217;s needed? The answer is that multiple countries share the same language and partial indexes don&#8217;t allow us to use the <code>$or</code> or <code>$in</code> operators.</p>
<p>At this stage, the only index on the collection is on the <code>_id</code> field:</p>
<pre><code class="js">db.customers.getIndexes()
[
    {
        "v" : 2,
        "key" : {
            "_id" : 1
        },
        "name" : "_id_",
        "ns" : "production.customers"
    }
]
</code></pre>
<p>If you want to work through this example for yourself then the following steps will populate a collection called &#8220;customers&#8221; in a database called <code>production</code>:</p>
<pre><code class="bash">curl -o customers.tgz http://clusterdb.com/upload/customers.tgz
tar fxz customers.tgz
mongorestore
</code></pre>
<p>There should be 111,000 documents in the collection after running <code>mongorestore</code>:</p>
<pre><code class="js">use production
db.customers.findOne()
{
    "_id" : ObjectId("57fb8fbb99b01440193088eb"),
    "first_name" : "Ben",
    "last_name" : "Dixon",
    "country" : "Germany",
    "avatar" : "https://robohash.org/quiseumquam.bmp?size=50x50&amp;set=set1",
    "ip_address" : "10.102.15.35",
    "dependents" : [
        {
            "name" : "Ben",
            "birthday" : "12-Apr-1994"
        },
        {
            "name" : "Lucas",
            "birthday" : "22-Jun-2016"
        },
        {
            "name" : "Erik",
            "birthday" : "05-Jul-2005"
        }
    ],
    "birthday" : "02-Jul-1964",
    "salary" : "¬£910070.80",
    "skills" : [
        {
            "skill" : "Cvent"
        },
        {
            "skill" : "TKI"
        }
    ],
    "gender" : "Male",
    "language" : "German"
}

db.customers.count()
111000
</code></pre>
<h4>Adding Indexes</h4>
<p>Collations ‚Äì allow values to be compared and sorted using rules specific to a local language. In this example, we are supporting 3 languages: English, German, and Chinese. For each of these languages, a collated index will later be used to correctly sort the customers based on their last and first name.</p>
<p>To this end, collation-specific, compound (<code>last_name</code> + <code>first_name</code>) indexes are created:</p>
<pre><code class="js">db.customers.createIndex( 
    {last_name: 1, first_name : 1 }, 
    {name: "chinese_name_index",
     collation: {locale: "zh" },
     partialFilterExpression: { language: "Chinese" } 
    }
);

db.customers.createIndex( 
    {last_name: 1, first_name : 1 }, 
    {name: "english_name_index",
     collation: {locale: "en" },
     partialFilterExpression: { language: "English" } 
    }
);

db.customers.createIndex( 
    {last_name: 1, first_name : 1 }, 
    {name: "german_name_index",
     collation: {locale: "de" },
     partialFilterExpression: { language: "German" } 
    }
);
</code></pre>
<p>The exact behaviour of comparisons and sorting using the collated index can be further refined by including additional parameters alongside the <code>locale</code> in the collation documentation. Details of these optional parameters can be found in the <a href="https://docs.mongodb.com/master/reference/collation/">collation documentation</a>.</p>
<p>Note that each of those indexes is partial, only containing entries for document where <code>language</code> is set to the matching value. This saves memory and disk space, and speeds up both reads and writes.</p>
<p>This is the final set of indexes:</p>
<pre><code class="js">db.customers.getIndexes()
[
    {
        "v" : 2,
        "key" : {
            "_id" : 1
        },
        "name" : "_id_",
        "ns" : "production.customers"
    },
    {
        "v" : 2,
        "key" : {
            "last_name" : 1,
            "first_name" : 1
        },
        "name" : "german_name_index",
        "ns" : "production.customers",
        "partialFilterExpression" : {
            "language" : "German"
        },
        "collation" : {
            "locale" : "de",
            "caseLevel" : false,
            "caseFirst" : "off",
            "strength" : 3,
            "numericOrdering" : false,
            "alternate" : "non-ignorable",
            "maxVariable" : "punct",
            "normalization" : false,
            "backwards" : false,
            "version" : "57.1"
        }
    },
    {
        "v" : 2,
        "key" : {
            "last_name" : 1,
            "first_name" : 1
        },
        "name" : "chinese_name_index",
        "ns" : "production.customers",
        "partialFilterExpression" : {
            "language" : "Chinese"
        },
        "collation" : {
            "locale" : "zh",
            "caseLevel" : false,
            "caseFirst" : "off",
            "strength" : 3,
            "numericOrdering" : false,
            "alternate" : "non-ignorable",
            "maxVariable" : "punct",
            "normalization" : false,
            "backwards" : false,
            "version" : "57.1"
        }
    },
    {
        "v" : 2,
        "key" : {
            "last_name" : 1,
            "first_name" : 1
        },
        "name" : "english_name_index",
        "ns" : "production.customers",
        "partialFilterExpression" : {
            "language" : "English"
        },
        "collation" : {
            "locale" : "en",
            "caseLevel" : false,
            "caseFirst" : "off",
            "strength" : 3,
            "numericOrdering" : false,
            "alternate" : "non-ignorable",
            "maxVariable" : "punct",
            "normalization" : false,
            "backwards" : false,
            "version" : "57.1"
        }
    }
]
</code></pre>
<h4>Create Views</h4>
<p>A view is created for each language to:</p>
<ul>
<li>Filter out any documents where the <code>language</code> field doesn&#8217;t match that of the view</li>
<li>Remove the <code>salary</code>, <code>country</code>, and <code>language</code> fields</li>
<li>Indicate which collation should be used</li>
</ul>
<pre><code class="js">db.createView(
    "chineseSpeakersRedacted",
    "customers",
    [
        {$match: {
            language: "Chinese",
            last_name: {$exists: true}
        }},
        {$project: {
            salary: 0, 
            country: 0,
            language: 0
            }
        }
    ],
    {collation: {locale: "zh"}}
)

db.createView(
    "englishSpeakersRedacted",
    "customers",
    [
        {$match: {
            language: "English",
            last_name: {$exists: true}
        }},
        {$project: {
            salary: 0, 
            country: 0,
            language: 0
            }
        }
    ],
    {collation: {locale: "en"}}
)

db.createView(
    "germanSpeakersRedacted",
    "customers",
    [
        {$match: {
            language: "German",
            last_name: {$exists: true}
        }},
        {$project: {
            salary: 0, 
            country: 0,
            language: 0
            }
        }
    ],
    {collation: {locale: "de"}}
)
</code></pre>
<p>You might ask why <code>last_name: {$exists: true}</code> is included in the <code>$match</code> stage? The reason is that it encourages the optimizer to use our language-specific partial indexes when using these views.</p>
<p>Note that this is using the <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/">MongoDB Aggregation Framework</a> and so you could add lots of other <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/">operations</a>, including: unwinding arrays, looking up values from other collections, grouping data, and adding new, computed fields.</p>
<p>The views now appear like collections and can be queried in the same manner (note that they are ready-only):</p>
<pre><code class="js">show collections

chineseSpeakersRedacted
customers
englishSpeakersRedacted
germanSpeakersRedacted
system.views

db.germanSpeakersRedacted.find({last_name: "Cole"}, {first_name:1, _id:0, gender:1}).sort({first_name: 1})
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Amelie", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anna", "gender" : "Female" }
{ "first_name" : "Anton", "gender" : "Male" }
{ "first_name" : "Anton", "gender" : "Male" }
{ "first_name" : "Anton", "gender" : "Male" }
</code></pre>
<p>The query above searches for all documents where the <code>last_name</code> is <code>Cole</code> (because this query is using the German view, behind the scenes, all non-German documents have already been filtered out), discards all but the <code>first_name</code> and <code>gender</code> fields, and then sorts by the <code>first_name</code> (using the German collation).</p>
<p><code>explain()</code> confirms that the German collation index was used:</p>
<pre><code class="js">db.germanSpeakersRedacted.find({last_name: "Cole"}, {first_name:1, _id:0, gender:1}).sort({first_name: 1}).explain()
{
    "stages" : [
        {
            "$cursor" : {
                "query" : {
                    "$and" : [
                        {
                            "language" : "German",
                            "last_name" : {
                                "$exists" : true
                            }
                        },
                        {
                            "last_name" : "Cole"
                        }
                    ]
                },
                "fields" : {
                    "first_name" : 1,
                    "gender" : 1,
                    "_id" : 0
                },
                "queryPlanner" : {
                    "plannerVersion" : 1,
                    "namespace" : "production.customers",
                    "indexFilterSet" : false,
                    "parsedQuery" : {
                        "$and" : [
                            {
                                "language" : {
                                    "$eq" : "German"
                                }
                            },
                            {
                                "last_name" : {
                                    "$eq" : "Cole"
                                }
                            },
                            {
                                "last_name" : {
                                    "$exists" : true
                                }
                            }
                        ]
                    },
                    "collation" : {
                        "locale" : "de",
                        "caseLevel" : false,
                        "caseFirst" : "off",
                        "strength" : 3,
                        "numericOrdering" : false,
                        "alternate" : "non-ignorable",
                        "maxVariable" : "punct",
                        "normalization" : false,
                        "backwards" : false,
                        "version" : "57.1"
                    },
                    "winningPlan" : {
                        "stage" : "FETCH",
                        "filter" : {
                            "$and" : [
                                {
                                    "last_name" : {
                                        "$exists" : true
                                    }
                                },
                                {
                                    "language" : {
                                        "$eq" : "German"
                                    }
                                }
                            ]
                        },
                        "inputStage" : {
                            "stage" : "IXSCAN",
                            "keyPattern" : {
                                "last_name" : 1,
                                "first_name" : 1
                            },
                            "indexName" : "german_name_index",
                            "collation" : {
                                "locale" : "de",
                                "caseLevel" : false,
                                "caseFirst" : "off",
                                "strength" : 3,
                                "numericOrdering" : false,
                                "alternate" : "non-ignorable",
                                "maxVariable" : "punct",
                                "normalization" : false,
                                "backwards" : false,
                                "version" : "57.1"
                            },
                            "isMultiKey" : false,
                            "multiKeyPaths" : {
                                "last_name" : [ ],
                                "first_name" : [ ]
                            },
                            "isUnique" : false,
                            "isSparse" : false,
                            "isPartial" : true,
                            "indexVersion" : 2,
                            "direction" : "forward",
                            "indexBounds" : {
                                "last_name" : [
                                    "[\"-E?1\b\", \"-E?1\b\"]"
                                ],
                                "first_name" : [
                                    "[MinKey, MaxKey]"
                                ]
                            }
                        }
                    },
                    "rejectedPlans" : [ ]
                }
            }
        },
        {
            "$project" : {
                "language" : false,
                "country" : false,
                "salary" : false
            }
        },
        {
            "$sort" : {
                "sortKey" : {
                    "first_name" : 1
                }
            }
        },
        {
            "$project" : {
                "_id" : false,
                "gender" : true,
                "first_name" : true
            }
        }
    ],
    "ok" : 1
</code></pre>
<h4>User-Defined Roles ‚Äì Limiting Access to the Views</h4>
<p>One of the reasons for creating the views was to protect some of the data (the customers&#8217; salaries) as not all users should see this information. At this point, all users can still access the base &#8220;customers&#8221; collection and so we&#8217;ve fallen short of that objective. User-defined roles to the rescue!</p>
<p>We create an <code>admin</code> user that has the built in <a href="https://docs.mongodb.com/manual/reference/built-in-roles/#root"><code>root</code> role</a> and so can access any database, create new users, and perform any other activity:</p>
<pre><code class="js">use admin
db.createUser({
    user: "admin",
    pwd: "secret",
    roles: [
        {role:"root",db:"admin"}
        ]
    })
</code></pre>
<p>The next step is to create a role that only gives its members read access to the <code>germanSpeakersRedacted</code> collection (within the <code>production</code> database):</p>
<pre><code class="js">use admin
db.createRole(
   {
     role: "germanViewer",
     privileges: [
       { resource: { db: "production", collection: "germanSpeakersRedacted" },  actions: [ "find" ] }
     ],
     roles: []
   }
)
</code></pre>
<p>You can then create one or more users that have <code>germanViewer</code> within their defined roles:</p>
<pre><code class="js">use admin
db.createUser({
    user: "germanIT",
    pwd: "secret",
    roles: [
        {role:"germanViewer",db:"admin"}
        ]
    })
</code></pre>
<p>Additional privileges can be added to existing roles using <a href="https://docs.mongodb.com/manual/reference/command/grantPrivilegesToRole/#dbcmd.grantPrivilegesToRole"><code>grantPrivilegesToRole</code></a> and extra roles can be assigned to existing users using <a href="https://docs.mongodb.com/manual/reference/command/grantRolesToUser/#dbcmd.grantRolesToUser"><code>grantRolesToUser</code></a>.</p>
<p>For these access controls to work, users must be created with appropriate permissions and the MongoDB server process must be started with the <code>--auth</code> option:</p>
<pre><code class="bash">mongod --auth
</code></pre>
<p>When connecting to the database as our newly-created <code>admin</code> user, the base <code>customers</code> collection is still accessible:</p>
<pre><code class="js">mongo -u admin -p secret --authenticationDatabase admin

use production
db.customers.findOne()

{
    "_id" : ObjectId("57fb8fbb99b01440193088eb"),
    "first_name" : "Ben",
    "last_name" : "Dixon",
    "country" : "Germany",
    "avatar" : "https://robohash.org/quiseumquam.bmp?size=50x50&amp;set=set1",
    "ip_address" : "10.102.15.35",
    "dependents" : [
        {
            "name" : "Ben",
            "birthday" : "12-Apr-1994"
        },
        {
            "name" : "Lucas",
            "birthday" : "22-Jun-2016"
        },
        {
            "name" : "Erik",
            "birthday" : "05-Jul-2005"
        }
    ],
    "birthday" : "02-Jul-1964",
    "salary" : "¬£910070.80",
    "skills" : [
        {
            "skill" : "Cvent"
        },
        {
            "skill" : "TKI"
        }
    ],
    "gender" : "Male",
    "language" : "German"
}
</code></pre>
<p>When connecting as the <code>germanIT</code> user, only the German view can be accessed:</p>
<pre><code class="js">mongo -u germanIT -p secret --authenticationDatabase admin

use production

show collections
2016-10-28T10:24:03.765+0100 E QUERY    [main] Error: listCollections failed: {
    "ok" : 0,
    "errmsg" : "not authorized on production to execute command { listCollections: 1.0, filter: {} }",
    "code" : 13,
    "codeName" : "Unauthorized"
} :
_getErrorWithCode@src/mongo/shell/utils.js:25:13
DB.prototype._getCollectionInfosCommand@src/mongo/shell/db.js:805:1
DB.prototype.getCollectionInfos@src/mongo/shell/db.js:817:19
DB.prototype.getCollectionNames@src/mongo/shell/db.js:828:16
shellHelper.show@src/mongo/shell/utils.js:748:9
shellHelper@src/mongo/shell/utils.js:645:15
@(shellhelp2):1:1

db.customers.findOne()
2016-10-21T14:40:19.477+0100 E QUERY    [main] Error: error: {
    "ok" : 0,
    "errmsg" : "not authorized on production to execute command { find: \"customers\", filter: {}, limit: 1.0, singleBatch: true }",
    "code" : 13,
    "codeName" : "Unauthorized"
} :
_getErrorWithCode@src/mongo/shell/utils.js:25:13
DBCommandCursor@src/mongo/shell/query.js:702:1
DBQuery.prototype._exec@src/mongo/shell/query.js:117:28
DBQuery.prototype.hasNext@src/mongo/shell/query.js:288:5
DBCollection.prototype.findOne@src/mongo/shell/collection.js:294:10
@(shell):1:1

db.germanSpeakersRedacted.findOne()
{
    "_id" : ObjectId("57fb8fbb99b01440193088eb"),
    "first_name" : "Ben",
    "last_name" : "Dixon",
    "avatar" : "https://robohash.org/quiseumquam.bmp?size=50x50&amp;set=set1",
    "ip_address" : "10.102.15.35",
    "dependents" : [
        {
            "name" : "Ben",
            "birthday" : "12-Apr-1994"
        },
        {
            "name" : "Lucas",
            "birthday" : "22-Jun-2016"
        },
        {
            "name" : "Erik",
            "birthday" : "05-Jul-2005"
        }
    ],
    "birthday" : "02-Jul-1964",
    "skills" : [
        {
            "skill" : "Cvent"
        },
        {
            "skill" : "TKI"
        }
    ],
    "gender" : "Male"
}
</code></pre>
<h4>MongoDB Compass ‚Äì Viewing Views Graphically</h4>
<p>While the <code>mongo</code> shell is very powerful and flexible, it is often easier to understand and navigate your data graphically, this is where <a href="https://www.mongodb.com/products/compass">MongoDB Compass</a> is invaluable. The good news is that MongoDB Compass handles views in exactly the same way as it does collections.</p>
<p>In Figure 1, we can view the documents in the base, <code>customers</code>, collection. Note that the <code>salary</code> value is visible.</p>
<p><em><div id="attachment_4295" style="width: 1366px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Compass_original_schema.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4295" src="./../wp-content/uploads/2016/11/Compass_original_schema.png" alt="View data in MongoDB base customers collection" width="1356" height="840" class="size-full wp-image-4295" srcset="./../wp-content/uploads/2016/11/Compass_original_schema.png 1356w, ./../wp-content/uploads/2016/11/Compass_original_schema-300x186.png 300w, ./../wp-content/uploads/2016/11/Compass_original_schema-768x476.png 768w, ./../wp-content/uploads/2016/11/Compass_original_schema-1024x634.png 1024w" sizes="auto, (max-width: 1356px) 100vw, 1356px"></a><p id="caption-attachment-4295" class="wp-caption-text">Figure 1: View data in base customers collection</p></div></em></p>
<p>Figure 2 confirms that the <code>salary</code> field has been removed from the German view.</p>
<div id="attachment_4298" style="width: 1366px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Compass_german_speakers.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4298" src="./../wp-content/uploads/2016/11/Compass_german_speakers.png" alt="Salary has been redacted from the German view" width="1356" height="841" class="size-full wp-image-4298" srcset="./../wp-content/uploads/2016/11/Compass_german_speakers.png 1356w, ./../wp-content/uploads/2016/11/Compass_german_speakers-300x186.png 300w, ./../wp-content/uploads/2016/11/Compass_german_speakers-768x476.png 768w, ./../wp-content/uploads/2016/11/Compass_german_speakers-1024x635.png 1024w" sizes="auto, (max-width: 1356px) 100vw, 1356px"></a><p id="caption-attachment-4298" class="wp-caption-text">Figure 2: Salary has been redacted from the German view</p></div>
<p>In Figure 3, we see that only Chinese documents have been included in the Chinese view.</p>
<div id="attachment_4299" style="width: 1369px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Compass_Chinese_speakers.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4299" src="./../wp-content/uploads/2016/11/Compass_Chinese_speakers.png" alt="Chinese view contains only Chinese documents" width="1359" height="841" class="size-full wp-image-4299" srcset="./../wp-content/uploads/2016/11/Compass_Chinese_speakers.png 1359w, ./../wp-content/uploads/2016/11/Compass_Chinese_speakers-300x186.png 300w, ./../wp-content/uploads/2016/11/Compass_Chinese_speakers-768x475.png 768w, ./../wp-content/uploads/2016/11/Compass_Chinese_speakers-1024x634.png 1024w" sizes="auto, (max-width: 1359px) 100vw, 1359px"></a><p id="caption-attachment-4299" class="wp-caption-text">Figure 3: Chinese view contains only Chinese documents</p></div>
<h4>Next Steps</h4>
<p>Collation and read-only views are just 2 of the exciting new features added in MongoDB 3.4 ‚Äì read more and these and everything else that&#8217;s new in <a href="https://www.mongodb.com/collateral/mongodb-3.4-whats-new" title="What's new in MongoDB 3.4">MongoDB 3.4: What‚Äôs New</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url=".//mongodb/language-specific-views-in-mongodb-3-4" data-via="wpbeginner" data-text="Language-Specific Views in MongoDB 3.4" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href=".//mongodb/language-specific-views-in-mongodb-3-4"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url=".//mongodb/language-specific-views-in-mongodb-3-4" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=.%2F%2Fmongodb%2Flanguage-specific-views-in-mongodb-3-4&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="./../category/mongodb/index.html" rel="category tag">MongoDB</a> | 
Tags: <a href="./collations/index.html" rel="tag">collations</a>, <a href="./mongodb/index.html" rel="tag">mongodb</a>, <a href="./mongodb-3-4/index.html" rel="tag">mongodb 3.4</a>, <a href="./mongodb-compass/index.html" rel="tag">MongoDB Compass</a>, <a href="./views/index.html" rel="tag">views</a></div>

			</div>			<div id="post-4276" class="post-4276 post type-post status-publish format-standard hentry category-mongodb tag-amazon tag-amazon-kinesis tag-mongodb tag-mongodb-atlas tag-mongodb-compass">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="./../author/andrew/index.html" title="Posts by andrew" rel="author">andrew</a> |
		<a href="./../mongodb/mongodb_amazon_kinesis/index.html">November 8, 2016</a>
			</div>
	<div class="postcomments">
		<a href="./../mongodb/mongodb_amazon_kinesis/index.html#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="./../mongodb/mongodb_amazon_kinesis/index.html" rel="bookmark">Processing Data Streams with Amazon Kinesis and MongoDB Atlas</a></h2>
				
				<div class="entry">
										<p>This post provides an introduction to Amazon Kinesis: its architecture, what it provides, and how it&#8217;s typically used. It goes on to step through how to implement an application where data is ingested by Amazon Kinesis before being processed and then stored in MongoDB Atlas.</p>
<p>This is part of a <a href="./../mongodb/using-mongodb-atlas-from-your-favorite-language-or-framework/index.html">series of posts which examine how to use MongoDB Atlas with a number of complementary technologies and frameworks</a>.</p>
<h2>Introduction to Amazon Kinesis</h2>
<p>The role of Amazon Kinesis is to get large volumes of streaming data into AWS where it can then be processed, analyzed, and moved between AWS services. The service is designed to ingest and store terabytes of data every hour, from multiple sources. Kinesis provides high availability, including synchronous replication within an AWS region. It also transparently handles scalability, adding and removing resources as needed.</p>
<p>Once the data is inside AWS, it can be processed or analyzed immediately, as well as being stored using other AWS services (such as S3) for later use. By storing the data in MongoDB, it can be used both to drive real-time, operational decisions as well as for deeper analysis.</p>
<p>As the number, variety, and velocity of data sources grow, new architectures and technologies are needed. Technologies like Amazon Kinesis and <a href="https://www.mongodb.com/blog/post/mongodb-and-data-streaming-implementing-a-mongodb-kafka-consumer" title="Data Streaming with Apache Kafka &amp; MongoDB">Apache Kafka</a> are focused on ingesting the massive flow of data from multiple fire hoses and then routing it to the systems that need it ‚Äì optionally filtering, aggregating, and analyzing en-route.</p>
<div id="attachment_4277" style="width: 1201px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/kinesis-architecture.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4277" class="wp-image-4277 size-full" src="./../wp-content/uploads/2016/11/kinesis-architecture.png" alt="AWS Kinesis Architecture" width="1191" height="636" srcset="./../wp-content/uploads/2016/11/kinesis-architecture.png 1191w, ./../wp-content/uploads/2016/11/kinesis-architecture-300x160.png 300w, ./../wp-content/uploads/2016/11/kinesis-architecture-768x410.png 768w, ./../wp-content/uploads/2016/11/kinesis-architecture-1024x547.png 1024w" sizes="auto, (max-width: 1191px) 100vw, 1191px"></a><p id="caption-attachment-4277" class="wp-caption-text">Figure 1: AWS Kinesis Architecture</p></div>
<p>Typical data sources include:</p>
<ul>
<li>IoT assets and devices(e.g., sensor readings)</li>
<li>On-line purchases from an ecommerce store</li>
<li>Log files</li>
<li>Video game activity</li>
<li>Social media posts</li>
<li>Financial market data feeds</li>
</ul>
<p>Rather than leave this data to fester in text files, Kinesis can ingest the data, allowing it to be processed to find patterns, detect exceptions, drive operational actions, and provide aggregations to be displayed through dashboards.</p>
<p>There are actually 3 services which make up Amazon Kinesis:</p>
<ul>
<li><strong>Amazon Kinesis Firehose</strong> is the simplest way to load massive volumes of streaming data into AWS. The capacity of your Firehose is adjusted automatically to keep pace with the stream throughput. It can optionally compress and encrypt the data before it&#8217;s stored.</li>
<li><strong>Amazon Kinesis Streams</strong> are similar to the Firehose service but give you more control, allowing for:
<ul>
<li>Multi-stage processing</li>
<li>Custom stream partitioning rules</li>
<li>Reliable storage of the stream data until it has been processed.</li>
</ul>
</li>
<li><strong>Amazon Kinesis Analytics</strong> is the simplest way to process the data once it has been ingested by either Kinesis Firehose or Streams. The user provides SQL queries which are then applied to analyze the data; the results can then be displayed, stored, or sent to another Kinesis stream for further processing.</li>
</ul>
<p>This post focuses on Amazon Kinesis Streams, in particular, implementing a <em>consumer</em> that ingests the data, enriches it, and then stores it in MongoDB.</p>
<h3>Accessing Kinesis Streams ‚Äì the Libraries</h3>
<p>There are multiple ways to read (consume) and write (produce) data with Kinesis Streams:</p>
<ul>
<li><a href="https://www.mongodb.com/blog/post/Amazon%20Kinesis%20Streams%20API">Amazon Kinesis Streams API</a>
<ul>
<li>Provides two APIs for putting data into an Amazon Kinesis stream: <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecord.html">PutRecord</a> and <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecords.html">PutRecords</a></li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/kinesis/latest/dev/developing-producers-with-kpl.html">Amazon Kinesis Producer Library (KPL)</a>
<ul>
<li>Easy to use and highly configurable Java library that helps you put data into an Amazon Kinesis stream. Amazon Kinesis Producer Library (KPL) presents a simple, asynchronous, high throughput, and reliable interface.</li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/streams/latest/dev/writing-with-agents.html">Amazon Kinesis Agent</a>
<ul>
<li>The agent continuously monitors a set of files and sends new entries to your Stream or Firehose.</li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/kinesis/latest/dev/developing-consumer-apps-with-kcl.html">Amazon Kinesis Client Library (KCL)</a>
<ul>
<li>A Java library that helps you easily build Amazon Kinesis Applications for reading and processing data from an Amazon Kinesis stream. KCL handles issues such as adapting to changes in stream volume, load-balancing streaming data, coordinating distributed services, providing fault-tolerance, and processing data.</li>
</ul>
</li>
<li><a href="https://github.com/awslabs/amazon-kinesis-client/tree/master/src/main/java/com/amazonaws/services/kinesis/multilang">Amazon Kinesis Client Library MultiLangDemon</a>
<ul>
<li>The MultiLangDemon is used as a proxy by non-Java applications to use the Kinesis Client Library.</li>
</ul>
</li>
<li><a href="https://github.com/awslabs/amazon-kinesis-connectors">Amazon Kinesis Connector Library</a>
<ul>
<li>A library that helps you easily integrate Amazon Kinesis with other AWS services and third-party tools.</li>
</ul>
</li>
<li><a href="https://github.com/awslabs/kinesis-storm-spout">Amazon Kinesis Storm Spout</a>
<ul>
<li>A library that helps you easily integrate Amazon Kinesis Streams with Apache Storm.</li>
</ul>
</li>
</ul>
<p>The example application in this post use the Kinesis Agent and the Kinesis Client Library MultiLangDemon (with Node.js).</p>
<h2>Role of MongoDB Atlas</h2>
<p>MongoDB is a distributed database delivering a flexible schema for rapid application development, rich queries, idiomatic drivers, and built in redundancy and scale-out. This makes it the go-to database for anyone looking to build modern applications.</p>
<p><a href="https://www.mongodb.com/cloud">MongoDB Atlas</a> is a hosted database service for MongoDB. It provides all of the features of MongoDB, without the operational heavy lifting required for any new application. MongoDB Atlas is available on demand through a pay-as-you-go model and billed on an hourly basis, letting you focus on what you do best.</p>
<p>It‚Äôs easy to get started ‚Äì use a simple GUI to select the instance size, region, and features you need. MongoDB Atlas provides:</p>
<ul>
<li>Security features to protect access to your data</li>
<li>Built in replication for always-on availability, tolerating complete data center failure</li>
<li>Backups and point in time recovery to protect against data corruption</li>
<li>Fine-grained monitoring to let you know when to scale. Additional instances can be provisioned with the push of a button</li>
<li>Automated patching and one-click upgrades for new major versions of the database, enabling you to take advantage of the latest and greatest MongoDB features</li>
<li>A choice of regions and billing options</li>
</ul>
<p>Like Amazon Kinesis, MongoDB Atlas is a natural fit for users looking to simplify their development and operations work, letting them focus on what makes their application unique rather than commodity (albeit essential) plumbing. Also like Kinesis, you only pay for MongoDB Atlas when you&#8217;re using it with no upfront costs and no charges after you terminate your cluster.</p>
<h2>Example Application</h2>
<p>The rest of this post focuses on building a system to process log data. There are 2 sources of log data:</p>
<ol>
<li>A simple client that acts as a Kinesis Streams <em>producer</em>, generating sensor readings and writing them to a stream</li>
<li><em>Amazon Kinesis Agent</em> monitoring a SYSLOG file and sending each log event to a stream</li>
</ol>
<p>In both cases, the data is consumed from the stream using the same <em>consumer</em>, which adds some metadata to each entry and then stores it in MongoDB Atlas.</p>
<h3>Create Kinesis IAM Policy in AWS</h3>
<p>From the <a href="https://console.aws.amazon.com/iam">IAM section of the AWS console</a> use the wizard to create a new policy. The policy should grant permission to perform specific actions on a particular stream (in this case &#8220;ClusterDBStream&#8221;) and the results should look similar to this:</p>
<p><script src="https://gist.github.com/am-MongoDB/aab01421f66be44ae5d53fd2e4d031ee.js"></script></p>
<p>Next, create a new user and associate it with the new policy. <strong>Important</strong>: Take a note of the <em>AWS_ACCESS_KEY_ID</em> and <em>AWS_SECRET_ACCESS_KEY</em>.</p>
<h3>Create MongoDB Atlas Cluster</h3>
<p>Register with <a href="https://www.mongodb.com/cloud" title="MongoDB Atlas cloud-hosted database service">MongoDB Atlas</a> and use the simple GUI to select the instance size, region, and features you need (Figure 2).</p>
<p><a href="./../wp-content/uploads/2016/11/Create_MongoDB_Atlas_Cluster.gif"><img loading="lazy" decoding="async" class="alignright size-full wp-image-4278" src="./../wp-content/uploads/2016/11/Create_MongoDB_Atlas_Cluster.gif" alt="create mongodb atlas cluster" width="960" height="540"></a></p>
<p>Create a user with read and write privileges for just the database that will be used for your application, as shown in Figure 3.</p>
<div id="attachment_4279" style="width: 833px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Create_Application_User_in_MongoDB_Atlas.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4279" class="size-full wp-image-4279" src="./../wp-content/uploads/2016/11/Create_Application_User_in_MongoDB_Atlas.png" alt="Creating an Application user in MongoDB Atlas" width="823" height="922" srcset="./../wp-content/uploads/2016/11/Create_Application_User_in_MongoDB_Atlas.png 823w, ./../wp-content/uploads/2016/11/Create_Application_User_in_MongoDB_Atlas-268x300.png 268w, ./../wp-content/uploads/2016/11/Create_Application_User_in_MongoDB_Atlas-768x860.png 768w" sizes="auto, (max-width: 823px) 100vw, 823px"></a><p id="caption-attachment-4279" class="wp-caption-text">Figure 3: Creating an Application user in MongoDB Atlas</p></div>
<p>You must also add the IP address of your application server to the IP Whitelist in the MongoDB Atlas security tab (Figure 4). Note that if multiple application servers will be accessing MongoDB Atlas then an IP address range can be specified in CIDR format (IP Address/number of significant bits).</p>
<div id="attachment_4280" style="width: 1770px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4280" class="wp-image-4280 size-full" src="./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas.png" alt="Add App Server IP Address(es) to MongoDB Atlas" width="1760" height="876" srcset="./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas.png 1760w, ./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas-300x149.png 300w, ./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas-768x382.png 768w, ./../wp-content/uploads/2016/11/Add_IP_Address_Range_to_MongoDB_Atlas-1024x510.png 1024w" sizes="auto, (max-width: 1760px) 100vw, 1760px"></a><p id="caption-attachment-4280" class="wp-caption-text">Figure 4: Add App Server IP Address(es) to MongoDB Atlas</p></div>
<p>If your application server(s) are running in AWS, then an alternative to IP Whitelisting is to <a href="https://docs.atlas.mongodb.com/setup-cluster-security/" title="configure a VPC (Virtual Private Cloud) Peering relationship between your MongoDB Atlas group and AWS">configure a VPC (Virtual Private Cloud) Peering relationship between your MongoDB Atlas group and the VPC containing your AWS resources</a>. This removes the requirement to add and remove IP addresses as AWS reschedules functions, and is especially useful when using highly dynamic services such as AWS Lambda.</p>
<p>Click the &#8220;Connect&#8221; button and make a note of the URI that should be used when connecting to the database (note that you will substitute the user name and password with ones that you&#8217;ve just created).</p>
<h3>App Part 1 ‚Äì Kinesis/Atlas Consumer</h3>
<p>The code and configuration files in Parts 1 &amp; 2 are based on the sample consumer and producer included with the <a href="https://github.com/awslabs/amazon-kinesis-client-nodejs" title="Amazon Kinesis Client Library for Node.js">client library for Node.js (MultiLangDaemon)</a>.</p>
<p>Install the <a href="https://github.com/awslabs/amazon-kinesis-client-nodejs">Node.js client library</a>:</p>
<pre><code>git clone https://github.com/awslabs/amazon-kinesis-client-nodejs.git
cd amazon-kinesis-client-nodejs
npm install
</code></pre>
<p>Install the <a href="https://mongodb.github.io/node-mongodb-native/" title="The next generation Node.JS driver for MongoDB">MongoDB Node.js Driver</a>:</p>
<pre><code>npm install --save mongodb
</code></pre>
<p>Move to the consumer sample folder:</p>
<pre><code>cd samples/basic_sample/consumer/
</code></pre>
<p>Create a configuration file (&#8220;logging_consumer.properties&#8221;), taking care to set the correct stream and application names and AWS region:</p>
<p><script src="https://gist.github.com/am-MongoDB/5edcbe58788cbf40c1776a8f2cb01e1d.js"></script></p>
<p>The code for working with MongoDB can be abstracted to a helper file (&#8220;db.js&#8221;):</p>
<p><script src="https://gist.github.com/am-MongoDB/a04cc764301e0911f59a7b0df2bf5abe.js"></script></p>
<p>Create the application Node.js file (&#8220;logging_consumer_app.js&#8221;), making sure to replace the database user and host details in &#8220;mongodbConnectString&#8221; with your own:</p>
<p><script src="https://gist.github.com/am-MongoDB/3941d20f2f530ae52bb7bd62a3532b69.js"></script></p>
<p>Note that this code adds some metadata to the received object before writing it to MongoDB. At this point, it is also possible to filter objects based on any of their fields.</p>
<p>Note also that this Node.js code logs a lot of information to the &#8220;application log&#8221; file (including the database password!); this is for debugging and would be removed from a real application.</p>
<p>The simplest way to have the application use the user credentials (noted when creating the user in AWS IAM) is to export them from the shell where the application will be launched:</p>
<pre><code>export AWS_ACCESS_KEY_ID=????????????????????
export AWS_SECRET_ACCESS_KEY=????????????????????????????????????????
</code></pre>
<p>Finally, launch the consumer application:</p>
<pre><code>../../../bin/kcl-bootstrap --java /usr/bin/java -e -p ./logging_consumer.properties
</code></pre>
<p>Check the &#8220;application.log&#8221; file for any errors.</p>
<h3>App Part 2 ‚Äì Kinesis Producer</h3>
<p>As for the consumer, export the credentials for the user created in AWS IAM:</p>
<pre><code>cd amazon-kinesis-client-nodejs/samples/basic_sample/producer

export AWS_ACCESS_KEY_ID=????????????????????
export AWS_SECRET_ACCESS_KEY=????????????????????????????????????????
</code></pre>
<p>Create the configuration file (&#8220;config.js&#8221;) and ensure that the correct AWS region and stream are specified:</p>
<p><script src="https://gist.github.com/am-MongoDB/0ab029c1071a6a715a553b00d2396f40.js"></script></p>
<p>Create the producer code (&#8220;logging_producer.js&#8221;):</p>
<p><script src="https://gist.github.com/am-MongoDB/0ee9d95fc1abcaf0949245811dcf7d6e.js"></script></p>
<p>The producer is launched from &#8220;logging_producer_app.js&#8221;:</p>
<p><script src="https://gist.github.com/am-MongoDB/a598575392fa0f29742fa0952f90ecd8.js"></script></p>
<p>Run the producer:</p>
<pre><code>node logging_producer_app.js
</code></pre>
<p>Check the consumer and producer &#8220;application.log&#8221; files for errors.</p>
<p>At this point, data should have been written to MongoDB Atlas. Using the connection string provided after clicking the &#8220;Connect&#8221; button in MongoDB Atlas, connect to the database and confirm that the documents have been added:</p>
<p><script src="https://gist.github.com/am-MongoDB/66ae718bb72659e179a1073bfd1fbeca.js"></script></p>
<h3>App Part 3 ‚Äì Capturing Live Logs Using Amazon Kinesis Agent</h3>
<p>Using the same consumer, the next step is to stream real log data. Fortunately, this doesn&#8217;t require any additional code as the Kinesis Agent can be used to monitor files and add every new entry to a Kinesis Stream (or Firehose).</p>
<p>Install the Kinesis Agent:</p>
<pre><code>sudo yum install ‚Äìy aws-kinesis-agent
</code></pre>
<p>and edit the configuration file to use the correct AWS region, user credentials, and stream in &#8220;/etc/aws-kinesis/agent.json&#8221;:</p>
<p><script src="https://gist.github.com/am-MongoDB/41f45486b4ba170a4b7474cb3d63b45b.js"></script></p>
<p>&#8220;/var/log/messages&#8221; is a SYSLOG file and so a &#8220;dataProcessingOptions&#8221; field is included in the configuration to automatically convert each log into a JSON document before writing it to the Kinesis Stream.</p>
<p>The agent will not run as root and so the permissions for &#8220;/var/log/messages&#8221; need to be made more permissive:</p>
<pre><code>sudo chmod og+r /var/log/messages
</code></pre>
<p>The agent can now be started:</p>
<pre><code>sudo service aws-kinesis-agent start
</code></pre>
<p>Monitor the agent&#8217;s log file to see what it&#8217;s doing:</p>
<pre><code>sudo tail -f /var/log/aws-kinesis-agent/aws-kinesis-agent.log
</code></pre>
<p>If there aren&#8217;t enough logs being generated on the machine then extra ones can be injected manually for testing:</p>
<pre><code>logger -i This is a test log
</code></pre>
<p>This will create a log with the &#8220;program&#8221; field set to your username (in this case, &#8220;ec2-user&#8221;). Check that the logs get added to MongoDB Atlas:</p>
<p><script src="https://gist.github.com/am-MongoDB/777754041547d2a5bb7f1017a34a9c2e.js"></script></p>
<h3>Checking the Data with MongoDB Compass</h3>
<p>To visually navigate through the MongoDB schema and data, <a href="https://www.mongodb.com/download-center?jmp=nav#compass">download and install MongoDB Compass</a>. Use your MongoDB Atlas credentials to connect Compass to your MongoDB database (the hostname should refer to the primary node in your replica set or a &#8220;mongos&#8221; process if your MongoDB cluster is sharded).</p>
<p>Navigate through the structure of the data in the &#8220;clusterdb&#8221; database (Figure 5) and view the JSON documents.</p>
<div id="attachment_4281" style="width: 969px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Compass_schema.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4281" class="size-full wp-image-4281" src="./../wp-content/uploads/2016/11/Compass_schema.png" alt="Explore Schema Using MongoDB Compass" width="959" height="958" srcset="./../wp-content/uploads/2016/11/Compass_schema.png 959w, ./../wp-content/uploads/2016/11/Compass_schema-150x150.png 150w, ./../wp-content/uploads/2016/11/Compass_schema-300x300.png 300w, ./../wp-content/uploads/2016/11/Compass_schema-768x767.png 768w, ./../wp-content/uploads/2016/11/Compass_schema-144x144.png 144w" sizes="auto, (max-width: 959px) 100vw, 959px"></a><p id="caption-attachment-4281" class="wp-caption-text">Figure 5: Explore Schema Using MongoDB Compass</p></div>
<p>Clicking on a value builds a query and then clicking &#8220;Apply&#8221; filters the results (Figure 6).</p>
<div id="attachment_4282" style="width: 721px" class="wp-caption alignright"><a href="./../wp-content/uploads/2016/11/Filter_MongoDB_Compass_Results.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4282" class="size-full wp-image-4282" src="./../wp-content/uploads/2016/11/Filter_MongoDB_Compass_Results.png" alt="View Filtered Documents in MongoDB Compass" width="711" height="907" srcset="./../wp-content/uploads/2016/11/Filter_MongoDB_Compass_Results.png 711w, ./../wp-content/uploads/2016/11/Filter_MongoDB_Compass_Results-235x300.png 235w" sizes="auto, (max-width: 711px) 100vw, 711px"></a><p id="caption-attachment-4282" class="wp-caption-text">Figure 6: View Filtered Documents in MongoDB Compass</p></div>
<h3>Add Document Validation Rules</h3>
<p>One of MongoDB‚Äôs primary attractions for developers is that it gives them the ability to start application development without first needing to define a formal schema. Operations teams appreciate the fact that they don‚Äôt need to perform a time-consuming schema upgrade operation every time the developers need to store a different attribute.</p>
<p>This is well suited to the application built in this post as logs from different sources are likely to include different attributes. There are however some attributes that we always expect to be there (e.g., the metadata that the application is adding). For applications reading the documents from this collection to be able to rely on those fields being present, the documents should be validated before they are written to the database. Prior to MongoDB 3.2, those checks had to be implemented in the application but they can now be performed by the database itself.</p>
<p>Executing a single command from the &#8220;mongo&#8221; shell adds the document checks:</p>
<p><script src="https://gist.github.com/am-MongoDB/0d9c7cb0df7c7bcb3961a43c9d99e607.js"></script></p>
<p>The above command adds multiple checks:</p>
<ul>
<li>The &#8220;program&#8221; field exists and contains a string</li>
<li>There&#8217;s a sub-document called &#8220;metadata&#8221; containing at least 2 fields:</li>
<li>&#8220;mongoLabel&#8221; which must be a string</li>
<li>&#8220;timeAdded&#8221; which must be a date</li>
</ul>
<p>Test that the rules are correctly applied when attempting to write to the database:</p>
<p><script src="https://gist.github.com/am-MongoDB/21d1ef80caf7a69e9d6962cca0667f55.js"></script></p>
<h3>Cleaning Up (IMPORTANT!)</h3>
<p>Remember that you will continue to be charged for the services even when you&#8217;re no longer actively using them. If you no longer need to use the services then clean up:</p>
<ul>
<li>From the MongoDB Atlas GUI, select your Cluster, click on the ellipses and select &#8220;Terminate&#8221;.</li>
<li>From the AWS management console select the Kinesis service, then Kinesis Streams, and then delete your stream.</li>
<li>From the AWS management console select the DynamoDB service, then tables, and then delete your table.</li>
</ul>
<h2>Using MongoDB Atlas with Other Frameworks and Services</h2>
<p>We have detailed walkthroughs for using MongoDB Atlas with several programming languages and frameworks, as well as generic instructions that can be used with others. They can all be found in <a href="./../mongodb/using-mongodb-atlas-from-your-favorite-language-or-framework/index.html">Using MongoDB Atlas From Your Favorite Language or Framework</a>.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url=".//mongodb/mongodb_amazon_kinesis" data-via="wpbeginner" data-text="Processing Data Streams with Amazon Kinesis and MongoDB Atlas" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href=".//mongodb/mongodb_amazon_kinesis"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url=".//mongodb/mongodb_amazon_kinesis" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=.%2F%2Fmongodb%2Fmongodb_amazon_kinesis&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="./../category/mongodb/index.html" rel="category tag">MongoDB</a> | 
Tags: <a href="./amazon/index.html" rel="tag">Amazon</a>, <a href="./amazon-kinesis/index.html" rel="tag">Amazon Kinesis</a>, <a href="./mongodb/index.html" rel="tag">mongodb</a>, <a href="./mongodb-atlas/index.html" rel="tag">MongoDB Atlas</a>, <a href="./mongodb-compass/index.html" rel="tag">MongoDB Compass</a></div>

			</div>			<div id="post-4215" class="post-4215 post type-post status-publish format-standard hentry category-mongodb tag-javascript tag-mongodb tag-mongodb-atlas tag-mongodb-compass tag-node-js tag-pencilblue">
				
				<div class="postmeta">	<div class="postmeta_links">
		<a href="./../author/andrew/index.html" title="Posts by andrew" rel="author">andrew</a> |
		<a href="./../mongodb/using-pencilblue-with-mongodb-atlas/index.html">September 15, 2016</a>
			</div>
	<div class="postcomments">
		<a href="./../mongodb/using-pencilblue-with-mongodb-atlas/index.html#respond">No comments</a>	</div>
	<div class="clear"></div>
</div>

				<h2 class="post-title"><a href="./../mongodb/using-pencilblue-with-mongodb-atlas/index.html" rel="bookmark">Using PencilBlue with MongoDB Atlas</a></h2>
				
				<div class="entry">
										<p>PencilBlue is a Node.js based, open source blogging and Content Management System, targeted at enterprise grade websites.</p>
<p>This post explains why MongoDB Atlas is an ideal choice for PencilBlue and then goes on to show how to configure PencilBlue to use it.</p>
<h1>Why MongoDB Atlas is the Ideal Database for PencilBlue</h1>
<p>MongoDB delivers flexible schemas, rich queries, an idiomatic Node.js driver, and simple to use high availability and scaling. This makes it the go-to database for anyone looking to build applications on Node.js.</p>
<p><a href="https://www.mongodb.com/cloud">MongoDB Atlas</a> provides all of the features of MongoDB, without the operational heavy lifting required for any new application. MongoDB Atlas is available on demand through a pay-as-you-go model and billed on an hourly basis, letting you focus on what you do best.</p>
<p>It‚Äôs easy to get started ‚Äì use a simple GUI to select the instance size, region, and features you need. MongoDB Atlas provides:</p>
<ul>
<li>Security features to protect access to your data</li>
<li>Built in replication for always-on availability, tolerating complete data center failure</li>
<li>Backups and point in time recovery to protect against data corruption</li>
<li>Fine-grained monitoring to let you know when to scale. Additional instances can be provisioned with the push of a button</li>
<li>Automated patching and one-click upgrades for new major versions of the database, enabling you to take advantage of the latest and greatest MongoDB features</li>
<li>A choice of cloud providers, regions, and billing options</li>
</ul>
<p>Like PencilBlue, MongoDB Atlas is a natural fit for users looking to simplify their development and operations work, letting them focus on what makes their application unique rather than commodity (albeit essential) plumbing.</p>
<h1>Installing PencilBlue and Connecting it to MongoDB Atlas</h1>
<p>Before starting with PencilBlue, you should launch your MongoDB cluster using <a href="https://www.mongodb.com/cloud">MongoDB Atlas</a> and then (optionally) create a user with read and write privileges for just the database that will be used for this project, as shown in Figure 1.</p>
<div id="attachment_4216" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_user.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4216" src="./../wp-content/uploads/2016/09/PencilBlue_user-910x1024.png" alt="Adding a PencilBlue User to MongoDB Atlas" width="480" height="540" class="size-large wp-image-4216" srcset="./../wp-content/uploads/2016/09/PencilBlue_user-910x1024.png 910w, ./../wp-content/uploads/2016/09/PencilBlue_user-267x300.png 267w, ./../wp-content/uploads/2016/09/PencilBlue_user-768x864.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_user.png 1596w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4216" class="wp-caption-text">Figure 1: Adding a PencilBlue User to MongoDB Atlas</p></div>
<p>You must also add your IP address to the IP Whitelist in the MongoDB Atlas security tab (Figure 2).</p>
<div id="attachment_4217" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4217" src="./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP-1024x701.png" alt="Add IP Address to MongoDB Atlas Whitelist" width="480" height="329" class="size-large wp-image-4217" srcset="./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP-1024x701.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP-300x205.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP-768x526.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_whitelist_IP.png 1502w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4217" class="wp-caption-text">Figure 2: Add IP Address to MongoDB Atlas Whitelist</p></div>
<p>If it isn&#8217;t already installed on your system, download and install Node.js:</p>
<pre><code>$ curl https://nodejs.org/dist/v4.4.7/node-v4.4.7-linux-x64.tar.xz -o node.tar.xz
$ tar xf node.tar.xz
</code></pre>
<p>You should then add the <code>bin</code> sub-folder to your <code>.bash_profile</code> before installing the PencilBlue command line interface (CLI):</p>
<pre><code>$ sudo npm install -g pencilblue-cli
Password:
npm WARN engine pencilblue-cli@0.3.1: wanted: {"node":"&gt;= 4.4.7"} (current: {"node":"0.12.5","npm":"2.11.2"})
/usr/local/bin/pencilblue -&gt; /usr/local/lib/node_modules/pencilblue-cli/lib/pencilblue-cli.js
/usr/local/bin/pbctrl -&gt; /usr/local/lib/node_modules/pencilblue-cli/lib/pencilblue-cli.js
pencilblue-cli@0.3.1 /usr/local/lib/node_modules/pencilblue-cli
‚îú‚îÄ‚îÄ process@0.11.8
‚îú‚îÄ‚îÄ colors@1.1.2
‚îú‚îÄ‚îÄ q@1.4.1
‚îú‚îÄ‚îÄ shelljs@0.7.3 (interpret@1.0.1, rechoir@0.6.2, glob@7.0.5)
‚îî‚îÄ‚îÄ prompt@1.0.0 (revalidator@0.1.8, pkginfo@0.4.0, read@1.0.7, winston@2.1.1, utile@0.3.0)
</code></pre>
<p>The CLI can then be used to install and configure PencilBlue itself:</p>
<pre><code>$ pbctrl install PencilBlue
Site Name:  (My PencilBlue Site) PokeSite
Site Root:  (http://localhost:8080) 
Address to bind to:  (0.0.0.0) 
Site Port:  (8080) 
MongoDB URL:  (mongodb://127.0.0.1:27017/) mongodb://pencilblue_user:my_password@cluster0-shard-00-00-qfovx.mongodb.net:27017,cluster0-shard-00-01-qfovx.mongodb.net:27017,cluster0-shard-00-02-qfovx.mongodb.net:27017/?ssl=true&amp;authSource=admin
Database Name:  (pencilblue) clusterdb
Do you want to install Bower components?:  (y/N) 
Cloning PencilBlue from github...
Cloning into 'PencilBlue'...
Installing npm modules...
...
Creating config.js...
Installation completed.
</code></pre>
<p>Note that if you need to change the configuration (e.g., to specify a new URL to connect to MongoDB) then edit the <code>config.js</code> file that was created during this step.</p>
<p>The MongoDB URL you provided contains these components:</p>
<ul>
<li><code>pencilblue_user</code> is the name of the user you created in the MongoDB Atlas UI</li>
<li><code>my_password</code> is the password you chose when creating the user in MongoDB Atlas</li>
<li><code>cluster0-shard-00-00-qfovx.mongodb.net</code>, <code>cluster0-shard-00-01-qfovx.mongodb.net</code>, &amp; <code>cluster0-shard-00-02-qfovx.mongodb.net</code> are the hostnames of the instances in your MongoDB Atlas replica set (click on the &#8220;CONNECT&#8221; button in the MongoDB Atlas UI if you don&#8217;t have these ‚Äì Figure 3)</li>
<li><code>27017</code> is the standard MongoDB port number</li>
<li>To enforce security, MongoDB Atlas mandates that the <code>ssl</code> option is used</li>
<li><code>admin</code> is the database that&#8217;s being used to store the credentials for <code>pencilblue_user</code></li>
</ul>
<div id="attachment_4218" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4218" src="./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String-1024x414.png" alt="Find the Hostnames From the MongoDB Atlas UI" width="480" height="194" class="size-large wp-image-4218" srcset="./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String-1024x414.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String-300x121.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String-768x310.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_Find_Connect_String.png 1520w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4218" class="wp-caption-text">Figure 3: Find the Hostnames From the MongoDB Atlas UI</p></div>
<p><code>clusterdb</code> is the name of the database (schema) that PencilBlue will use (note that unlike some frameworks, the database name is specified separately rather than being embedded in the MongoDB URL).</p>
<p>The PencilBlue process can now be started:</p>
<pre><code>$ cd PencilBlue/
$ pbctrl start
</code></pre>
<h1>Confirm that MongoDB Atlas is Being Used</h1>
<p>At this point, it is possible to connect to MongoDB Atlas using the MongoDB shell (we&#8217;ll look at an easier way to navigate the data later) to confirm that the schema has been created:</p>
<pre><code>$ mongo mongodb://cluster0-shard-00-00-qfovx.mongodb.net:27017,cluster0-shard-00-01-qfovx.mongodb.net:27017,cluster0-shard-00-02-qfovx.mongodb.net:27017/admin?replicaSet=Cluster0-shard-0 --ssl --username billy --password my_password

Cluster0-shard-0:PRIMARY&gt; show dbs
admin      0.000GB
clusterdb  0.008GB
local      0.007GB

Cluster0-shard-0:PRIMARY&gt; use clusterdb
switched to db clusterdb

Cluster0-shard-0:PRIMARY&gt; show collections
article
auth_token
comment
custom_object
custom_object_type
fs.chunks
fs.files
job_log
lock
media
page
password_reset
plugin
plugin_settings
section
server_registry
session
setting
theme_settings
topic
unverified_user
user
</code></pre>
<h1>Create Your First Page in PencilBlue</h1>
<p>Browse to the application at <a href="http://localhost:8080/">http://localhost:8080</a> as shown in Figure 4 and create a user account.</p>
<div id="attachment_4219" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Browser.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4219" src="./../wp-content/uploads/2016/09/PencilBlue_Browser-1016x1024.png" alt="Register User in PencilBlue" width="480" height="484" class="size-large wp-image-4219" srcset="./../wp-content/uploads/2016/09/PencilBlue_Browser-1016x1024.png 1016w, ./../wp-content/uploads/2016/09/PencilBlue_Browser-150x150.png 150w, ./../wp-content/uploads/2016/09/PencilBlue_Browser-298x300.png 298w, ./../wp-content/uploads/2016/09/PencilBlue_Browser-768x774.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_Browser-144x144.png 144w, ./../wp-content/uploads/2016/09/PencilBlue_Browser.png 1750w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4219" class="wp-caption-text">Figure 4: Register User in PencilBlue</p></div>
<p>You&#8217;re then able to login and create your first page (Figure 5).</p>
<div id="attachment_4220" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Create_content.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4220" src="./../wp-content/uploads/2016/09/PencilBlue_Create_content-1024x973.png" alt="Create a New Page Using PencilBlue" width="480" height="456" class="size-large wp-image-4220" srcset="./../wp-content/uploads/2016/09/PencilBlue_Create_content-1024x973.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Create_content-300x285.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Create_content-768x730.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_Create_content.png 1902w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4220" class="wp-caption-text">Figure 5: Create a New Page Using PencilBlue</p></div>
<p>After saving, the new page can be viewed (Figure 6).</p>
<div id="attachment_4221" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Page.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4221" src="./../wp-content/uploads/2016/09/PencilBlue_Page-776x1024.png" alt="View Pok√©mon Page in PencilBlue" width="480" height="633" class="size-large wp-image-4221" srcset="./../wp-content/uploads/2016/09/PencilBlue_Page-776x1024.png 776w, ./../wp-content/uploads/2016/09/PencilBlue_Page-227x300.png 227w, ./../wp-content/uploads/2016/09/PencilBlue_Page-768x1014.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_Page.png 1620w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4221" class="wp-caption-text">Figure 6: View Pok√©mon Page in PencilBlue</p></div>
<p>To visually navigate through the PencilBlue schema and data, <a href="https://www.mongodb.com/download-center?jmp=nav#compass">download and install MongoDB Compass</a>. Use your MongoDB Atlas credentials to connect Compass to your MongoDB database ‚Äì Figure 7.</p>
<div id="attachment_4222" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4222" src="./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas-1024x839.png" alt="Connect MongoDB Compass to MongoDB Atlas" width="480" height="393" class="size-large wp-image-4222" srcset="./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas-1024x839.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas-300x246.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas-768x629.png 768w, ./../wp-content/uploads/2016/09/PencilBlue_Connect_Compass_to_MongoDB_Atlas.png 1802w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4222" class="wp-caption-text">Figure 7: Connect MongoDB Compass to MongoDB Atlas</p></div>
<p>Navigate through the structure of the data in the <code>clusterdb</code> database (Figure 8); view the JSON documents (Figure 9) and check the indexes (Figure 10).</p>
<div id="attachment_4223" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Compass_Schema.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4223" src="./../wp-content/uploads/2016/09/PencilBlue_Compass_Schema-1024x594.png" alt="Explore PencilBlue Schema Using MongoDB Compass" width="480" height="278" class="size-large wp-image-4223" srcset="./../wp-content/uploads/2016/09/PencilBlue_Compass_Schema-1024x594.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Schema-300x174.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Schema-768x445.png 768w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4223" class="wp-caption-text">Figure 8: Explore PencilBlue Schema Using MongoDB Compass</p></div>
<div id="attachment_4224" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Compass_Document.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4224" src="./../wp-content/uploads/2016/09/PencilBlue_Compass_Document-1024x595.png" alt="View PencilBlue Documents in MongoDB Compass" width="480" height="279" class="size-large wp-image-4224" srcset="./../wp-content/uploads/2016/09/PencilBlue_Compass_Document-1024x595.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Document-300x174.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Document-768x446.png 768w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4224" class="wp-caption-text">Figure 9: View PencilBlue Documents in MongoDB Compass</p></div>
<div id="attachment_4225" style="width: 490px" class="wp-caption aligncenter"><a href="./../wp-content/uploads/2016/09/PencilBlue_Compass_Indexes.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-4225" src="./../wp-content/uploads/2016/09/PencilBlue_Compass_Indexes-1024x594.png" alt="View PencilBlue Indexes Using MongoDB Compass" width="480" height="278" class="size-large wp-image-4225" srcset="./../wp-content/uploads/2016/09/PencilBlue_Compass_Indexes-1024x594.png 1024w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Indexes-300x174.png 300w, ./../wp-content/uploads/2016/09/PencilBlue_Compass_Indexes-768x446.png 768w" sizes="auto, (max-width: 480px) 100vw, 480px"></a><p id="caption-attachment-4225" class="wp-caption-text">Figure 10: View PencilBlue Indexes Using MongoDB Compass</p></div>
<h1>Next Steps</h1>
<p>While MongoDB Atlas radically simplifies the operation of MongoDB there are still some decisions to take to ensure the best performance and reliability for your application. The <a href="https://www.mongodb.com/collateral/mongodb-atlas-best-practices">MongoDB Atlas Best Practices white paper</a> provides guidance on best practices for deploying, managing, and optimizing the performance of your database with MongoDB Atlas.</p>
<p>The guide outlines considerations for achieving performance at scale with MongoDB Atlas across a number of key dimensions, including instance size selection, application patterns, schema design and indexing, and disk I/O. While this guide is broad in scope, it is not exhaustive. Following the recommendations in the guide will provide a solid foundation for ensuring optimal application performance.</p>
					<div class="clear"></div>
									</div>
		<br>
		<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
   		<a href="http://twitter.com/share" class="twitter-share-button" data-url=".//mongodb/using-pencilblue-with-mongodb-atlas" data-via="wpbeginner" data-text="Using PencilBlue with MongoDB Atlas" data-related="syedbalkhi:Founder of WPBeginner" data-count="horizontal">Tweet</a>
		<br>
		<!-- <g:plusone size="medium" href=".//mongodb/using-pencilblue-with-mongodb-atlas"></g:plusone> -->
		<div class="g-plusone" data-annotation="inline" data-width="300"></div>
		<!-- Place this tag after the last +1 button tag. -->
		<script type="text/javascript">(function() {
    				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    				po.src = 'https://apis.google.com/js/plusone.js';
    				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  			})();</script>
		<br>
		<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url=".//mongodb/using-pencilblue-with-mongodb-atlas" data-counter="right"></script>
		<br>
		<iframe src="http://www.facebook.com/plugins/like.php?href=.%2F%2Fmongodb%2Fusing-pencilblue-with-mongodb-atlas&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:60px;">
		</iframe>

<!-- ZXZX -->
				<div class="postinfo">Category: <a href="./../category/mongodb/index.html" rel="category tag">MongoDB</a> | 
Tags: <a href="./javascript/index.html" rel="tag">javascript</a>, <a href="./mongodb/index.html" rel="tag">mongodb</a>, <a href="./mongodb-atlas/index.html" rel="tag">MongoDB Atlas</a>, <a href="./mongodb-compass/index.html" rel="tag">MongoDB Compass</a>, <a href="./node-js/index.html" rel="tag">node.js</a>, <a href="./pencilblue/index.html" rel="tag">PencilBlue</a></div>

			</div>      
							<div class="more_posts">
					<span class="post_links"> &nbsp; </span>
				</div>
						

					
	</div>
		
		
<div id="sidebar">
	<ul>

<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action=".//">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form></li>

		<li id="recent-posts-2" class="widget widget_recent_entries">
		<h2 class="widgettitle">Recent Posts</h2>

		<ul>
											<li>
					<a href="./../mongodb/building-a-collaborative-ios-minesweeper-game-with-realm/index.html">Building a collaborative iOS Minesweeper game with Realm</a>
									</li>
											<li>
					<a href="./../mongodb/using-realm-flexible-sync-in-your-app-an-ios-tutorial/index.html">Using Realm Flexible Sync in Your App‚Äîan iOS Tutorial</a>
									</li>
											<li>
					<a href="./../mongodb/realm-swift-type-projections/index.html">Realm-Swift Type Projections</a>
									</li>
											<li>
					<a href="./../mongodb/introducing-flexible-sync-preview-the-next-iteration-of-realm-sync/index.html">Introducing Flexible Sync (Preview) ‚Äì The Next Iteration of Realm Sync</a>
									</li>
											<li>
					<a href="./../mongodb/goodbye-nspredicate-hello-realm-swift-query-api/index.html">Goodbye NSPredicate, hello Realm Swift Query API</a>
									</li>
					</ul>

		</li>
<li id="text-2" class="widget widget_text">			<div class="textwidget"><script type="text/javascript"><!--
google_ad_client = "ca-pub-5257306915232759";
/* Clusterdb-home */
google_ad_slot = "1624229680";
google_ad_width = 200;
google_ad_height =600;
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href="http://mikael.ronstrom@blogspot.com/" class="url" rel="ugc external nofollow">Mikael Ronstr√∂m</a></span> on <a href="./../mysql-cluster/mysql-cluster-running-on-raspberry-pi/index.html#comment-787242">MySQL Cluster running on Raspberry Pi</a></li><li class="recentcomments"><span class="comment-author-link">andrew</span> on <a href="./../mysql-cluster/setting-up-mysql-asynchronous-replication-for-high-availability/index.html#comment-668717">Setting up MySQL Asynchronous Replication for High Availability</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.suksesonline.com/" class="url" rel="ugc external nofollow">Betty</a></span> on <a href="./../mysql-cluster/setting-up-mysql-asynchronous-replication-for-high-availability/index.html#comment-668713">Setting up MySQL Asynchronous Replication for High Availability</a></li><li class="recentcomments"><span class="comment-author-link">Sai Krishnan</span> on <a href="./../mysql-cluster/get-mysql-replication-up-and-running-in-5-minutes/index.html#comment-661143">Get MySQL Replication up and running in 5 minutes</a></li><li class="recentcomments"><span class="comment-author-link">Nayan</span> on <a href="./../mysql-cluster/get-mysql-replication-up-and-running-in-5-minutes/index.html#comment-660628">Get MySQL Replication up and running in 5 minutes</a></li></ul></li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>

			<ul>
					<li class="cat-item cat-item-2"><a href="./../category/me/index.html">Me</a>
</li>
	<li class="cat-item cat-item-146"><a href="./../category/mongodb/index.html">MongoDB</a>
</li>
	<li class="cat-item cat-item-3"><a href="./../category/mysql/index.html">MySQL</a>
</li>
	<li class="cat-item cat-item-4"><a href="./../category/mysql-cluster/index.html">MySQL Cluster</a>
</li>
	<li class="cat-item cat-item-131"><a href="./../category/mysql-fabric/index.html">MySQL Fabric</a>
</li>
	<li class="cat-item cat-item-5"><a href="./../category/mysql-replication/index.html">MySQL Replication</a>
</li>
	<li class="cat-item cat-item-214"><a href="./../category/mongodb/realm/index.html">Realm</a>
</li>
	<li class="cat-item cat-item-1"><a href="./../category/uncategorized/index.html">Uncategorized</a>
</li>
			</ul>

			</li>
<li id="tag_cloud-2" class="widget widget_tag_cloud"><h2 class="widgettitle">Tags</h2>
<div class="tagcloud"><a href="./7-4/index.html" class="tag-cloud-link tag-link-137 tag-link-position-1" style="font-size: 9.0632911392405pt;" aria-label="7.4 (7 items)">7.4</a>
<a href="./apache-kafka/index.html" class="tag-cloud-link tag-link-169 tag-link-position-2" style="font-size: 8.620253164557pt;" aria-label="Apache Kafka (6 items)">Apache Kafka</a>
<a href="./cluster/index.html" class="tag-cloud-link tag-link-18 tag-link-position-3" style="font-size: 8.620253164557pt;" aria-label="Cluster (6 items)">Cluster</a>
<a href="./ha/index.html" class="tag-cloud-link tag-link-41 tag-link-position-4" style="font-size: 15.354430379747pt;" aria-label="HA (40 items)">HA</a>
<a href="./high-availability/index.html" class="tag-cloud-link tag-link-43 tag-link-position-5" style="font-size: 15.26582278481pt;" aria-label="High Availability (39 items)">High Availability</a>
<a href="./ios/index.html" class="tag-cloud-link tag-link-215 tag-link-position-6" style="font-size: 10.658227848101pt;" aria-label="ios (11 items)">ios</a>
<a href="./java/index.html" class="tag-cloud-link tag-link-47 tag-link-position-7" style="font-size: 8.620253164557pt;" aria-label="Java (6 items)">Java</a>
<a href="./javascript/index.html" class="tag-cloud-link tag-link-48 tag-link-position-8" style="font-size: 10.303797468354pt;" aria-label="javascript (10 items)">javascript</a>
<a href="./mcm/index.html" class="tag-cloud-link tag-link-56 tag-link-position-9" style="font-size: 8pt;" aria-label="MCM (5 items)">MCM</a>
<a href="./mean/index.html" class="tag-cloud-link tag-link-186 tag-link-position-10" style="font-size: 8pt;" aria-label="MEAN (5 items)">MEAN</a>
<a href="./memcached/index.html" class="tag-cloud-link tag-link-57 tag-link-position-11" style="font-size: 8pt;" aria-label="Memcached (5 items)">Memcached</a>
<a href="./mobile/index.html" class="tag-cloud-link tag-link-211 tag-link-position-12" style="font-size: 8pt;" aria-label="mobile (5 items)">mobile</a>
<a href="./mongodb/index.html" class="tag-cloud-link tag-link-150 tag-link-position-13" style="font-size: 16.417721518987pt;" aria-label="mongodb (53 items)">mongodb</a>
<a href="./mongodb-3-2/index.html" class="tag-cloud-link tag-link-153 tag-link-position-14" style="font-size: 8pt;" aria-label="MongoDB 3.2 (5 items)">MongoDB 3.2</a>
<a href="./mongodb-atlas/index.html" class="tag-cloud-link tag-link-163 tag-link-position-15" style="font-size: 9.0632911392405pt;" aria-label="MongoDB Atlas (7 items)">MongoDB Atlas</a>
<a href="./mongodb-mobile/index.html" class="tag-cloud-link tag-link-212 tag-link-position-16" style="font-size: 8pt;" aria-label="MongoDB Mobile (5 items)">MongoDB Mobile</a>
<a href="./mongodb-stitch/index.html" class="tag-cloud-link tag-link-204 tag-link-position-17" style="font-size: 12.253164556962pt;" aria-label="MongoDB Stitch (17 items)">MongoDB Stitch</a>
<a href="./mysql/index.html" class="tag-cloud-link tag-link-147 tag-link-position-18" style="font-size: 22pt;" aria-label="MySQL (229 items)">MySQL</a>
<a href="./mysql-5-6/index.html" class="tag-cloud-link tag-link-64 tag-link-position-19" style="font-size: 10.924050632911pt;" aria-label="MySQL 5.6 (12 items)">MySQL 5.6</a>
<a href="./mysql-cluster/index.html" class="tag-cloud-link tag-link-148 tag-link-position-20" style="font-size: 21.46835443038pt;" aria-label="MySQL Cluster (198 items)">MySQL Cluster</a>
<a href="./mysql-cluster-70/index.html" class="tag-cloud-link tag-link-69 tag-link-position-21" style="font-size: 13.936708860759pt;" aria-label="MySQL Cluster 7.0 (27 items)">MySQL Cluster 7.0</a>
<a href="./mysql-cluster-7-1/index.html" class="tag-cloud-link tag-link-70 tag-link-position-22" style="font-size: 15.177215189873pt;" aria-label="MySQL Cluster 7.1 (38 items)">MySQL Cluster 7.1</a>
<a href="./mysql-cluster-7-2/index.html" class="tag-cloud-link tag-link-71 tag-link-position-23" style="font-size: 14.556962025316pt;" aria-label="MySQL Cluster 7.2 (32 items)">MySQL Cluster 7.2</a>
<a href="./mysql-cluster-7-3/index.html" class="tag-cloud-link tag-link-72 tag-link-position-24" style="font-size: 12.253164556962pt;" aria-label="MySQL Cluster 7.3 (17 items)">MySQL Cluster 7.3</a>
<a href="./mysql-cluster-7-4/index.html" class="tag-cloud-link tag-link-134 tag-link-position-25" style="font-size: 11.278481012658pt;" aria-label="MySQL Cluster 7.4 (13 items)">MySQL Cluster 7.4</a>
<a href="./mysql-cluster-cge/index.html" class="tag-cloud-link tag-link-73 tag-link-position-26" style="font-size: 17.569620253165pt;" aria-label="MySQL Cluster CGE (72 items)">MySQL Cluster CGE</a>
<a href="./mysql-cluster-manager/index.html" class="tag-cloud-link tag-link-74 tag-link-position-27" style="font-size: 12.607594936709pt;" aria-label="MySQL Cluster Manager (19 items)">MySQL Cluster Manager</a>
<a href="./mysql-enterprise-monitor/index.html" class="tag-cloud-link tag-link-76 tag-link-position-28" style="font-size: 9.0632911392405pt;" aria-label="MySQL Enterprise Monitor (7 items)">MySQL Enterprise Monitor</a>
<a href="./mysql-fabric-2/index.html" class="tag-cloud-link tag-link-132 tag-link-position-29" style="font-size: 9.0632911392405pt;" aria-label="mysql fabric (7 items)">mysql fabric</a>
<a href="./mysql-replication/index.html" class="tag-cloud-link tag-link-149 tag-link-position-30" style="font-size: 15.354430379747pt;" aria-label="MySQL Replication (40 items)">MySQL Replication</a>
<a href="./mysql-utilities/index.html" class="tag-cloud-link tag-link-78 tag-link-position-31" style="font-size: 8pt;" aria-label="MySQL Utilities (5 items)">MySQL Utilities</a>
<a href="./ndb-api/index.html" class="tag-cloud-link tag-link-80 tag-link-position-32" style="font-size: 10.303797468354pt;" aria-label="NDB API (10 items)">NDB API</a>
<a href="./node-js/index.html" class="tag-cloud-link tag-link-83 tag-link-position-33" style="font-size: 10.303797468354pt;" aria-label="node.js (10 items)">node.js</a>
<a href="./nosql/index.html" class="tag-cloud-link tag-link-84 tag-link-position-34" style="font-size: 12.784810126582pt;" aria-label="NoSQL (20 items)">NoSQL</a>
<a href="./performance/index.html" class="tag-cloud-link tag-link-97 tag-link-position-35" style="font-size: 9.9493670886076pt;" aria-label="Performance (9 items)">Performance</a>
<a href="./realm/index.html" class="tag-cloud-link tag-link-213 tag-link-position-36" style="font-size: 11.721518987342pt;" aria-label="Realm (15 items)">Realm</a>
<a href="./replication/index.html" class="tag-cloud-link tag-link-104 tag-link-position-37" style="font-size: 10.924050632911pt;" aria-label="Replication (12 items)">Replication</a>
<a href="./secondary/index.html" class="tag-cloud-link tag-link-138 tag-link-position-38" style="font-size: 11.278481012658pt;" aria-label="secondary (13 items)">secondary</a>
<a href="./serverless/index.html" class="tag-cloud-link tag-link-208 tag-link-position-39" style="font-size: 8.620253164557pt;" aria-label="serverless (6 items)">serverless</a>
<a href="./sharding/index.html" class="tag-cloud-link tag-link-129 tag-link-position-40" style="font-size: 8pt;" aria-label="sharding (5 items)">sharding</a>
<a href="./swift/index.html" class="tag-cloud-link tag-link-216 tag-link-position-41" style="font-size: 10.303797468354pt;" aria-label="Swift (10 items)">Swift</a>
<a href="./swiftui/index.html" class="tag-cloud-link tag-link-217 tag-link-position-42" style="font-size: 10.303797468354pt;" aria-label="SwiftUI (10 items)">SwiftUI</a>
<a href="./webcast/index.html" class="tag-cloud-link tag-link-124 tag-link-position-43" style="font-size: 8pt;" aria-label="Webcast (5 items)">Webcast</a>
<a href="./webinar/index.html" class="tag-cloud-link tag-link-125 tag-link-position-44" style="font-size: 12.430379746835pt;" aria-label="webinar (18 items)">webinar</a>
<a href="./windows/index.html" class="tag-cloud-link tag-link-127 tag-link-position-45" style="font-size: 9.0632911392405pt;" aria-label="Windows (7 items)">Windows</a></div>
</li>
<li id="theme_socialmedia-2" class="widget theme_socialmedia">			<div class="widget-social-icons">
				
			<a href="http://twitter.com/andrewmorgan"><img src="./../wp-content/themes/zeesynergie/images/icons/twitter.png" alt="twitter"></a><a href="http://www.facebook.com/andrewjamesmorgan"><img src="./../wp-content/themes/zeesynergie/images/icons/facebook.png" alt="facebook"></a><a href="https://plus.google.com/u/0/100605473697871424413/posts"><img src="./../wp-content/themes/zeesynergie/images/icons/googleplus.png" alt="googleplus"></a><a href="http://www.linkedin.com/profile/view?id=16709956"><img src="./../wp-content/themes/zeesynergie/images/icons/linkedin.png" alt="linkedin"></a><a href="http://www.flickr.com/photos/andrewjamesmorgan/"><img src="./../wp-content/themes/zeesynergie/images/icons/flickr.png" alt="flickr"></a><a href="http://www.youtube.com/channel/UCodtDakJ4VdeSCzS3P3rIsw"><img src="./../wp-content/themes/zeesynergie/images/icons/youtube.png" alt="youtube"></a>			</div>
		</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>

			<ul>
					<li><a href="./../2022/03/index.html">March 2022</a></li>
	<li><a href="./../2022/02/index.html">February 2022</a></li>
	<li><a href="./../2022/01/index.html">January 2022</a></li>
	<li><a href="./../2021/12/index.html">December 2021</a></li>
	<li><a href="./../2021/11/index.html">November 2021</a></li>
	<li><a href="./../2021/09/index.html">September 2021</a></li>
	<li><a href="./../2021/08/index.html">August 2021</a></li>
	<li><a href="./../2021/07/index.html">July 2021</a></li>
	<li><a href="./../2021/06/index.html">June 2021</a></li>
	<li><a href="./../2021/05/index.html">May 2021</a></li>
	<li><a href="./../2021/04/index.html">April 2021</a></li>
	<li><a href="./../2021/02/index.html">February 2021</a></li>
	<li><a href="./../2021/01/index.html">January 2021</a></li>
	<li><a href="./../2020/12/index.html">December 2020</a></li>
	<li><a href="./../2019/03/index.html">March 2019</a></li>
	<li><a href="./../2019/01/index.html">January 2019</a></li>
	<li><a href="./../2018/12/index.html">December 2018</a></li>
	<li><a href="./../2018/11/index.html">November 2018</a></li>
	<li><a href="./../2018/10/index.html">October 2018</a></li>
	<li><a href="./../2018/09/index.html">September 2018</a></li>
	<li><a href="./../2017/09/index.html">September 2017</a></li>
	<li><a href="./../2017/03/index.html">March 2017</a></li>
	<li><a href="./../2017/02/index.html">February 2017</a></li>
	<li><a href="./../2017/01/index.html">January 2017</a></li>
	<li><a href="./../2016/12/index.html">December 2016</a></li>
	<li><a href="./../2016/11/index.html">November 2016</a></li>
	<li><a href="./../2016/09/index.html">September 2016</a></li>
	<li><a href="./../2016/01/index.html">January 2016</a></li>
	<li><a href="./../2015/11/index.html">November 2015</a></li>
	<li><a href="./../2015/10/index.html">October 2015</a></li>
	<li><a href="./../2015/09/index.html">September 2015</a></li>
	<li><a href="./../2015/06/index.html">June 2015</a></li>
	<li><a href="./../2015/04/index.html">April 2015</a></li>
	<li><a href="./../2015/03/index.html">March 2015</a></li>
	<li><a href="./../2015/02/index.html">February 2015</a></li>
	<li><a href="./../2015/01/index.html">January 2015</a></li>
	<li><a href="./../2014/12/index.html">December 2014</a></li>
	<li><a href="./../2014/11/index.html">November 2014</a></li>
	<li><a href="./../2014/10/index.html">October 2014</a></li>
	<li><a href="./../2014/09/index.html">September 2014</a></li>
	<li><a href="./../2014/08/index.html">August 2014</a></li>
	<li><a href="./../2014/07/index.html">July 2014</a></li>
	<li><a href="./../2014/06/index.html">June 2014</a></li>
	<li><a href="./../2014/05/index.html">May 2014</a></li>
	<li><a href="./../2014/04/index.html">April 2014</a></li>
	<li><a href="./../2014/03/index.html">March 2014</a></li>
	<li><a href="./../2014/02/index.html">February 2014</a></li>
	<li><a href="./../2014/01/index.html">January 2014</a></li>
	<li><a href="./../2013/12/index.html">December 2013</a></li>
	<li><a href="./../2013/11/index.html">November 2013</a></li>
	<li><a href="./../2013/09/index.html">September 2013</a></li>
	<li><a href="./../2013/08/index.html">August 2013</a></li>
	<li><a href="./../2013/07/index.html">July 2013</a></li>
	<li><a href="./../2013/06/index.html">June 2013</a></li>
	<li><a href="./../2013/05/index.html">May 2013</a></li>
	<li><a href="./../2013/03/index.html">March 2013</a></li>
	<li><a href="./../2013/02/index.html">February 2013</a></li>
	<li><a href="./../2013/01/index.html">January 2013</a></li>
	<li><a href="./../2012/12/index.html">December 2012</a></li>
	<li><a href="./../2012/11/index.html">November 2012</a></li>
	<li><a href="./../2012/09/index.html">September 2012</a></li>
	<li><a href="./../2012/07/index.html">July 2012</a></li>
	<li><a href="./../2012/06/index.html">June 2012</a></li>
	<li><a href="./../2012/05/index.html">May 2012</a></li>
	<li><a href="./../2012/04/index.html">April 2012</a></li>
	<li><a href="./../2012/03/index.html">March 2012</a></li>
	<li><a href="./../2012/02/index.html">February 2012</a></li>
	<li><a href="./../2012/01/index.html">January 2012</a></li>
	<li><a href="./../2011/12/index.html">December 2011</a></li>
	<li><a href="./../2011/11/index.html">November 2011</a></li>
	<li><a href="./../2011/10/index.html">October 2011</a></li>
	<li><a href="./../2011/09/index.html">September 2011</a></li>
	<li><a href="./../2011/07/index.html">July 2011</a></li>
	<li><a href="./../2011/06/index.html">June 2011</a></li>
	<li><a href="./../2011/05/index.html">May 2011</a></li>
	<li><a href="./../2011/04/index.html">April 2011</a></li>
	<li><a href="./../2011/03/index.html">March 2011</a></li>
	<li><a href="./../2011/02/index.html">February 2011</a></li>
	<li><a href="./../2011/01/index.html">January 2011</a></li>
	<li><a href="./../2010/12/index.html">December 2010</a></li>
	<li><a href="./../2010/11/index.html">November 2010</a></li>
	<li><a href="./../2010/10/index.html">October 2010</a></li>
	<li><a href="./../2010/09/index.html">September 2010</a></li>
	<li><a href="./../2010/08/index.html">August 2010</a></li>
	<li><a href="./../2010/07/index.html">July 2010</a></li>
	<li><a href="./../2010/06/index.html">June 2010</a></li>
	<li><a href="./../2010/05/index.html">May 2010</a></li>
	<li><a href="./../2010/04/index.html">April 2010</a></li>
	<li><a href="./../2010/03/index.html">March 2010</a></li>
	<li><a href="./../2010/02/index.html">February 2010</a></li>
	<li><a href="./../2010/01/index.html">January 2010</a></li>
	<li><a href="./../2009/12/index.html">December 2009</a></li>
	<li><a href="./../2009/11/index.html">November 2009</a></li>
	<li><a href="./../2009/10/index.html">October 2009</a></li>
	<li><a href="./../2009/09/index.html">September 2009</a></li>
	<li><a href="./../2009/08/index.html">August 2009</a></li>
	<li><a href="./../2009/07/index.html">July 2009</a></li>
	<li><a href="./../2009/06/index.html">June 2009</a></li>
	<li><a href="./../2009/05/index.html">May 2009</a></li>
	<li><a href="./../2009/04/index.html">April 2009</a></li>
			</ul>

			</li>
	
	</ul>
</div>	</div>
	
	</div>
	<div id="footer">
		<div id="foot">
			Supported by <a href="http://www.thievesgarden.co.uk/" title="Maidenhead Accommodation - self catering apartment to rent" target="Thieves Garden">Thieves Garden - Maidenhead self catering apartment</a> and <a href="http://www.oleronvilla.com/" title="Ile d'Oleron Holiday Home to rent" target="Oleron Villa">Oleron Villa holiday home on Ile d'Oleron</a>.			<div class="credit_link">	<a href="http://themezee.com/">Theme by ThemeZee</a>
</div>
			<div class="clear"></div>
		</div>
	</div>
</div>
	<!-- Powered by WPtouch: 4.3.39 --></body>
</html>