<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Windows &#8211; Andrew Morgan on Databases</title>
	<atom:link href="/tag/windows/feed" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>Database technologies - especially around scalability and High Availability</description>
	<lastBuildDate>Fri, 22 Jan 2016 09:41:58 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	
	<item>
		<title>Analyzing Data in Microsoft Excel with the MongoDB Connector for BI</title>
		<link>/mongodb/analyzing-data-in-microsoft-excel-with-the-mongodb-connector-for-bi</link>
					<comments>/mongodb/analyzing-data-in-microsoft-excel-with-the-mongodb-connector-for-bi#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Fri, 22 Jan 2016 09:41:58 +0000</pubDate>
				<category><![CDATA[MongoDB]]></category>
		<category><![CDATA[3.2]]></category>
		<category><![CDATA[Excel]]></category>
		<category><![CDATA[mongodb]]></category>
		<category><![CDATA[MongoDB 3.2]]></category>
		<category><![CDATA[ODBC]]></category>
		<category><![CDATA[sql]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=4155</guid>

					<description><![CDATA[There are many great BI tools out there that enable powerful analytics and data visualization but sometimes the right tool for the job is the one you already have sitting on your laptop. MongoDB 3.2 introduced the MongoDB Connector for BI which presents an SQL API to allow BI tools to read data from your]]></description>
										<content:encoded><![CDATA[<p>There are many great BI tools out there that enable powerful analytics and data visualization but sometimes the right tool for the job is the one you already have sitting on your laptop.</p>
<p>MongoDB 3.2 introduced the <a href="https://www.mongodb.com/products/bi-connector">MongoDB Connector for BI</a> which presents an SQL API to allow BI tools to read data from your database in real-time. Typically, this functionality will be showcased with specialized tools such as <a href="https://www.mongodb.com/webinar/live-data-visualisation-with-tableau-and-mongodb">Tableau</a> but it’s equally applicable to Microsoft’s ubiquitous Excel.</p>
<p>This video demonstrates how to connect Excel running on Microsoft Windows to the BI connector and then fetch data from MongoDB.</p>
<div style="width: 480px;" class="wp-video"><!--[if lt IE 9]><script>document.createElement('video');</script><![endif]-->
<video class="wp-video-shortcode" id="video-4155-1" width="480" height="270" preload="metadata" controls="controls"><source type="video/mp4" src="http://clusterdb.com/upload/BI_Connector_with_Excel.mp4?_=1" /><a href="http://clusterdb.com/upload/BI_Connector_with_Excel.mp4">http://clusterdb.com/upload/BI_Connector_with_Excel.mp4</a></video></div>
<p>&nbsp;</p>
<p>The instructions in the demo assume that you already have a MongoDB database running together with a configured instance of the MongoDB Connector for BI – the <a href="https://docs.mongodb.org/manual/products/bi-connector/">documentation</a> explains how to set that up.</p>
<p>Note that Excel is not able to handle the &#8220;.&#8221; character or capital letters in table of column names. To overcome this, it was necessary to edit the DRDL file produced by the mongodrdl tool to map names to lowercase equivalents and to replace each &#8220;.&#8221; (used to flatten embedded documents) with a &#8220;_&#8221;; this requires v1.1 or later of the BI connector.</p>
<p>The MongoDB Connector for BI is part of <a href="https://www.mongodb.com/products/mongodb-enterprise-advanced">MongoDB Enterprise Advanced</a>; it can be freely downloaded for evaluation – why not <a href="https://www.mongodb.com/download-center#bi-connector">try it out for yourself</a>.</p>
<p>More information on the BI connector as well as other MongoDB 3.2 features can be found in <a href="https://www.mongodb.com/collateral/mongodb-3-2-whats-new">MongoDB 3.2: What’s New</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/mongodb/analyzing-data-in-microsoft-excel-with-the-mongodb-connector-for-bi/feed</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		<enclosure url="http://clusterdb.com/upload/BI_Connector_with_Excel.mp4" length="231116948" type="video/mp4" />

			</item>
		<item>
		<title>Holding MySQL HA workshop in Oxford</title>
		<link>/mysql/holding-mysql-ha-workshop-in-oxford</link>
					<comments>/mysql/holding-mysql-ha-workshop-in-oxford#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Tue, 03 Sep 2013 14:40:45 +0000</pubDate>
				<category><![CDATA[MySQL]]></category>
		<category><![CDATA[DRBD]]></category>
		<category><![CDATA[HA]]></category>
		<category><![CDATA[High Availability]]></category>
		<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL Cluster Manager]]></category>
		<category><![CDATA[MySQL Replication]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=2941</guid>

					<description><![CDATA[On 17th October I&#8217;ll be running a hands-on workshop on the various technologies available to provide High Availability using MySQL. The workshop is being held on 17th October (the day before the All Your Base conference) in Oxford (UK). The cost is £250 + VAT and you can register here. This workshop provides an introduction]]></description>
										<content:encoded><![CDATA[<p><a href="/wp-content/uploads/2013/09/All-Your-Base-logo1.png"><img fetchpriority="high" decoding="async" class="alignright size-full wp-image-2943" alt="All Your Base Conference - MySQL HA Workshop" src="/wp-content/uploads/2013/09/All-Your-Base-logo1.png" width="202" height="258" /></a>On 17th October I&#8217;ll be running a hands-on workshop on the various technologies available to provide High Availability using MySQL. The workshop is being held on 17th October (the day before the All Your Base conference) in Oxford (UK). The cost is £250 + VAT and you can <a title="MySQL HA workshop at All Your Base conference" href="http://allyourbaseconf.com/workshops.html#mysql" target="_blank">register here</a>.</p>
<p>This workshop provides an introduction to what High Availability (HA) is; what technology options are available to achieve it with MySQL and how to actually implement your own HA solutions. The session will be a mixture of presentations, demonstrations and (most importantly) hands-on tutorials.</p>
<p>We&#8217;ll start with an overview of High Availability &#8211; in general and in the context of MySQL and then a survey of the technologies to choose from:</p>
<ul>
<li>MySQL Replication</li>
<li>MySQL Cluster</li>
<li>DRBD</li>
<li>Shared storage clustering options
<ul>
<li>Windows Server Failover Clustering</li>
<li>Solaris Clusters</li>
<li>Oracle Virtual Machine</li>
</ul>
</li>
</ul>
<p>There will be deep-dives on MySQL Replication and MySQL Cluster and this is where the hands-on parts of the workshop will focus:</p>
<ul>
<li>What these technologies achieve and how</li>
<li>Get your own database clusters up and running (hands-on)</li>
<li>&#8220;What happens when I do this&#8230;?&#8221; (hands-on)</li>
<li>Monitoring (mix of hands-on and demos)</li>
</ul>
<p>The plan is to get everyone up and running with multiple VMs on their laptops so that they can experiment and test with MySQL Cluster and MySQL Replication over multiple (virtual) hosts. As a stretch, we&#8217;ll try creating a Cluster running over everyone&#8217;s machine at the same time &#8211; though that might be stretching the logisitics! I&#8217;ve got a supply of 30 USB sticks and hope to have 2-3 unique virtual appliances on each &#8211; what could go wrong?</p>
]]></content:encoded>
					
					<wfw:commentRss>/mysql/holding-mysql-ha-workshop-in-oxford/feed</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>MySQL HA Solutions &#8211; webinar replay</title>
		<link>/mysql/mysql-ha-solutions-webinar-replay</link>
					<comments>/mysql/mysql-ha-solutions-webinar-replay#respond</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Wed, 07 Dec 2011 09:48:17 +0000</pubDate>
				<category><![CDATA[MySQL]]></category>
		<category><![CDATA[HA]]></category>
		<category><![CDATA[High Availability]]></category>
		<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL Replication]]></category>
		<category><![CDATA[Oracle Virtual Machine]]></category>
		<category><![CDATA[webinar]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=2168</guid>

					<description><![CDATA[If you were unable to attend the live webinar (or you want to go back and listen to it again) then it&#8217;s now available to view on-line here. Databases are the center of today’s web and enterprise applications, storing and protecting an organization’s most valuable assets and supporting business-critical applications. Just minutes of downtime can result]]></description>
										<content:encoded><![CDATA[<p>If you were unable to attend the live webinar (or you want to go back and listen to it again) then it&#8217;s now available to <a title="MySQL HA Solutions webinar replay" href="https://event.on24.com/eventRegistration/EventLobbyServlet?target=registration.jsp&amp;eventid=371281&amp;sessionid=1&amp;key=3BD8C75311563EAB4E28858BFB8EA46E&amp;sourcepage=register" target="_blank">view on-line here</a>.</p>
<p>Databases are the center of today’s web and enterprise applications, storing and protecting an organization’s most valuable assets and supporting business-critical applications. Just minutes of downtime can result in significant lost revenue and dissatisfied customers. Ensuring database highly availability is therefore a top priority for any organization. Tune into this webcast to learn more.</p>
<p>The session discusses:</p>
<ol>
<li>Causes, effect and impact of downtime</li>
<li>Methodologies to map applications to HA solution</li>
<li>Overview of MySQL HA solutions</li>
<li>Operational best practices to ensure business continuity</li>
</ol>
]]></content:encoded>
					
					<wfw:commentRss>/mysql/mysql-ha-solutions-webinar-replay/feed</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>MySQL with Windows Server 2008 R2 Failover Clustering</title>
		<link>/mysql/mysql-with-windows-server-2008-r2-failover-clustering</link>
					<comments>/mysql/mysql-with-windows-server-2008-r2-failover-clustering#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Tue, 06 Sep 2011 12:18:20 +0000</pubDate>
				<category><![CDATA[MySQL]]></category>
		<category><![CDATA[Cluster]]></category>
		<category><![CDATA[HA]]></category>
		<category><![CDATA[High Availability]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=1939</guid>

					<description><![CDATA[Oracle has announced support for running MySQL on Windows Server Failover Clustering (WSFC); with so many people developing and deploying MySQL on Windows, this offers a great option to add High Availability to MySQL deployments if you don&#8217;t want to go as far as deploying MySQL Cluster. This post will give a brief overview of]]></description>
										<content:encoded><![CDATA[<div id="attachment_1941" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/windows-2008-r2-logo1.jpg"><img decoding="async" aria-describedby="caption-attachment-1941" class="size-medium wp-image-1941" title="windows-2008-r2-logo1" src="/wp-content/uploads/2011/09/windows-2008-r2-logo1-300x204.jpg" alt="" width="300" height="204" /></a><p id="caption-attachment-1941" class="wp-caption-text">Windows Server 2008 R2 Failover Clustering</p></div>
<p>Oracle has <a href="http://www.oracle.com/us/corporate/press/485067">announced </a>support for running MySQL on Windows Server Failover Clustering (WSFC); with so many people developing and deploying MySQL on Windows, this offers a great option to add High Availability to MySQL deployments if you don&#8217;t want to go as far as deploying MySQL Cluster.</p>
<p>This post will give a brief overview of how to set things up but for all of the gory details a <a href="http://www.mysql.com/why-mysql/white-papers/mysql_wp_windows_failover_clustering.php" target="_blank">new white paper MySQL with Windows Server 2008 R2 Failover Clustering</a> is available &#8211; please give me any feedback. I will also be presenting on this at a <a href="http://www.mysql.com/news-and-events/web-seminars/display-659.html" target="_blank">free webinar</a> on Thursday 15th September (please <a href="http://www.mysql.com/news-and-events/web-seminars/display-659.html" target="_blank">register in advance</a>) as well at an Oracle OpenWorld session in San Francisco on Tuesday 4th October (Tuesday, 01:15 PM, Marriott Marquis &#8211; Golden Gate C2) &#8211; a good opportunity to get more details and get your questions answered.</p>
<p>It sometimes surprises people just how much MySQL is used on Windows, here are a few of the reasons:</p>
<ul>
<li>Lower TCO
<ul>
<li>90% savings over Microsoft SQL Server</li>
<li>If your a little skeptical about this then try it out for yourself with the <a href="http://mysql.com/tcosavings/ " target="_blank">MySQL TCO Savings Calculator</a></li>
</ul>
</li>
<li>Broad platform support
<ul>
<li>No lock-in</li>
<li>Windows, Linux, MacOS, Solaris</li>
</ul>
</li>
<li>Ease of use and administration
<ul>
<li>&lt; 5 mins to download, install &amp; configure</li>
<li>MySQL Enterprise Monitor &amp; MySQL WorkBench</li>
</ul>
</li>
<li>Reliability
<ul>
<li>24&#215;7 Uptime</li>
<li>Field Proven</li>
</ul>
</li>
<li>Performance and scalability
<ul>
<li>MySQL 5.5 delivered over 500% performance boost on Windows.</li>
</ul>
</li>
<li>Integration into Windows environment
<ul>
<li>ADO.NET, ODBC &amp; Microsoft Access Integration</li>
<li>And now, support for Windows Server Failover Clustering!</li>
</ul>
</li>
</ul>
<div>Probably the most common form of High Availability for MySQL is MySQL (asynchronous or semi-synchronous replication) and the option for the highest levels of availability is <a href="http://www.mysql.com/products/cluster/" target="_blank">MySQL Cluster</a>. We are in the process of rolling out a number of solutions that provide levels of availability somewhere in between MySQL Replication and MySQL Cluster; Oracle VM Template for MySQL Enterprise Edition was the first (<a href="/mysql/new-oracle-vm-template-for-mysql-enterprise-edition/" target="_blank">overview</a>, <a href="/mysql-cluster/webinar-today-delivering-scalable-and-highly-available-session-management-with-mysql-cluster/" target="_blank">webinar replay</a>, <a href="/mysql/white-paper-oracle-vm-template-for-mysql-enterprise-edition/" target="_blank">white paper</a>) and WSFC is the second.</div>
<p>&nbsp;</p>
<h3>Solution Overview</h3>
<div>
<p><a href="/wp-content/uploads/2011/09/wfc_architrecture.jpg"><img decoding="async" class="alignright size-medium wp-image-1936" title="wfc_architrecture" src="/wp-content/uploads/2011/09/wfc_architrecture-210x300.jpg" alt="" width="210" height="300" /></a>MySQL with Windows Failover Clustering requires at least 2 servers within the cluster together with some shared storage (for example FCAL SAN or iSCSI disks). For redundancy, 2 LANs should be used for the cluster to avoid a single point of failure and typically one would be reserved for the heartbeats between the cluster nodes.</p>
<p>The MySQL binaries and data files are stored in the shared storage and Windows Failover Clustering ensures that at most one of the cluster nodes will access those files at any point in time (hence avoiding file corruptions).</p>
<p>Clients connect to the MySQL service through a Virtual IP Address (VIP) and so in the event of failover they experience a brief loss of connection but otherwise do not need to be aware that the failover has happened other than to handle the failure of any in-flight transactions.</p>
<h3><a href="/wp-content/uploads/2011/09/wfc_network.jpg"><img loading="lazy" decoding="async" class="alignright size-medium wp-image-1935" title="wfc_network" src="/wp-content/uploads/2011/09/wfc_network-272x300.jpg" alt="" width="272" height="300" /></a>Target Configuration</h3>
<p>This post will briefly step through how to set up and use a cluster and this diagrams shows how this is mapped onto physical hardware and network addresses for the lab used later in this post. In this case, iSCSI is used for the shared storage. Note that ideally there would be an extra subnet for the heartbeat connection between ws1 and ws3.</p>
<p>This is only intended to be an overview and the steps have been simplified refer to the <a href="http://www.mysql.com/why-mysql/white-papers/mysql_wp_windows_failover_clustering.php" target="_blank">white paper</a> for more details on the steps.</p>
<h3>Prerequisites</h3>
<ul>
<li>MySQL 5.5 &amp; InnoDB must be used for the database (note that MyISAM is not crash-safe and so failover may result in a corrupt database)</li>
<li>Windows Server 2008 R2</li>
<li>Redundant network connections between nodes and storage</li>
<li>WSFC cluster validation must pass</li>
<li>iSCSI or FCAL SAN should be used for the shared storage</li>
</ul>
<h3>Step 1 Configure iSCSI in software (optional)</h3>
<div id="attachment_1934" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_iscsi.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1934" class="size-medium wp-image-1934" title="wfc_iscsi" src="/wp-content/uploads/2011/09/wfc_iscsi-300x103.jpg" alt="" width="300" height="103" /></a><p id="caption-attachment-1934" class="wp-caption-text">Create 2 clustered disks</p></div>
<p>This post does not attempt to describe how to configure a highly available, secure and performant SAN but in order to implement the subsequent steps shared storage is required and so in this step we look at one way of using software to provide iSCSI targets without any iSCSI/SAN hardware (just using the server’s internal disk). This is a reasonable option to experiment with but probably not what you’d want to deploy with for a HA application. If you already have shared storage set up then you can skip this step and use that instead.</p>
<p>As part of this process you&#8217;ll create at least two virtual disks within the iSCSI target; one for the quorum file and one for the MySQL binaries and data files. The quorum file is used by Windows Failover Clustering to avoid “split-brain” behaviour.</p>
<h3>Step 2. Ensure Windows Failover Clustering is enabled</h3>
<div id="attachment_1933" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_feature.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1933" class="size-medium wp-image-1933" title="wfc_feature" src="/wp-content/uploads/2011/09/wfc_feature-300x228.jpg" alt="" width="300" height="228" /></a><p id="caption-attachment-1933" class="wp-caption-text">Ensure that WSFC is enabled</p></div>
<p>To confirm that Windows Failover Clustering is installed on ws1 and ws3, open the “Features” branch in the Server Manager tool and check if “Failover Cluster Manager” is present.</p>
<p>If Failover Clustering is not installed then it is very simple to add it. Select “Features” within the Service Manager and then click on “Add Features” and then select “Failover Clustering” and then “Next”.</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>Step 3. Install MySQL as a service on both servers</h3>
<div id="attachment_1932" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_mysql_service.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1932" class="size-medium wp-image-1932" title="wfc_mysql_service" src="/wp-content/uploads/2011/09/wfc_mysql_service-300x155.jpg" alt="" width="300" height="155" /></a><p id="caption-attachment-1932" class="wp-caption-text">Install MySQL as a Windows Service</p></div>
<p>If MySQL is already installed as a service on both ws1 and ws3 then this step can be skipped.</p>
<p>The installation is very straight-forward using the <a href="http://dev.mysql.com/tech-resources/articles/mysql-installer-for-windows.html" target="_blank">MySQL Windows Installer</a> and selecting the default options is fine.</p>
<p>Within the MySQL installation wizard, sticking with the defaults is fine for this exercise. When you reach the configuration step, check “Create Windows Service”.</p>
<p>The installation and configuration must be performed on both ws1 and ws2, if necessary.</p>
<h3>Step 4. Migrate MySQL binaries &amp; data to shared storage</h3>
<p>If the MySQL Service is running on either ws1 or ws3 then stop it &#8211; open the Task Manager using ctrl-shift-escape, select the “Services” tab and then right-click on the MySQL service and choose “Stop Service”.</p>
<p>As the iSCSI disks were enabled on ws1 you can safely access them in order to copy across the MySQL binaries and data files to the shared disk.</p>
<h3>Step 5. Create Windows Failover Cluster</h3>
<div id="attachment_1931" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_create_cluster.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1931" class="size-medium wp-image-1931" title="wfc_create_cluster" src="/wp-content/uploads/2011/09/wfc_create_cluster-300x183.jpg" alt="" width="300" height="183" /></a><p id="caption-attachment-1931" class="wp-caption-text">Create the Cluster (without MySQL)</p></div>
<p>From the Server Manager on either ws1 or ws3 navigate to “Features -&gt; Failover Cluster Manager” and then select “Validate a Configuration”. When prompted enter ws1 as one name and then ws3 as the other.</p>
<p>In the “Testing Options” select “Run all tests” and continue. If the tests report any errors then these should be fixed before continuing.</p>
<p>Now that the system has been verified, select “Create a Cluster” and provide the same server names as used in the validation step. In this example, “MySQL” is provided as the “Cluster Name” and then the wizard goes on to create the cluster.</p>
<h3>Step 6. Create Cluster of MySQL Servers within Windows Cluster</h3>
<div id="attachment_1930" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_cluster_mysql.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1930" class="size-medium wp-image-1930" title="wfc_cluster_mysql" src="/wp-content/uploads/2011/09/wfc_cluster_mysql-300x263.jpg" alt="" width="300" height="263" /></a><p id="caption-attachment-1930" class="wp-caption-text">Cluster the MySQL Service</p></div>
<p>Adding the MySQL service to the new Cluster is very straight-forward. Right-click on “Services and applications” in the Server Manager tree and select “Configure a Service or Application…”. When requested by the subsequent wizard, select “Generic Service” from the list and then “MySQL” from the offered list of services. Our example name was “ClusteredMySQL”. Please choose an appropriate name for your cluster. The wizard will then offer the shared disk that has not already been established as the quorum disk for use with the Clustered service – make sure that it is selected.</p>
<p>Once the wizard finishes, it starts up the MySQL Service. Click on the “ClusteredMySQL” service branch to observe that the service is up and running. You should also make a note of the Virtual IP (VIP) assigned, in this case 192.168.2.18.</p>
<h3>Step 7. Test the cluster</h3>
<p>As described in Step 6, the VIP should be used to connect to the clustered MySQL service:</p>
<pre style="padding-left: 30px;"><span style="color: #333399;">C: mysql –u root –h 192.168.2.18 –P3306 –pbob</span></pre>
<p>From there create a database and populate some data.</p>
<pre style="padding-left: 30px;"><span style="color: #333399;">mysql&gt; CREATE DATABASE clusterdb;</span>
<span style="color: #333399;">mysql&gt; USE clusterdb;</span>
<span style="color: #333399;">mysql&gt; CREATE TABLE simples (id int not null primary key) ENGINE=innodb;</span>
<span style="color: #333399;">mysql&gt; REPLACE INTO simples VALUES (1);</span>
<span style="color: #333399;">mysql&gt; SELECT * FROM simples;</span>
<span style="color: #333399;">+----+</span>
<span style="color: #333399;">| id |</span>
<span style="color: #333399;">+----+</span>
<span style="color: #333399;">| 1 |</span>
<span style="color: #333399;">+----+</span></pre>
<div id="attachment_1929" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2011/09/wfc_migrate_service.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1929" class="size-medium wp-image-1929" title="wfc_migrate_service" src="/wp-content/uploads/2011/09/wfc_migrate_service-300x117.jpg" alt="" width="300" height="117" /></a><p id="caption-attachment-1929" class="wp-caption-text">Migrate MySQL Service Across Cluster</p></div>
<p>The MySQL service was initially created on ws1 but it can be forced to migrate to ws3 by right-clicking on the service and selecting “Move this service or application to another node”.</p>
<p>As the MySQL data is held in the shared storage (which has also been migrated to ws3), it is still available and can still be accessed through the existing mysql client which is connected to the VIP:</p>
<pre style="padding-left: 30px;"><span style="color: #333399;">mysql&gt; select * from simples; </span>
<span class="Apple-style-span" style="color: #333399;">ERROR 2006 (HY000): MySQL server has gone away </span>
<span class="Apple-style-span" style="color: #333399;">No connection. Trying to reconnect... </span>
<span class="Apple-style-span" style="color: #333399;">Connection id: 1 </span>
<span class="Apple-style-span" style="color: #333399;">Current database: clusterdb </span>
<span class="Apple-style-span" style="color: #333399;">+----+ </span>
<span class="Apple-style-span" style="color: #333399;">| id | </span>
<span class="Apple-style-span" style="color: #333399;">+----+ </span>
<span class="Apple-style-span" style="color: #333399;">| 1 | </span>
<span class="Apple-style-span" style="color: #333399;">+----+</span></pre>
<p>Note the error shown above – the mysql client loses the connection to the MySQL service as part of the migration and so it automatically reconnects and complete the query. Any application using MySQL with Windows Failover Cluster should also expect to have to cope with these “glitches” in the connection.</p>
<h3>Conclusion</h3>
<p>More users develop and deploy and MySQL on Windows than any other single platform. Enhancements in MySQL 5.5 increased performance by over 5x compared to previous MySQL releases. With certification for Windows Server Failover Clustering, MySQL can now be deployed to support business critical workloads demanding high availability, enabling organizations to better meet demanding service levels while also reducing TCO and eliminating single vendor lock-in.<br />
Please let me know how you get on by leaving comments on this post.</p>
]]></content:encoded>
					
					<wfw:commentRss>/mysql/mysql-with-windows-server-2008-r2-failover-clustering/feed</wfw:commentRss>
			<slash:comments>16</slash:comments>
		
		
			</item>
		<item>
		<title>Running MySQL Cluster over multiple Windows servers</title>
		<link>/mysql-cluster/running-mysql-cluster-over-multiple-servers</link>
					<comments>/mysql-cluster/running-mysql-cluster-over-multiple-servers#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Wed, 20 Jan 2010 17:57:30 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.0]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=807</guid>

					<description><![CDATA[Following on from the earlier article on running MySQL Cluster on a single Windows host, this one looks at installing and running over multiple Windows machines. In this post, the MySQL Cluster database will be split over 3 Windows machines: 2 hosts with each running 1 data node 3rd host running management node and 2]]></description>
										<content:encoded><![CDATA[<p><a href="/wp-content/uploads/2009/12/Windows_logo.jpg"><img loading="lazy" decoding="async" class="alignright size-full wp-image-809" title="Windows Logo" src="/wp-content/uploads/2009/12/Windows_logo.jpg" alt="Windows Logo" width="107" height="107" /></a><br />
Following on from the earlier article on <a href="/mysql-cluster/my-first-cluster-running-on-windows/" target="_blank">running MySQL Cluster on a single Windows host</a>, this one looks at installing and running over multiple Windows machines.</p>
<div id="attachment_800" style="width: 264px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/windows.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-800" class="size-medium wp-image-800" title="MySQL Cluster Running on Windows" src="/wp-content/uploads/2009/12/windows-254x300.jpg" alt="Target Deployment" width="254" height="300" srcset="/wp-content/uploads/2009/12/windows-254x300.jpg 254w, /wp-content/uploads/2009/12/windows.jpg 618w" sizes="auto, (max-width: 254px) 100vw, 254px" /></a><p id="caption-attachment-800" class="wp-caption-text">Target Deployment</p></div>
<p>In this post, the MySQL Cluster database will be split over 3 Windows machines:</p>
<ul>
<li>2 hosts with each running 1 data node</li>
<li>3rd host running management node and 2 MySQL Servers</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="attachment_814" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/download.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-814" class="size-medium wp-image-814" title="MySQL Cluster Downloads" src="/wp-content/uploads/2009/12/download-300x236.jpg" alt="MySQL Cluster Downloads" width="300" height="236" srcset="/wp-content/uploads/2009/12/download-300x236.jpg 300w, /wp-content/uploads/2009/12/download.jpg 745w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-814" class="wp-caption-text">MySQL Cluster Downloads</p></div>
<p>The first step is to download and install the software on each of the Windows hosts. There are 2 main ways that you can install MySQL Cluster on Windows &#8211; the first is an MSI installer and the second is extracting the files from a Zip archive &#8211; this article focuses on using the Zip file as the <a href="/mysql-cluster/my-first-cluster-running-on-windows/" target="_blank">single host article</a> used the MSI installer. You can get the Zip archive from the <a href="http://dev.mysql.com/downloads/cluster/" target="_blank">Cluster downloads page on mysql.com</a></p>
<p>Make sure that you choose the correct file MSI vs. Zip, 32 bit vs. 64 bit. Also make sure that you don&#8217;t download the source code rather than the binaries (you can tell the source archive as it&#8217;s a much smaller file).</p>
<p>Repeat this on each of the hosts that will run a Cluster node (or download it once and then copy it to each of the hosts).</p>
<div id="attachment_832" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/zip.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-832" class="size-medium wp-image-832" title="zip" src="/wp-content/uploads/2009/12/zip-300x212.jpg" alt="Extract Zip archive" width="300" height="212" srcset="/wp-content/uploads/2009/12/zip-300x212.jpg 300w, /wp-content/uploads/2009/12/zip.jpg 512w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-832" class="wp-caption-text">Extract Zip archive</p></div>
<p>Extract the contents of the Zip archive to &#8220;c:mysqlcluster&#8221;.</p>
<p>I prefer to keep the configuration and data files separate from the software and so I create a new folder &#8220;MySQL_ClusterMy_Cluster&#8221; in my home directory and in there create &#8220;conf&#8221; and &#8220;data&#8221; folders. Within the &#8220;data&#8221; folder on 192.168.0.19, create a sub-folder for each of the 2 MySQL Server (mysqld) processes and then copy &#8220;c:mysqlclusterdatamysql&#8221; to each &#8211; this creates the mysql database for each of the MySQL nodes containing data such as privileges and password.</p>
<div id="attachment_834" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/path.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-834" class="size-medium wp-image-834" title="path" src="/wp-content/uploads/2009/12/path-300x275.jpg" alt="Add MySQL executables to PATH" width="300" height="275" srcset="/wp-content/uploads/2009/12/path-300x275.jpg 300w, /wp-content/uploads/2009/12/path.jpg 561w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-834" class="wp-caption-text">Add MySQL executables to PATH</p></div>
<p>To get access to the executables from the command line, add &#8220;c:mysqlclusterbin&#8221; to the PATH environment variable.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Create a &#8220;config.ini&#8221; file within the &#8220;conf&#8221; folder that was created on the host to run the management node (ndb_mgmd) &#8211; which in this example is 192.168.0.19:</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">[ndbd default]
noofreplicas=2
datadir=E:am233268DocumentsMySQL_ClusterMy_Clusterdata

[ndbd]
hostname=192.168.0.201
id=2

[ndbd]
hostname=192.168.0.4
id=3

[ndb_mgmd]
id=1
hostname=192.168.0.19

mysqld]
id=101
hostname=192.168.0.19

[mysqld]
id=102
hostname=192.168.0.19
</span></pre>
<p>As both of the MySQL Server nodes will also run on 192.168.0.19, we create a cnf file for each of them in that same &#8220;conf&#8221; folder:</p>
<p>my.101.cnf</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">[mysqld]
ndb-nodeid=101
ndbcluster
datadir=E:am233268DocumentsMySQL_ClusterMy_Clusterdatamysqld_1
port=3306
ndb-connectstring=192.168.0.19:1186</span></pre>
<p>my.102.cnf</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">[mysqld]
ndb-nodeid=102
ndbcluster
datadir=E:am233268DocumentsMySQL_ClusterMy_Clusterdatamysqld_2
port=3307
ndb-connectstring=192.168.0.19:1186</span></pre>
<p>Note that the &#8220;ndb-connectstring&#8221; is not strictly needed as the MySQL Servers happen to be on the same host as the management node but they&#8217;ve been included to make it clearer what to change if you moved those nodes to another machine.</p>
<div id="attachment_838" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/ports.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-838" class="size-medium wp-image-838" title="ports" src="/wp-content/uploads/2009/12/ports-300x121.jpg" alt="Ports to open for MySQL Cluster nodes" width="300" height="121" srcset="/wp-content/uploads/2009/12/ports-300x121.jpg 300w, /wp-content/uploads/2009/12/ports.jpg 389w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-838" class="wp-caption-text">Ports to open for MySQL Cluster nodes</p></div>
<p>The information from this table can help you set up the firewall rules to allow the nodes to communitcate with each other but if possible, turn off the firewall for connections between these 3 nodes.</p>
<p>The next step is to start the nodes (processes) but before then, a hint.</p>
<p>If you run each command from a different command prompt then your screen will quickly fill with Windows. Instead, rather than just typing &#8220;c: &lt;command&gt;&#8221; use &#8220;c: start /B &lt;command&gt;&#8221; (for example &#8220;c: start /B ndbd &#8211;initial&#8221;) so that multiple processes can be run from the same Window. To keep things simple, the &#8220;start /B&#8221; has been skipped for the rest of this article.</p>
<p>The first process to start is the management node; run the following from the &#8220;&lt;home&gt;DocumentsMySQL_ClusterMy_Cluster&#8221; folder on 192.168.0.19:</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">192.168.0.19: ndb_mgmd --initial -f conf/config.ini --configdir=./conf</span></pre>
<p>Next, start the data nodes on 192.168.0.201 and 192.168.0.4:</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">192.168.0.201: ndbd -c 192.168.0.19:1186 --initial

192.168.0.4: ndbd -c 192.168.0.19:1186 --initial</span></pre>
<p>and then finally start the MySQL Server nodes on 192.168.0.19:</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">192.168.0.19: mysqld --defaults-file=confmy.101.cnf
192.168.0.19: mysqld --defaults-file=confmy.102.cnf</span></pre>
<p>Finally, check that all of the nodes are up and running:</p>
<pre style="padding-left: 30px;"><span style="color: #993300;">192.168.0.19: ndb_mgm
-- NDB Cluster -- Management Client --
ndb_mgm&gt; show
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @192.168.0.201  (mysql-5.1.39 ndb-7.0.9, Nodegroup: 0, Master)
id=3    @192.168.0.4  (mysql-5.1.39 ndb-7.0.9, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @192.168.0.19  (mysql-5.1.39 ndb-7.0.9)

[mysqld(API)]   2 node(s)
id=101  @192.168.0.19  (mysql-5.1.39 ndb-7.0.9)
id=102  @192.168.0.19  (mysql-5.1.39 ndb-7.0.9)</span></pre>
<h3>Known limitation of running MySQL Cluster on Windows:</h3>
<ul>
<li>No angel process for data nodes -&gt; processes will not be automatically restarted even if you set StopOnError to FALSE</li>
<li>Running nodes as Windows services is not really practical (as well as software limitations, would still need to activate processes through ndb_mgm)</li>
<li>Safe to run management node or MySQL Servers (or NDB API Apps) on Windows in production: will soon be supported</li>
<li>See open <a href="http://bugs.mysql.com/search.php?search_for=&amp;status=Active&amp;severity=&amp;limit=10&amp;order_by=&amp;cmd=display&amp;direction=ASC&amp;bug_type=Server:+Cluster&amp;assign=&amp;os=7&amp;phpver=&amp;bug_age=0 " target="_blank">MySQL Cluster bugs reported for Windows:</a></li>
<li>You tell us! Help us get to GA quality on Windows:
<ul>
<li><a href="http://bugs.mysql.com/" target="_blank">bugs.mysql.com</a>
<ul>
<li>Category = MySQL Cluster</li>
<li>OS = Microsoft Windows</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
					
					<wfw:commentRss>/mysql-cluster/running-mysql-cluster-over-multiple-servers/feed</wfw:commentRss>
			<slash:comments>114</slash:comments>
		
		
			</item>
		<item>
		<title>MySQL Cluster running on Windows &#8211; new Webinar</title>
		<link>/mysql-cluster/mysql-cluster-running-on-windows-new-webinar</link>
					<comments>/mysql-cluster/mysql-cluster-running-on-windows-new-webinar#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Tue, 22 Dec 2009 17:58:34 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=801</guid>

					<description><![CDATA[Replay now available from http://www.mysql.com/news-and-events/on-demand-webinars/display-od-445.html I&#8217;ll be presenting a (free) webinar on installing, configuring and running MySQL Cluster on Windows &#8211; starting at 10:00 PT on 7th January &#8211; that&#8217;s 18:00 UK time or 19:00 for most of Europe. To attend, just register ahead of time at mysql.com In this presentation we will explore the]]></description>
										<content:encoded><![CDATA[<div id="attachment_800" style="width: 264px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/12/windows.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-800" class="size-medium wp-image-800" title="MySQL Cluster Running on Windows" src="/wp-content/uploads/2009/12/windows-254x300.jpg" alt="MySQL Cluster Running on Windows" width="254" height="300" srcset="/wp-content/uploads/2009/12/windows-254x300.jpg 254w, /wp-content/uploads/2009/12/windows.jpg 618w" sizes="auto, (max-width: 254px) 100vw, 254px" /></a><p id="caption-attachment-800" class="wp-caption-text">MySQL Cluster Running on Windows</p></div>
<p>Replay now available from <a href="http://www.mysql.com/news-and-events/on-demand-webinars/display-od-445.html" target="_blank">http://www.mysql.com/news-and-events/on-demand-webinars/display-od-445.html</a></p>
<p>I&#8217;ll be presenting a (free) webinar on installing, configuring and running MySQL Cluster on Windows &#8211; starting at 10:00 PT on 7th January &#8211; that&#8217;s 18:00 UK time or 19:00 for most of Europe. To attend, just register ahead of time at <a href="http://www.mysql.com/news-and-events/web-seminars/display-445.html" target="_blank">mysql.com</a></p>
<p>In this presentation we will explore the benefits of leveraging MySQL Cluster on Windows. We will also cover step by step, how to get started with installing, configuring, and running MySQL Cluster on Windows. Finally, a review of MySQL Cluster&#8217;s architecture and future roadmap for Windows support will be covered. If you are interested in learning how to leverage MySQL Cluster on Windows, this webinar is for you.</p>
<p>Thursday, January 07, 2010: 10:00 Pacific time (America)<br />
Thu, Jan 07: 08:00 Hawaii time<br />
Thu, Jan 07: 11:00 Mountain time (America)<br />
Thu, Jan 07: 12:00 Central time (America)<br />
Thu, Jan 07: 13:00 Eastern time (America)<br />
Thu, Jan 07: 18:00 UTC<br />
Thu, Jan 07: 18:00 Western European time<br />
Thu, Jan 07: 19:00 Central European time<br />
Thu, Jan 07: 20:00 Eastern European time</p>
]]></content:encoded>
					
					<wfw:commentRss>/mysql-cluster/mysql-cluster-running-on-windows-new-webinar/feed</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>My first Cluster running on Windows</title>
		<link>/mysql-cluster/my-first-cluster-running-on-windows</link>
					<comments>/mysql-cluster/my-first-cluster-running-on-windows#comments</comments>
		
		<dc:creator><![CDATA[andrew]]></dc:creator>
		<pubDate>Tue, 16 Jun 2009 19:53:59 +0000</pubDate>
				<category><![CDATA[MySQL Cluster]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[MySQL Cluster 7.0]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">/?p=153</guid>

					<description><![CDATA[I figured that it was time to check out how to install, configure, run and use MySQL Cluster on Windows. To keep things simple, this first Cluster will all run on a single host but includes these nodes: 1 Management node (ndb_mgmd) 2 Data nodes (ndbd) 3 MySQL Server (API) nodes (mysqld) Downloading and installing]]></description>
										<content:encoded><![CDATA[<p>I figured that it was time to check out how to install, configure, run and use MySQL Cluster on Windows. To keep things simple, this first Cluster will all run on a single host but includes these nodes:</p>
<ul>
<li>1 Management node (ndb_mgmd)</li>
<li>2 Data nodes (ndbd)</li>
<li>3 MySQL Server (API) nodes (mysqld)</li>
</ul>
<h3>Downloading and installing</h3>
<p>Browse to the <a href="http://dev.mysql.com/downloads/cluster/7.0.html#win32" target="_blank">Windows section of the MySQL Cluster 7.0 download page</a> and download the installer (32 or 64 bit).</p>
<div id="attachment_157" style="width: 310px" class="wp-caption alignright"><a href="/wp-content/uploads/2009/06/custom_install.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-157" class="size-medium wp-image-157" title="custom_install" src="/wp-content/uploads/2009/06/custom_install-300x227.jpg" alt="MySQL Cluster Windows Installer" width="300" height="227" srcset="/wp-content/uploads/2009/06/custom_install-300x227.jpg 300w, /wp-content/uploads/2009/06/custom_install.jpg 514w" sizes="auto, (max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-157" class="wp-caption-text">MySQL Cluster Windows Installer</p></div>
<p>Run the .msi file and choose the &#8220;Custom&#8221; option. Don&#8217;t worry about the fact that it&#8217;s branded as &#8220;MySQL Server 7.0&#8221; and that you&#8217;ll go on to see adverts for MySQL Enterprise &#8211; that&#8217;s just an artefact of how the installer was put together.</p>
<p>On the next screen, I decided to change the &#8220;Install to&#8221; directory to &#8220;c:mysql&#8221; &#8211; not essential but it saves some typing later.</p>
<p>Go ahead and install the software and then you&#8217;ll be asked if you want to configure the server &#8211; uncheck that as we&#8217;ll want to tailor the configuration so that it works with our Cluster.</p>
<p>There are a couple of changes you need to make to your Windows configuration before going any further:</p>
<ol>
<li>Add the new bin folder to your path (in my case &#8220;C:mysqlbin&#8221;)</li>
<li>Make hidden files visible (needed in order to set up multiple MySQL Server processes on the same machine)</li>
</ol>
<h3>Configure and run the Cluster</h3>
<p>Copy the contents of &#8220;C:ProgramDataMySQLMySQL Server 7.0data&#8221; to &#8220;C:ProgramDataMySQLMySQL Server 7.0data4&#8221;, &#8220;C:ProgramDataMySQLMySQL Server 7.0data5&#8221; and &#8220;C:ProgramDataMySQLMySQL Server 7.0data6&#8221;. <strong>Note that this assumes that you&#8217;ve already made hidden files visible.</strong> Each of these folders will be used by one of the mysqld processes.</p>
<p>Create the folder &#8220;c:mysqlcluster&#8221; and then create the following files there:</p>
<p style="PADDING-LEFT: 30px"><strong>config.ini</strong></p>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[ndbd default]
noofreplicas=2</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[ndbd]
hostname=localhost
id=2</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[ndbd]
hostname=localhost
id=3</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[ndb_mgmd]
id = 1
hostname=localhost</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
id=4
hostname=localhost</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
id=5
hostname=localhost</span></pre>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
id=6
hostname=localhost</span></pre>
<p style="PADDING-LEFT: 30px"><strong>my.4.cnf</strong></p>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
ndb-nodeid=4
ndbcluster
datadir="C:ProgramDataMySQLMySQL Server 7.0data4"
port=3306
server-id=3306</span></pre>
<p style="PADDING-LEFT: 30px"><strong>my.5.cnf</strong></p>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
ndb-nodeid=5
ndbcluster
datadir="C:ProgramDataMySQLMySQL Server 7.0data5"
port=3307
server-id=3307</span></pre>
<p style="PADDING-LEFT: 30px"><strong>my.6.cnf</strong></p>
<pre style="padding-left: 60px; font-size: 11px"><span style="color: #333399;">[mysqld]
ndb-nodeid=6
ndbcluster
datadir="C:ProgramDataMySQLMySQL Server 7.0data6"
port=3308
server-id=3308</span></pre>
<p>Those files configure the nodes that make up the Cluster.</p>
<p>From a command prompt window, launch the management node:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">C:UsersAndrew&gt;cd mysqlcluster
C:mysqlcluster&gt;ndb_mgmd -f config.ini
2009-06-16 20:01:20 [MgmSrvr] INFO     -- NDB Cluster Management Server. mysql-5.1.34 ndb-7.0.6
2009-06-16 20:01:20 [MgmSrvr] INFO     -- The default config directory 'c:mysqlmysql-cluster' does not exist. Trying to create it...
2009-06-16 20:01:20 [MgmSrvr] INFO     -- Sucessfully created config directory
2009-06-16 20:01:20 [MgmSrvr] INFO     -- Reading cluster configuration from 'config.ini'</span></pre>
<p>and then from another window, check that the cluster has been defined:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;"> C:UsersAndrew&gt;ndb_mgm
-- NDB Cluster -- Management Client --
ndb_mgm&gt; show
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2 (not connected, accepting connect from localhost)
id=3 (not connected, accepting connect from localhost)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[ndb_mgmd(MGM)] 1 node(s)
id=1    @localhost  (mysql-5.1.34 ndb-7.0.6)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[mysqld(API)]   3 node(s)
id=4 (not connected, accepting connect from localhost)
id=5 (not connected, accepting connect from localhost)
id=6 (not connected, accepting connect from localhost)</span></pre>
<p>Fire up 2 more command prompt windows and launch the 2 data nodes:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">C:UsersAndrew&gt;ndbd
2009-06-16 20:08:57 [ndbd] INFO     -- Configuration fetched from 'localhost:118
6', generation: 1
2009-06-16 20:08:57 [ndbd] INFO     -- Ndb started
NDBMT: non-mt
2009-06-16 20:08:57 [ndbd] INFO     -- NDB Cluster -- DB node 2
2009-06-16 20:08:57 [ndbd] INFO     -- mysql-5.1.34 ndb-7.0.6 --
2009-06-16 20:08:57 [ndbd] INFO     -- Ndbd_mem_manager::init(1) min: 84Mb initi
al: 104Mb
Adding 104Mb to ZONE_LO (1,3327)
2009-06-16 20:08:57 [ndbd] INFO     -- Start initiated (mysql-5.1.34 ndb-7.0.6)
WOPool::init(61, 9)
RWPool::init(22, 13)
RWPool::init(42, 18)
RWPool::init(62, 13)
Using 1 fragments per node
RWPool::init(c2, 18)
RWPool::init(e2, 14)
WOPool::init(41, 8 )
RWPool::init(82, 12)
RWPool::init(a2, 52)
WOPool::init(21, 5)</span></pre>
<p>(repeat from another new window for the second data node).</p>
<p>After both data nodes (ndbd) have been launched, you should be able to see them through the management client:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">ndb_mgm&gt; show
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6, Nodegroup: 0, Master)
id=3    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6, Nodegroup: 0)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[ndb_mgmd(MGM)] 1 node(s)
id=1    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[mysqld(API)]   3 node(s)
id=4 (not connected, accepting connect from localhost)
id=5 (not connected, accepting connect from localhost)
id=6 (not connected, accepting connect from localhost)</span></pre>
<p>Finally, the 3 MySQL Server/API nodes should be lauched from 3 new windows:</p>
<pre style="PADDING-LEFT: 30px; font-size: 11px"><span style="color: #993300;">C:UsersAndrew&gt;cd mysqlcluster
C:mysqlcluster&gt;mysqld --defaults-file=my.4.cnf

C:UsersAndrew&gt;cd mysqlcluster
C:mysqlcluster&gt;mysqld --defaults-file=my.5.cnf

C:UsersAndrew&gt;cd mysqlcluster
C:mysqlcluster&gt;mysqld --defaults-file=my.6.</span>cnf</pre>
<p>Now, just check that all of the Cluster nodes are now up and running from the management client&#8230;</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">ndb_mgm&gt; show
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6, Nodegroup: 0, Master)
id=3    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6, Nodegroup: 0)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[ndb_mgmd(MGM)] 1 node(s)
id=1    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">[mysqld(API)]   3 node(s)
id=4    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6)
id=5    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6)
id=6    @127.0.0.1  (mysql-5.1.34 ndb-7.0.6)</span></pre>
<h3>Using the Cluster</h3>
<p>There are now 3 API nodes/MySQL Servers/mgmds running; all accessing the same data. Each of those nodes can be accessed by the mysql client using the ports that were configured in the my.X.cnf files. For example, we can access the first of those nodes (node 4) in the following way from (yet another) window:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">C:UsersAndrew&gt;mysql -h localhost -P 3306
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 2
Server version: 5.1.34-ndb-7.0.6-cluster-gpl MySQL Cluster Server (GPLType 'help;' or 'h' for help. Type 'c' to clear the current input statement.

mysql&gt; use test;
Database changed
mysql&gt; create table assets (name varchar(30) not null primary key, value int) engine=ndb;
Query OK, 0 rows affected (1.44 sec
mysql&gt; insert into assets values ('car', 950);
Query OK, 1 row affected (0.00 sec
mysql&gt; select * from assets;
+------+-------+
| name | value |
+------+-------+
| car  |   950 |
+------+-------+
1 row in set (0.00 sec
mysql&gt; insert into assets2 values ('car', 950);
Query OK, 1 row affected (0.00 sec)</span></pre>
<p>To check that everything is working correctly, we can access the same database through another of the API nodes:</p>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">C:UsersAndrew&gt;mysql -h localhost -P 3307
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 2
Server version: 5.1.34-ndb-7.0.6-cluster-gpl MySQL Cluster Server (GPL)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">Type 'help;' or 'h' for help. Type 'c' to clear the current input statement.</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">mysql&gt; use test;
Database changed
mysql&gt; show tables;
+----------------+
| Tables_in_test |
+----------------+
| assets         |
+----------------+
1 row in set (0.06 sec)</span></pre>
<pre style="padding-left: 30px; font-size: 11px"><span style="color: #993300;">mysql&gt; select * from assets;
+------+-------+
| name | value |
+------+-------+
| car  |   950 |
+------+-------+
1 row in set (0.09 sec)</span></pre>
<p>It&#8217;s important to note that the table (and its contents) of any table created using the ndb storage engine can be accessed through any of the API nodes but those created using other storage engines are local to each of the API nodes (MySQL Servers).</p>
<h3>Your next steps</h3>
<p>This is a very simple, contrived set up &#8211; in any sensible deployment, the nodes would be spread accross multiple physical hosts in the interests of performance and redundancy. You&#8217;d also set several more variables in the configuration files in order to size and tune your Cluster. Finally, you&#8217;d likely want to have some of these processes running as daemons or services rather than firing up so many windows.</p>
<p>It&#8217;s important to note that Windows is not a fully supported platform for MySQL Cluster. If you have an interest in deploying a production system on Windows then please contact me at <a href="mailto:andrew@clusterdb.com">andrew@clusterdb.com</a></p>
]]></content:encoded>
					
					<wfw:commentRss>/mysql-cluster/my-first-cluster-running-on-windows/feed</wfw:commentRss>
			<slash:comments>77</slash:comments>
		
		
			</item>
	</channel>
</rss>
